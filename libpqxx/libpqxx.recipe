class libPQxx(AutoPackageRecipe):

    name = 'libpqxx'
    version = '2.6.7'

    buildRequires = [
        'doxygen:runtime', 'graphviz:runtime', 'libstdc++:devel',
        'postgresql:devel', 'xmlto:runtime'
    ]

    def unpack(r):

        r.addArchive('http://thaiopensource.org/download/software/%(name)s/')

        # Build fix
        r.Replace('SAMPLETXT=.+',
                  'SAMPLETXT="$(mktemp /tmp/$(basename $0).XXXXXXX)"',
                  'tools/splitconfig')

    def configure(r):

        r.Configure('--enable-shared')

    def policy(r):

        r.CheckSonames(exceptions='%(libdir)s/libpqxx.*')

