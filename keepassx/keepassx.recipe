# vim: ts=4 sw=4 expandtab ai
#
# Copyright (c) 2008-2009 Erik Southworth <erik.southworth@gmail.com>
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class KeePassX(AutoPackageRecipe):
    name = 'keepassx'
    version = '0.4.0'
    archive = 'mirror://sourceforge/%(name)s/%(name)s-%(version)s.tar.gz'

    buildRequires = [
        'gtk:runtime', # conary 'tagscripts' belong to this. Ok really?
        'qt4:devel', # qt4:devel=4.4.1+r861610-0.1-1
        'desktop-file-utils:runtime',
        'libX11:devel',
        'libXtst:devel',
        'libstdc++:devel',
        'qt4-core:lib',
        'qt4-gui:lib',
        'shared-mime-info:runtime', 'xextproto:devel', 'libxi:devel',
         ]

    def setMacros(r):
        r.macros.homepage = r.packageHomepage

    def unpack(r):
        r.setMacros()
        r.addArchive(r.archive)

    def configure(r):
        r.Make('PREFIX=%(destdir)s/%(prefix)s', makeName='qmake-qt4')

    def policy(r):
        r.Licenses(
            'GPLv2',
            '3-clause BSD',)

        r.Description(
            shortDesc=r.packageSummary,
            longDesc =r.packageDescription)

    packageHomepage = 'http://www.keepassx.org/'
    packageSummary = 'KeePassX - Cross Platform Password Manager'
    packageDescription = \
        """KeePassX saves many different information e.g. user names,
           passwords, urls, attachments and comments in one single database.
           Homepage: %(homepage)s"""
