#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage.recipe')
class GnomeSession(GnomePackageRecipe):
    
    buildRequires = [ 'GConf:devel', 'ORBit2:devel',
       'atk:devel', 'audiofile:devel', 'cairo:devel',
       'libXrandr:devel', 'xrdb:runtime', 'control-center:devel',
       'fontconfig:devel', 'freetype:devel',
       'gnome-keyring:devel', 'libart_lgpl:devel',
       'libgnomecanvas:devel', 'libpng:devel',
       'libxml2:devel', 'pango:devel', 'popt:devel',
       'tcp_wrappers:devel', 'esound:devel', 'glib:devel',
       'gnome-vfs:devel', 'libbonobo:devel',
       'libbonoboui:devel', 'libgnome:devel',
       'libgnomeui:devel', 'GConf:runtime',
        'desktop-file-utils:runtime', 'esound:runtime',
        'gettext:runtime', 'glib:runtime', 'gnome-desktop:devel',
        'gnome-keyring:runtime', 'krb5-workstation:runtime',
        'perl:runtime', 'startup-notification:devel',
        'dbus-glib:devellib', 'dbus:devel','expat:devel' ]

    name = 'gnome-session'
    version = '2.18.0'

    extraConfig = '--with-halt-command=%(bindir)s/poweroff '\
                  '--with-reboot-command=%(bindir)s/reboot'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        # Don't set the G_DEBUG environment variable.  It's known to break the
        # gaim2 beta.
        r.addPatch('no_debug.patch', dir='gnome-session', level=0)
        #r.addPatch('autostart.patch')
        r.addSource('gnome-splash.png', dir='gnome-session')
