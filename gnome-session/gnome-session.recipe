#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage.recipe')
class GnomeSession(GnomePackageRecipe):
    
    buildRequires = [ 'GConf:devel', 'ORBit2:devel',
       'atk:devel', 'audiofile:devel', 'cairo:devel','libXrandr:devel', 'xrdb:runtime',
       'fontconfig:devel', 'freetype:devel',
       'gnome-keyring:devel', 'libart_lgpl:devel',
       'libgnomecanvas:devel', 'libpng:devel',
       'libxml2:devel', 'pango:devel', 'popt:devel',
       'tcp_wrappers:devel', 'esound:devel', 'glib:devel',
       'gnome-vfs:devel', 'libbonobo:devel',
       'libbonoboui:devel', 'libgnome:devel',
       'libgnomeui:devel', 'GConf:runtime',
        'desktop-file-utils:runtime', 'esound:runtime',
        'gettext:runtime', 'glib:runtime', 'gnome-desktop:devel',
        'gnome-keyring:runtime', 'krb5-workstation:runtime',
        'perl:runtime', 'startup-notification:devel',
        'dbus-glib:devellib', 'dbus:devel' ]

    name = 'gnome-session'
    version = '2.15.90'
    
    extraConfig = '--with-halt-command=%(bindir)s/poweroff '\
                  '--with-reboot-command=%(bindir)s/reboot'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        #r.addPatch('autostart.patch')
        r.addSource('gnome-splash.png', dir='gnome-session')
