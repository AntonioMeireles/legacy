#
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class BashCompletion(AutoPackageRecipe):

    name = 'bash-completion'
    version = '2.0'

    def unpack(r):

        r.addArchive('http://bash-completion.alioth.debian.org/files/')

        # From upstream post-1.2 git
        r.addPatch('bash-completion-1.2-init.d.patch')
        # From upstream post-1.2 git, #628130
        r.addPatch('bash-completion-1.2-tilde-username-628130.patch')
        # From upstream post-1.2 git, #630328
        r.addPatch('bash-completion-1.2-rpm-630328.patch')
        # From upstream post-1.2 git, #630658
        r.addPatch('bash-completion-1.2-known_hosts-ipv6-630658.patch')

        r.Replace('apache2ctl', 'apachectl', 'contrib/apache2ctl')


    def policy(r):

        r.AutoDoc(exceptions='/.*/')

        r.SetModes('%(sysconfdir)s/profile.d/bash_completion.sh', 0755)

