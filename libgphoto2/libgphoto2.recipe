class LibGphoto2(PackageRecipe):

    buildRequires = [ 'gtk:devel', 'findutils:runtime',
	              'libexif:devel', 'libusb:devel',
		      'lockdev:devel']

    name = 'libgphoto2'
    version = '2.1.5'

    def setup(r):
	r.addArchive('http://aleron.dl.sourceforge.net/sourceforge/gphoto/libgphoto2-%(version)s.tar.gz')
	r.addSource('usbcam.console')

	r.Run('libtoolize -f')
	r.Configure('--disable-rpath --with-doc-dir=%(thisdocdir)s')
	
	r.Make()
	r.MakeInstall()
	
	r.Doc('AUTHORS', 'NEWS', 'README', 'ChangeLog')
	r.Remove('%(libdir)s/gphoto2/%(version)s/*.a')
	r.ComponentSpec('runtime', '%(libdir)s/gphoto2/%(version)s/')
	r.Provides(exceptions=['%(libdir)s/gphoto2/%(version)s/'])
        r.Requires('distro-release:runtime', '%(bindir)s/gphoto2-config')
        r.TagSpec('gphoto-camera-register', '%(bindir)s/gphoto2-config')
	r.Install('usbcam.console','%(sysconfdir)s/hotplug/usb/usbcam')
