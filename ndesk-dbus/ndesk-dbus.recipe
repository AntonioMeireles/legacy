#
# Copyright (c) 2007 Paul Scott-Wilson <pscott>
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class NdeskDbus(BuildPackageRecipe):
    name = 'ndesk-dbus'
    version = '0.5.2'
    buildRequires = [ 'mono:devel', 'mono:lib' ]

    def setup(r):
        r.Environment('MONO_SHARED_DIR', '/tmp')
        r.macros.archive_name = 'dbus-sharp'
        r.addArchive('http://www.ndesk.org/archive/dbus-sharp/')
        r.Replace('@prefix@', '%(prefix)s', 'ndesk-dbus-1.0.pc.in', lines=1)
        #r.Replace('/lib/', '/', 'ndesk-dbus-1.0.pc.in', lines=11)
        r.Install('ndesk-dbus-1.0.pc.in', '%(libdir)s/pkgconfig/ndesk-dbus-1.0.pc')
        r.Replace('prefix=.*', 'prefix=%(prefix)s', 'include.mk', lines=9)
        r.MakeInstall(dir='src')
