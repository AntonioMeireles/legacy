#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Iproute(CPackageRecipe):
    name = 'iproute'
    version = '2.6.28'

    buildRequires = [ 'bison:runtime', 'db:devel', 'flex:runtime', ]

    def setup(r):
        r.disableParallelMake()
        r.macros.iproute_pkg_version = r.version.replace('_', '-')
        r.addArchive('http://developer.osdl.org/dev/iproute2/download/iproute2-%(iproute_pkg_version)s.tar.bz2')

        r.Make()

        r.MakeInstall('SBINDIR=%(sbindir)s CONFDIR=%(sysconfdir)s/iproute2'
            ' DOCDIR=%(thisdocdir)s MANDIR=%(mandir)s DESTDIR=%(destdir)s')

        r.Move('%(sbindir)s/{ip,ifcfg,rtmon,tc}', '%(essentialsbindir)s/')

