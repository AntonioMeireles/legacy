# vim:set ts=4 sw=4 et:
#
# Copyright (c) 2010 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class jack(AutoPackageRecipe):
    name = 'jack'
    version = '1.9.7'

    buildRequires = [ 'alsa-lib:devel', 'libsndfile:devel', 'libtermcap:devel',
    'glibc:devel', 'portaudio:devel', 'readline:devel', 'doxygen:runtime', 'pkgconfig:devel',
    'dbus-python:python', 'dbus:devel', 'expat:devel', 'libsamplerate:devel',
    'libstdc++:devel', 'ncurses:devel', 'python:devel'
                     ]

    def unpack(r):
        r.addArchive('http://www.grame.fr/~letz/')
        r.addPatch('jack-doxygen-output-dir-fix.patch')

    def configure(r):
        r.ManualConfigure('--prefix=%(prefix)s --libdir=/%(lib)s --enable-pkg-config-dbus-service-dir --doxygen --classic --dbus --alsa configure', configureName='waf')

    def make(r):
        r.Make('build', makeName='./waf')

    def makeinstall(r):
        r.Make('--destdir=%(destdir)s install', makeName='./waf')
