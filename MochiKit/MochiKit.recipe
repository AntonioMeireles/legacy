#
# Copyright (c) 2005-2006 rPath Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class MochiKit(PackageRecipe):
    name = 'MochiKit'
    version = '1.3.1'

    buildRequires = [ 'unzip:runtime' ]

    Flags.packed = True

    def setup(r):
        r.addArchive('http://www.mochikit.com/dist/%(name)s-%(version)s.zip')
        r.addSource('pack-sorta.py')

        r.Doc('LICENSE.txt', 'doc', 'include', 'examples', 'tests', 'lib');

        # If we want an "unpacked" MochiKit, we'll need to run the pack-sorta
        # script, which will overwrite the packed version in the archive with
        # the unpacked one.
        if not Flags.packed:
            r.Run('python pack-sorta.py')

        # Copy the important bits over
        r.Copy('packed/MochiKit', '%(servicedir)s/www/html/');

