#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class AspellDe(BuildPackageRecipe):
    name = 'aspell-de'
    # this package has an interesting versioning scheme:
    # aspell6-de-20030222-1 is the latest, and apparently matches
    # aspell 0.60. we'll just take: 6.20030222.1

    version = '6.20030222.1' # version cannot have '-' in it

    buildRequires = [ 'aspell:runtime', 'which:runtime' ]


    def setup(r):
        # insert upstream -
        verlist = r.version.split('.')
        r.macros.majver = verlist[0]
        if len(verlist) > 2:
            r.macros.upver = '-'.join(verlist[1:])
        else:
            r.macros.upver = r.version

        r.mainDir('aspell%(majver)s-de-%(upver)s')
        r.addArchive('http://ftp.gnu.org/gnu/aspell/dict/de/aspell%(majver)s-de-%(upver)s.tar.bz2')

        # this isn't an autoconf configure script
        # don't use %(libdir)s for dictdir because we're not looking
        # at shared libs
        r.ManualConfigure('--vars datadir=%(datadir)s/aspell dictdir=%(prefix)s/lib/aspell')

        r.Make()
        r.MakeInstall()
