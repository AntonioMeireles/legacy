class AbiWord(PackageRecipe):

    buildRequires = [ 'gtk:devel', 'libxml2:devel',
			'aspell:devel', 'libpng:devel',
			'libbonobo:devel','libbonoboui:devel',
			'libgnomeprint:devel','libgnomeprintui:devel',
			'libgnomeui:devel','desktop-file-utils:runtime',
			'fribidi:devel', 'libwmf:devel' ]

    name = 'abiword'
    version = '2.0.12'

    def setup(r):
	r.addArchive('http://unc.dl.sourceforge.net/sourceforge/%(name)s/%(name)s-%(version)s.tar.gz')

	r.Configure('--enable-gnome', subDir='abi')
	r.Make(subDir='abi')
	r.MakeInstall(subDir='abi')
	
	r.Configure('--disable-magic --with-abiword=../abi', subDir='abiword-plugins')
	r.Make(subDir='abiword-plugins')
	r.MakeInstall(subDir='abiword-plugins')
	
	r.Run("sed -i 's/\/usr\/local/\%(prefix)s/g' abiword-docs/Makefile")
	r.Run("sed -i 's/docs-en-US-install/install/g' abiword-docs/Makefile")
	r.MakeInstall(subDir='abiword-docs')

	r.ComponentSpec('runtime', '%(libdir)s/AbiWord-2.0/plugins/')
