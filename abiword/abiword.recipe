#
# Copyright (c) 2007 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('gnomepackage.recipe')
class AbiWord(GnomePackageRecipe):


    name = 'abiword'
    version = '2.4.6'

    buildRequires = ['GConf:devel', 'ORBit2:devel', 'aiksaurus:devel', 
'autoconf:runtime',  'automake:runtime', 'libtool:devel', 'libtool:runtime',
'bzip2:devel', 'desktop-file-utils:runtime', 'enchant:devel', 'esound:devel', 
'expat:devel', 'fribidi:devel', 'gail:devel', 'gnome-keyring:devel', 
'gnome-vfs:devel', 'gucharmap:devel', 'libXft:devel', 'libart_lgpl:devel',
'libbonobo:devel', 'libbonoboui:devel', 'libglade:devel', 
'libgnome:devel', 'libgnomecanvas:devel',
'libgnomeprint:devel', 'libgnomeprintui:devel', 'libgnomeui:devel', 
'libgsf:devel', 'libjpeg:devel', 'librsvg:devel', 'libstdc++:devel',
'libtermcap:devel',  'libwpd:devel',
'libwmf:devel', 'popt:devel', 'psiconv:devel','pkgconfig:devel' ,
'm4:runtime', 'readline:devel']

    def setup(r):
        r.addArchive('http://www.abisource.org/downloads/%(name)s/%(version)s/source/%(name)s-%(version)s.tar.gz')
        r.macros.extraConfig= ' --enable-gnome'
        r.macros.abidir     = 'abi'
        r.macros.pluginsdir = 'abiword-plugins'       
        # Configure and make Abiword core:
        r.Configure(' --enable-extra-optimization --with-pspell=yes %(extraConfig)s', dir='%(abidir)s')
        r.Make(dir='%(abidir)s')
        r.MakeInstall(dir='%(abidir)s')
        # Configure and make Abiword Plugins 
        # see  also http://www.abisource.com/twiki/bin/view/Abiword/PluginMatrix
        r.Run('./nextgen.sh', dir='%(pluginsdir)s')
        r.Configure(' --disable-all'
' --enable-abicommand --enable-abicapi --enable-abidash --enable-abigimp'
' --enable-abigochart --enable-abigrammar --enable-aiksaurus--enable-abimathview'
' --enable-babelfish  --enable-bmp --enable-bz2abw --enable-docbook'
' --enable-eml --enable-freetranslation --enable-gda --enable-gdict --enable-google --enable-hrtext'
' --enable-html --enable-jpeg --enable-kword --enable-librsvg  --enable-ots'
' --enable-psion --enable-mswrite --enable-OpenDocument --enable-pdb'
' --enable-sdw --enable-shell --enable-t602 --enable-wmf --enable-wordperfect'
' --enable-xhtml--enable-xsl-fo %(extraConfig)s', dir='%(pluginsdir)s')
        r.Make(dir='%(pluginsdir)s')
        r.MakeInstall(dir='%(pluginsdir)s')
        r.ComponentSpec('lib', '%(libdir)s/AbiWord-2.4/plugins/')
        r.ComponentSpec('doc', '%(datadir)s/AbiSuite-2.4/AbiWord/help/')
