#
# Copyright (c) 2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Spidermonkey(AutoPackageRecipe):
    name = 'spidermonkey'
    version = '1.7.0'
 
    buildRequires = []
 
    def setup(r):
        r.addArchive('http://ftp.mozilla.org/pub/mozilla.org/js/js-%(version)s.tar.gz')
        r.Run('make -C src -f Makefile.ref')
        r.Install('src/Linux_All_DBG.OBJ/libjs.so','%(libdir)s/')
        r.Install('src/Linux_All_DBG.OBJ/jsautocfg.h','%(includedir)s/js/')
        r.Install('src/Linux_All_DBG.OBJ/jsautokw.h','%(includedir)s/js/')
        r.Install('src/*.h','%(includedir)s/js/')
        r.Install('src/*.tbl','%(includedir)s/js/')
        r.Install('src/*.msg','%(includedir)s/js/')
        r.Install('src/*.asm','%(includedir)s/js/')
        r.Install('src/Linux_All_DBG.OBJ/js','%(bindir)s/')
        r.Install('src/Linux_All_DBG.OBJ/jscpucfg','%(bindir)s/')
        r.Install('src/Linux_All_DBG.OBJ/jskwgen','%(bindir)s/')
