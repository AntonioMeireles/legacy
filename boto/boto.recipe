#
# Copyright (c) 2007-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadInstalled('python=conary.rpath.com@rpl:devel')
class Boto(PackageRecipe):
    name = 'boto'
    version = '1.3a'

    buildRequires = [ 'python-setuptools:python', 'm2crypto:python',
        'python:devel' ]

    def setup(r):
        r.macros.sitepkgs = Python.sitepkgs
        r.addArchive('http://boto.googlecode.com/files/')

        # exception handling (issue #151) -- until it's in upstream --sgp
        r.addPatch('http://people.rpath.com/~scott/cabinet/boto_patches/exceptionUnmarshalling/main.patch')

        # bonus strip whitespace patch --sgp
        r.addPatch('http://people.rpath.com/~scott/cabinet/boto_patches/exceptionUnmarshalling/stripWhitespace.patch')

        r.PythonSetup()

        r.Remove('%(bindir)s/test.py')
        r.Remove('%(sitepkgs)s/tests', recursive=True)
