# Gil Hamlin
# gil@foresightlinux.com
# 15th May 2005

class pinball(PackageRecipe):
    buildRequires = [ "glibc:devel", "SDL:devel", "SDL_mixer:devel",
                      "SDL_image:devel", "desktop-file-utils:runtime" ]
    name = "pinball"
    version = "0.3.1"

    def setup(r):
        r.addArchive('http://kent.dl.sourceforge.net/sourceforge/%(name)s/%(name)s-%(version)s.tar.gz')
        r.Configure()
        r.Make()
        r.MakeInstall()

#       Manually add the pinball tables

        r.Install ('data/professor/libModuleProfessor.la', '%(libdir)s/pinball/')
        r.Install ('data/tux/libModuleTux.la', '%(libdir)s/pinball/') 

#       This line tells conary not to remove the pinball tables we just added to %(libdir)s/pinball/

        r.RemoveNonPackageFiles(exceptions=r'.*\.la') 

#       Here are the docs

        r.Doc('AUTHORS', 'COPYING', 'NEWS',
              'README')

#       Here are our menu links

        r.addSource('pinball.desktop')
        r.Desktopfile('pinball.desktop')
