#
# Copyright (c) 2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('cmakepackage')
class Strigi(CMakePackageRecipe):

    name='strigi'
    version = '0.7.2'

    buildRequires = [
        'bzip2:devel', 'clucene:devel', 'dbus:devel', 'exiv2:devel',
        'expat:devel', 'gamin:devel', 'icedtea-jdk:runtime', 'libstdc++:devel',
        'libX11:devel', 'libXext:devel', 'libxml2:devel', 'libxml2:runtime',
        'perl:runtime', 'qt4:devel', 'zlib:devel'
    ]

    def unpack(r):

        if Arch.x86_64:
            r.cmakeArgs += ' -DLIB_SUFFIX=64 '

        r.cmakeArgs += (
            ' -DENABLE_EXPAT:BOOL=ON '
            ' -DENABLE_FAM:BOOL=ON '
            ' -DENABLE_INOTIFY:BOOL=ON '
            ' -DENABLE_SQLITE:BOOL=OFF '
        )

        r.addArchive('http://www.vandenoever.info/software/strigi/')
        r.addPatch('foo.patch')

        # Use system one
        r.Remove('cmake/FindQt4.cmake')

