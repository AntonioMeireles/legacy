#
# Copyright (c) 2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Weechat(AutoPackageRecipe):

    name = 'weechat'
    version = '0.3.3'

    packageSummary = 'WeeChat is a fast, light and extensible chat client.'
    packageDescription = 'WeeChat is: modular: a lightweight core with plugins around, multi-protocols: IRC and Jabber (other soon), extensible with C plugins and scripts (Perl, Python, Ruby, Lua and Tcl), free software, released under GPLv3 license.'

    buildRequires = [
        'aspell:devel',
        'cmake:runtime',
        'lua:runtime',
        'lua:devel',
        'ncurses:devel',
        'perl:devel',
        'perl:runtime',
        'pkgconfig:devel',
        'ruby:devellib',
        'ruby:runtime',
        'python:devel',
        'python:runtime',
        'gettext:runtime',
        'gnutls:devel',
        'intltool:runtime',
        'libgcrypt:devel',
        'libgpg-error:devel',
        'asciidoc:runtime',
        'tcl:devel',
        'tcl:runtime',
        ]

    patches = [
        'weechat-cmake-paths.patch',
        ]

    extraConfig = ''
    if Arch.x86_64:
        # define LIB_SUFFIX to use in the cmake-paths patch
        extraConfig = '-DLIB_SUFFIX=64'

    def unpack(r):
        r.addArchive('http://www.weechat.org/files/src/')
        for patch in r.patches:
            r.addPatch(patch)

    def configure(r):
        r.CMake(r.extraConfig)
