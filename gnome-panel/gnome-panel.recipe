#
# Copyright (c) 2004 Specifix, Inc.
# All rights reserved
#

loadRecipe('gnomepackage.recipe')
class GnomePanel(GnomePackageRecipe):
    
    buildRequires = GnomePackageRecipe.buildRequires
    buildRequires.extend([ 'libpng:devel', 'scrollkeeper:runtime', 'glib:devel',
                           'gtk:devel', 'libglade:devel', 'libgnomeui:devel',
                           'gnome-desktop:devel', 'libwnck:devel',
                           'libbonobo:devel', 'libbonoboui:devel',
                           'gnome-vfs:devel', 'libxslt:devel',
                           'fontconfig:devel', 'startup-notification:devel',
                           'gnome-keyring:devel', 'evolution-data-server:devel',
			   'GConf:devel', 'ORBit2:devel', 'atk:devel', 'cairo:devel',
                           'freetype:devel', 'gnome-menus:devel', 'libart_lgpl:devel',
                           'libgnome:devel', 'libgnomecanvas:devel', 'libxml2:devel',
                           'pango:devel', 'popt:devel' ])

    name = 'gnome-panel'
    version = '2.12.0'
        
    extraConfig = GnomePackageRecipe.extraConfig
    extraConfig += ' --disable-scrollkeeper'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
	r.addPatch('launchers.patch')

    def setup(r):
	r.addSource('gnome-panel-settings.tagdescription', macros=True)
	r.addSource('gnome-panel-settings.taghandler')
	r.Install('gnome-panel-settings.tagdescription',
		  '%(tagdescriptiondir)s/gnome-panel-settings')
	r.Install('gnome-panel-settings.taghandler',
		  '%(taghandlerdir)s/gnome-panel-settings', mode=0755)
        r.TagSpec('gconf2schema',
                  exceptions='%(sysconfdir)s/gconf/schemas/.*\.schemas')
        r.TagSpec('gnome-panel-settings',
                  '%(sysconfdir)s/gconf/schemas/.*')
        GnomePackageRecipe.setup(r)
