#
# Copyright (c) 2004 Specifix, Inc.
# All rights reserved
#

loadRecipe('gnomepackage.recipe', label='conary.specifix.com@spx:devel')
class GnomePanel(GnomePackageRecipe):
    
    buildRequires = GnomePackageRecipe.buildRequires
    buildRequires.extend([ 'libpng:devel', 'scrollkeeper:runtime', 'glib:devel',
                           'gtk:devel', 'libglade:devel', 'libgnomeui:devel',
                           'gnome-desktop:devel', 'libwnck:devel',
                           'libbonobo:devel', 'libbonoboui:devel',
                           'gnome-vfs:devel', 'libxslt:devel',
                           'fontconfig:devel', 'startup-notification:devel',
                           'gnome-keyring:devel', 'evolution-data-server:devel' ])

    name = 'gnome-panel'
    version = '2.10.1'
        
    def unpack(r):
        GnomePackageRecipe.unpack(r)
	r.addPatch('notification_area.patch')

    def setup(r):
	r.addSource('gnome-panel-settings.tagdescription', macros=True)
	r.addSource('gnome-panel-settings.taghandler')
	r.Install('gnome-panel-settings.tagdescription',
		  '%(tagdescriptiondir)s/gnome-panel-settings')
	r.Install('gnome-panel-settings.taghandler',
		  '%(taghandlerdir)s/gnome-panel-settings', mode=0755)
        r.TagSpec('gconf2schema',
                  exceptions='%(sysconfdir)s/gconf/schemas/.*\.schemas')
        r.TagSpec('gnome-panel-settings',
                  '%(sysconfdir)s/gconf/schemas/.*')
        GnomePackageRecipe.setup(r)
