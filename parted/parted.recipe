#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Parted(CPackageRecipe):
    name = 'parted'
    version = '1.8.6'

    buildRequires = [ 'e2fsprogs:devel', 'libtool:runtime',
        'install-info:runtime', 'autoconf:runtime', 'automake:runtime',
        'xdelta:devel', 'gettext:devel', 'libtool:runtime',
        'readline:devel', 'libtermcap:devel', 'ncurses:devel',
        'pkgconfig:devel', ]

    def setup(r):
        r.addArchive('mirror://gnu/parted/')

        if 'LINGUAS' in os.environ:
            del os.environ['LINGUAS']

        r.Configure('--enable-shared --enable-part-static --enable-pc98=no'
            ' --enable-Werror=no --disable-dynamic-loading --with-readline')
        r.Make('LIBTOOL=/usr/bin/libtool', preMake='tagname=CC')
        r.MakeInstall('LIBTOOL=/usr/bin/libtool MKINSTALLDIRS=`pwd`/mkinstalldirs', preMake='tagname=CC')
        r.Doc('doc/API', 'doc/FAT')
