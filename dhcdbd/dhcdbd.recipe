class dhcdbd(PackageRecipe):

    buildRequires = [ 'dbus:devel', 'glibc:devel','chkconfig:runtime' ]
    name = "dhcdbd"
    version = "1.16"

    def setup(r):
	srpm = 'http://download.fedora.redhat.com/pub/fedora/linux/core/development/source/SRPMS/%(name)s-%(version)s-1.fc6.src.rpm'

	r.addArchive(srpm)
	r.addArchive('%(name)s-%(version)s.tar.gz',rpm=srpm)

#        r.addArchive("http://people.redhat.com/~jvdias/dhcdbd/%(name)s-%(version)s.tar.gz")

        r.Make()
        r.MakeInstall()

	r.Replace('chkconfig: - 98 02','chkconfig: 345 98 02', 'RedHat/dhcdbd.init')
	r.Replace('/bin/dbus-send','%(bindir)s/dbus-send', 'RedHat/dhcdbd.init')

	r.Install('RedHat/dhcdbd.init','%(initdir)s/dhcdbd', mode=0755)
        r.Requires('dhclient:lib','%(essentialsbindir)s/dhcdbd')
