#
# Copyright (c) 2006-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class GtkGnutella(CPackageRecipe):
    name = 'gtk-gnutella'
    version = '0.96.3'

    buildRequires = [ 'atk:devel', 'cairo:devel', 'dbus:devel',
        'fontconfig:devel', 'freetype:devel', 'glib:devel', 'gtk:devel',
        'libpng:devel', 'libxml2:devel', 'pango:devel', 'zlib:devel',
        'desktop-file-utils:config', 'expat:devel', 'sqlite:devel', ]

    def setup(r):
        r.addArchive('mirror://sourceforge/gtk-gnutella/')
        # grrrr @ non-auto-conf configure scripts
        r.Run("./Configure -Oders -D prefix='%(prefix)s' -D bindir='%(bindir)s' -D sysman='%(mandir)s' -D privlib='%(libdir)s/%(name)s' -D locale='%(datadir)s/locale' -D cc='%(cc)s' -D ccflags='%(cflags)s' -D optimize='%(optflags)s' -D ldflags='%(ldflags)s' -D gtkversion=2 -D official=true")
        r.Make()
        r.MakeInstall('INSTALL_PREFIX=%(destdir)s')
