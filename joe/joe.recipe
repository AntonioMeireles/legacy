#
# Copyright (c) 2004-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Joe(AutoPackageRecipe):
    name = 'joe'
    version = '3.5'

    buildRequires = [ 'ncurses:devel', 'aspell:runtime', ]

    def unpack(r):
        r.addArchive('mirror://sourceforge/joe-editor/joe-%(version)s.tar.gz')

    def policy(r):
        r.Run('echo >> %(destdir)s/%(sysconfdir)s/joe/syntax/php.jsf')
        r.Remove('%(sysconfdir)s/%(name)s/doc.*')
        r.Symlink('joe.1', '%(mandir)s/man1/jmacs.1')
        r.Symlink('joe.1', '%(mandir)s/man1/jpico.1')
        r.Symlink('joe.1', '%(mandir)s/man1/jstar.1')
        r.Symlink('joe.1', '%(mandir)s/man1/rjoe.1')
        r.Move('%(sysconfdir)s/joe/doc/HINTS', '%(thisdocdir)s/')
        r.Move('%(sysconfdir)s/joe/doc/LIST', '%(thisdocdir)s/')
        r.Remove('%(sysconfdir)s/joe/doc', recursive=True)
