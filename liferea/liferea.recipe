loadInstalled('mozilla', label='conary.rpath.com@rpl:1')
class Liferea(AutoPackageRecipe):

    name = 'liferea'
    version = '1.0.18'

    buildRequires = ['GConf:devel', 'GConf:runtime', 'ORBit2:devel',
                     'atk:devel', 'dbus:devel', 'glib:devel', 'gtk:devel',
                     'libgtkhtml:devel', 'dbus-glib:devellib',
                     'libxml2:devel', 'pkgconfig:devel', 'pango:devel',
                     'xorg-x11:devel', 'zlib:devel', 'cairo:devel',
                     'fontconfig:devel', 'freetype:devel', 'libpng:devel',
                     'libstdc++:devel', 'mozilla-nspr:devel',
                     'mozilla:devel', 'bash:runtime']

    def unpack(r):
        r.addArchive('http://download.sourceforge.net/sourceforge/%(name)s/%(name)s-%(version)s.tar.gz')

    def policy(r):
        r.ComponentSpec('doc', "%(datadir)s/%(name)s/doc/")

        r.ComponentSpec('runtime',
                        "%(datadir)s/applications/%(name)s.desktop")

        r.TagSpec("desktop-file",
                  "%(datadir)s/applications/%(name)s.desktop")

        r.TagSpec("gconf2schema",
                  "%(sysconfdir)s/gconf/schemas/%(name)s.schemas")

        r.macros.mozver = Mozilla.version
        r.macros.mozilladir = 'mozilla-%(mozver)s'
        r.Requires(rpath='%(libdir)s/%(mozilladir)s')
