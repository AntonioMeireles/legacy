#
# Copyright (c) 2010 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Radiotray(AutoPackageRecipe):
    name = 'radiotray'
    version = '0.5'

    packageSummary = 'Radio Tray is an online radio streaming player'
    packageDescription = 'Radio Tray is an online radio streaming player that runs on a Linux system tray. Its goal is to have the minimum interface possible, making it very straightforward to use.'

    buildRequires = [
        'desktop-file-utils:runtime',
        'gst-python:python',
        'lxml:python',
        'notify-python:python',
        'pygobject:python',
        'pygtk:python',
        'python-setuptools:python',
        'python:devel',
    ]

    def setup(r):
        r.addArchive('mirror://sourceforge/radiotray/releases/')
        r.Replace('Encoding=UTF-8', '', 'share/applications/radiotray.desktop')
        r.Replace('Version=%(version)s', '', 'share/applications/radiotray.desktop')
	r.Replace('Icon=/usr/local/share/radiotray/icons/radiotray.png', 'Icon=/usr/share/radiotray/res/radiotray.png' , 'share/applications/radiotray.desktop')
        r.Replace('Exec=/usr/local/bin/radiotray', 'Exec=%(bindir)s/radiotray', 'share/applications/radiotray.desktop')
	r.Install('bin/radiotray', '%(bindir)s/radiotray')
	r.Move('share/*', '%(datadir)s/')
