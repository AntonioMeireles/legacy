#
# Copyright (c) 2007 -2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Exaile(CPackageRecipe):
   name = 'exaile'
   version = '0.2.14'
   buildRequires = [ 'atk:devel', 'cairo:devel', 'expat:devel',
           'fontconfig:devel', 'freetype:devel', 'glib:devel',
           'gettext:runtime', 'intltool:runtime', 'gtk:devel', 'libpng:devel',
           'libX11:devel', 'libXrender:devel', 'pango:devel', 'zlib:devel',
           'MySQL-python:python', 'dbus-python:python', 'pygobject:runtime',
           'pygobject:python', 'desktop-file-utils:runtime',
           'elementtree:python', 'gamin:python', 'gnome-python-extras:python',
           'gst-python:python', 'notify-python:python', 'pkgconfig:devel',
           'pygtk:devel', 'pygtk:python', 'python-sqlite:python',
           'python:devel', 'mutagen:python', 'pycairo:python',
           'python-ctypes:python', 'cddb-py:python', 'mx:python',]

   def setup(r):
      r.addArchive('http://www.exaile.org/files/%(name)s_%(version)s.tar.gz')
      r.addPatch('./xfburn_support.patch')
#      r.addBzrSnapshot('lp:exaile', revision=r.revision)
      r.Environment('PREFIX', '%(prefix)s/')
      r.Environment('LIBDIR', '%(lib)s')
      r.Environment('FIREFOX', '/%(libdir)s/firefox/')

      r.Make('all')
      r.MakeInstall()

# runtime requirements
      req = [ 'mutagen:python', 
              'cddb-py:python', 
              'notify-python:python', 
              'gst-python:python', 
            ]
      for p in req:
          r.Requires(p, '%(bindir)s/exaile')
