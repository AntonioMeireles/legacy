loadSuperClass('kdepackage.recipe')
class Digikam(kdePackageRecipe):

    name = 'digikam'
    version = '0.8.0'

    buildRequires = [ 'qt:apidox', 'doxygen:runtime', 'graphviz:runtime',
                      'acl:devel', 'attr:devel', 'gamin:devel', 'imlib2:devel',
                      'libexif:devel', 'libgphoto2:devel', 'libkexif:devel',
                      'libkipi:devel', 'libtiff:devel', 'sqlite:devel' ]

    def unpack(r):

        r.macros.site = 'http://switch.dl.sourceforge.net/sourceforge'
        r.addArchive('%(site)s/%(name)s/%(name)s-%(version)s.tar.bz2')

        r.MakeDirs('%(kdehtmldir)s/en')
        r.Replace('if test -n "\$PREFIX" && test ! -d "\$PREFIX" ; then',
                  'if test -n "$PREFIX" && test ! -d "%(destdir)s/$PREFIX" ; then',
                  'admin/doxygen.sh')

    def postInstall(r):

        r.Make('apidox')
        r.MakeInstall(installtarget='install-apidox-recurse')

