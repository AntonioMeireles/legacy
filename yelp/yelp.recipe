#
# Copyright (c) 2007 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage')
class Yelp(GnomePackageRecipe):

    name = 'yelp'
    version = '2.18.1'

    buildRequires = ['GConf:devel', 'GConf:runtime', 'ORBit2:devel',
                     'beagle:devel', 'bzip2:devel', 'desktop-file-utils:runtime',
                     'gnome-doc-utils:runtime', 'gnome-icon-theme:data',
                     'gnome-keyring:devel', 'gnome-vfs:devel', 'gtk:config',
                     'libart_lgpl:devel', 'libbonobo:devel', 'libbonoboui:devel',
                     'libgcrypt:devel', 'libglade:devel', 'libgnome:devel', 
                     'libgnomecanvas:devel', 'libgnomeui:devel', 'libgpg-error:devel',
                     'libstdc++:devel', 'libxslt:devel', 'nspr:devel', 'popt:devel', 
                     'startup-notification:devel', 'xulrunner:devel', 'gnome-doc-utils:devel', 'gnome-doc-utils:runtime', ]


    # correct include paths 
    extraConfig = ' --x-includes="/usr/include/X11" --x-libraries=/usr/lib/X11'
    # enable beagle
    #extraConfig += ' --with-search=beagle'
    # This should be recognized automatically:
    #extraConfig += ' --with-gecko=xulrunner '

    def unpack(r):
        GnomePackageRecipe.unpack(r)

	r.Replace('widget','widget nspr','src/Makefile.am')
        # Correct gnome-help.png
        r.Replace('gnome-help.png','/usr/share/icons/gnome/32x32/apps/gnome-help.png','yelp.desktop.in.in')

        #r.macros.optflags = '-g -Os'


