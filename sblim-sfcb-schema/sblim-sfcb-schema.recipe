#
# Copyright (c) 2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class SblimSfcbSchema(PackageRecipe):
    name = 'sblim-sfcb-schema'
    majver = '2.24.0'
    version = '%sExperimental' % majver

    buildRequires = [
        'unzip:runtime',
    ]

    cimSchema = "cim_schema_%(version)s-MOFs.zip"
    cimSchemaUrlBase = "http://www.dmtf.org/standards/cim/cim_schema_v%s/" % \
        majver.replace(".", "")
    cimSchemaUrl = cimSchemaUrlBase + cimSchema
    cimSchemaMof = "cim_schema_%s.mof" % majver

    def setup(r):
        r.macros.cimSchema = r.cimSchema
        r.macros.cimSchemaMof = r.cimSchemaMof
        r.addArchive(r.cimSchemaUrl, dir = "%(datadir)s/sfcb/CIM/")
        r.Move("%(datadir)s/sfcb/CIM/%(cimSchemaMof)s",
               "%(datadir)s/sfcb/CIM/CIM_Schema.mof")
