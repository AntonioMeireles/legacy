#
# Copyright (c) 2005 North Carolina State University
# Copyright (c) 2006-2007 rPath Inc
# Written by Andrew Brown <ambrown4@ncsu.edu>
# Modified by Elliot Peele <elliot@rpath.com>
#

class NagiosPlugins(AutoPackageRecipe):
    name = 'nagios-plugins'
    version = '1.4.10'

    buildRequires = [ 'bind-utils:runtime', 'iputils:runtime',
                      'net-snmp-utils:runtime', 'net-tools:runtime',
                      'ntp:runtime', 'openssh-client:runtime',
                      'openssl:runtime', 'perl:runtime', 'procps:runtime',
                      'samba:runtime', 'sendmail:runtime', 'mysql:devel',
                      'postgresql:devel' ]

    def unpack(r):
        r.addArchive('mirror://sourceforge/nagiosplug/')
        # CVE-2007-5198
        r.addPatch('https://sourceforge.net/tracker/download.php?group_id=29880&atid=397597&file_id=250217&aid=1815362')
        # CVE-2007-5623
        r.addPatch('http://sourceforge.net/tracker/download.php?group_id=29880&atid=397597&file_id=249657&aid=1813346')


    def make(r):
        r.Make('all')
