#
# Copyright (c) 2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class QLAFirmware(PackageRecipe):
    name = 'qla-firmware'
    version = '20070416'

    def setup(r):
        r.macros.fwdir = '/lib/firmware'
        r.macros.ftpurl = 'ftp://ftp.qlogic.com/outgoing/linux/firmware'
        contents = ''
        for fw in ('ql2100_fw.bin', 'ql2200_fw.bin', 'ql2300_fw.bin',
                   'ql2322_fw.bin', 'ql2400_fw.bin'):
            r.addSource('%%(ftpurl)s/%s' % fw, dest='%(fwdir)s/')
            contents += fw + '\n'
        r.addSource('%(ftpurl)s/LICENSE', dest='%(thisdocdir)s/')
        r.Create('%(sysconfdir)s/mkinitrd-firmware.d/qla2xxx',
                 contents=contents)
