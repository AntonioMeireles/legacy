

class GSPCAv1Kernel(AutoPackageRecipe):
    name = 'gspcav1-kernel'
    version =  '20071224'

    buildRequires = [ 'kernel:build-tree', 'mkinitrd:runtime']

    def setup(r):
        r.macros.kver = os.uname()[2]
        r.addArchive('http://mxhaard.free.fr/spca50x/Download/gspcav1-%(version)s.tar.gz')
        r.Replace('`uname -r`', '%(kver)s', 'Makefile')

	r.Make()
        r.Install('gspca.ko', '/lib/modules/%(kver)s/kernel/drivers/usb/media/', mode = 0644)
        r.AutoDoc(exceptions = '.*')

