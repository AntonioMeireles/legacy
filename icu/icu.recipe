#
# Copyright (c) 2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#
#

class ICU(CPackageRecipe):

    name = 'icu'
    version = '3.8'

    buildRequires = [
        'libstdc++:devel', 'unzip:runtime', 'perl:runtime'
    ]

    def setup(r):
        r.disableParallelMake()
        r.macros.site = 'http://download.icu-project.org/files/icu4c/%(version)s'
        r.macros.version_ = r.version.replace('.', '_')

        r.addArchive('%(site)s/%(name)s4c-%(version_)s-src.tgz')

        r.addArchive('%(site)s/%(name)s4c-%(version_)s-docs.zip', dir='icu/docs')
        r.addArchive('%(site)s/%(name)s-%(version_)s-userguide.zip', dir='icu/userguide')

        r.Configure('--enable-samples=no --enable-tests=no', dir='source')
        r.Make(dir='source')
        r.MakeInstall(dir='source')
        r.Move('%(sbindir)s/*', '%(bindir)s/')

        r.AutoDoc(exceptions='/.+/')

        r.Doc('*.html')
        r.Doc('docs/html/*', dir='docs')
        r.Doc('userguide/html/*', dir='userguide')

        r.DanglingSymlinks(exceptions='%(libdir)s/icu/Makefile.inc')

