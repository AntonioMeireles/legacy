--- apr-util-0.9.7/strmatch/apr_strmatch.c	2005-02-04 15:39:09.000000000 -0500
+++ apr-util-0.9.7/strmatch/apr_strmatch.c	2009-11-03 16:36:06.000000000 -0500
@@ -74,7 +74,7 @@
             }
             s_tmp--;
         }
-        s_next += shift[apr_tolower(*s_next)];
+        s_next += shift[(unsigned char)apr_tolower(*s_next)];
     }
     return NULL;
 }
@@ -103,13 +103,13 @@
     if (case_sensitive) {
         pattern->compare = match_boyer_moore_horspool;
         for (i = 0; i < pattern->length - 1; i++) {
-            shift[(int)s[i]] = pattern->length - i - 1;
+            shift[(unsigned char)s[i]] = pattern->length - i - 1;
         }
     }
     else {
         pattern->compare = match_boyer_moore_horspool_nocase;
         for (i = 0; i < pattern->length - 1; i++) {
-            shift[apr_tolower(s[i])] = pattern->length - i - 1;
+            shift[(unsigned char)apr_tolower(s[i])] = pattern->length - i - 1;
         }
     }
     pattern->context = shift;
