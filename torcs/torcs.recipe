class Torcs(CPackageRecipe):
    name = "torcs"
    version = "1.2.4"
    buildRequires =  [ 'freeglut:devel', 'gcc:devel', 'libpng:devel',
                       'openal:devel', 'xorg-x11:devel', 'zlib:devel',
                       'gcc:devel', 'desktop-file-utils:runtime' ]

    def setup(r):
        r.addArchive('http://puzzle.dl.sourceforge.net/sourceforge/%(name)s/%(name)s-%(version)s.tar.bz2')
        r.addSource('torcs.desktop')
        r.addSource('torcs.png')
        r.Desktopfile ('torcs.desktop')
        r.Install('torcs.png','%(datadir)s/pixmaps/torcs.png')
        r.Configure()
        r.Make()
        r.MakeInstall()
        r.Make("datainstall", preMake='DESTDIR=%(destdir)s')

        for lib in [ 'libclient.so', 'libconfscreens.so', 'liblearning.so',
                     'libraceengine.so', 'libracescreens.so',
                     'librobottools.so', 'libtgf.so', 'libtgfclient.so',
                     'libtxml.so' ]:
            r.Provides('soname:' + lib, '%(libdir)s/torcs/lib/' + lib)
