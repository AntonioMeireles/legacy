#
# Copyright (c) 2010 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class udns(CPackageRecipe):
    name = 'udns'
    version = '0.0.9'

    def setup(r):
        r.addArchive('http://www.corpit.ru/mjt/udns/%(name)s_%(version)s.tar.gz')
        r.Run('./configure --enable-ipv6')
        r.Make('shared')
        # make shared will (quite unnecessarily) append a _s to everything
        for binname in ['rblcheck', 'dnsget']:
            r.Install(binname + '_s', '%(bindir)s/' + binname)
            r.Install(binname + '.1', '%(mandir)s/')
        r.Install('udns.h', '%(includedir)s/')
        r.Install('udns.3', '%(mandir)s/')
        r.Install('libudns.so.0', '%(libdir)s/')
        r.Symlink('libudns.so.0', '%(libdir)s/libudns.so')
