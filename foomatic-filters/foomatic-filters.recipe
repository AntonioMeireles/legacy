#
# Copyright (c) 2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class FoomaticFilters(AutoPackageRecipe):

    name = 'foomatic-filters'
    version = '3.0.2'

    buildRequires = [ 'cups:devel', 'a2ps:runtime', 'autoconf:runtime',
                      'enscript:runtime', 'file:runtime' ]

    def unpack(r):
        r.addArchive('http://www.linuxprinting.org/download/foomatic/%(name)s-%(version)s.tar.gz')
        r.addPatch('foomatic-filters-3.0.2-multilib.patch', level=0)

        r.Run('autoconf')

    def policy(r):
        r.Move('%(sysconfdir)s/foomatic/filter.conf.sample', '%(thisdocdir)s/')
        r.Symlink('%(bindir)s/foomatic-gswrapper', '%(libdir)s/cups/filter/')
        r.Symlink('%(bindir)s/foomatic-rip',
                  '%(libdir)s/cups/filter/cupsomatic')
        r.Symlink('%(bindir)s/foomatic-rip', '%(bindir)s/lpdomatic')
