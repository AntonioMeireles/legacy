#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Zip(CPackageRecipe):
    name = 'zip'
    version = '2.32'

    def setup(r):
        r.macros.zip_archive_version = r.version.replace('.', '')
        r.addArchive('ftp://ftp.info-zip.org/pub/infozip/src/zip%(zip_archive_version)s.tar.gz')

        r.ManualConfigure(dir='unix')
        r.Make('-f unix/Makefile generic_gcc')
        r.MakeDirs('%(bindir)s', '%(mandir)s/man1')
        r.Make('prefix=%(destdir)s/%(prefix)s'
               ' BINDIR=%(destdir)s/%(bindir)s/'
               ' MANDIR=%(destdir)s/%(mandir)s/man1'
               ' INSTALL=/usr/bin/install -f unix/Makefile install')

        r.SetModes('%(bindir)s/*', 0755)
        r.AutoDoc('WHATSNEW', 'WHERE', 'proginfo/algorith.txt')
