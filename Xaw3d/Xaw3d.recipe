#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#
# Does not build the compatibility versions of the libraries on
# Arch.x86; for now, we'll see what demand there is for the old
# compatible libraries.

class Xaw3d(CPackageRecipe):
    name = 'Xaw3d'
    version = '1.5E'

    buildRequires = [ 'imake:runtime', 'bison:runtime', 'gccmakedep:runtime',
                      'bison:devellib', 'flex:runtime', 'flex:devel',
                      'libICE:devel', 'libSM:devel', 'libX11:devel',
                      'libXext:devel', 'libXmu:devel',
                      'libXpm:devel', 'libXt:devel', ]

    def setup(r):
        r.addArchive('ftp://ftp.visi.com/users/hawkeyd/X/')

        r.addPatch('Xaw3d-1.5E-xorg-imake.patch', dir='lib/Xaw3d')

        r.Run('''
                cd lib/Xaw3d
                ln -s .. X11
                xmkmf -a
                make CDEBUGFLAGS="%(cflags)s -DARROW_SCROLLBAR" ''')

        r.MakeInstall(dir='lib/Xaw3d')
        r.ComponentSpec('devel', '%(includedir)s/X11/Xaw3d/Template.c')
