

class USBmodeSwitch(CPackageRecipe):
    name = 'usb_modeswitch'
    version = '1.1.7'

    buildRequires = ['libusb:devel']

    def setup(r):
        r.addArchive('http://www.draisberghof.de/usb_modeswitch/usb-modeswitch-%(version)s.tar.bz2')
        r.addPatch('usb_modeswitch-dir.patch')
        r.Make()

        r.Install('usb_modeswitch', '%(sbindir)s/', mode = 0755)
        r.Install('usb_modeswitch.conf', '%(sysconfdir)s/', mode = 0644)
        r.Install('usb_modeswitch.1', '%(datadir)s/man/man1/', mode = 0644)
        r.Install('usb_modeswitch.tcl', '/lib/udev/usb_modeswitch', mode = 0755)

        r.Doc('device_reference.txt')
        r.Requires('usb_modeswitch-data:data', '%(sbindir)s/%(name)s')
