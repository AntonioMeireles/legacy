#
# Copyright (c) 2005-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class LibSndFile(AutoPackageRecipe):
    name = 'libsndfile'
    version = '1.0.17'
    buildRequires = [ 'alsa-lib:devel', 'flac:devel', 'pkgconfig:devel',
        'sqlite:devel' ]

    def unpack(r):
        r.addArchive('http://www.mega-nerd.com/%(name)s/')

    def configure(r):
        # FIXME: doesn't compile against newer flac
        r.Configure('--disable-flac')

    def policy(r):
        r.Move('%(docdir)s/libsndfile1-dev', '%(thisdocdir)s')

        # runtime doesn't require octave modules, so :octave instead of :data
        r.ComponentSpec('octave', '%(datadir)s/octave/site/')
