------------------------------------------------------------------------
r945017 | dfaure | 2009-03-26 20:51:09 +0300 (Thu, 26 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kdecore/tests/kmimetypetest.cpp

Backport unittest, just in case. Passes here.

------------------------------------------------------------------------
r945019 | dfaure | 2009-03-26 20:57:27 +0300 (Thu, 26 Mar 2009) | 4 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kioslave/http/kcookiejar/kcookiejar.h
   M /branches/KDE/4.2/kdelibs/kioslave/http/kcookiejar/kcookieserver.cpp
   M /branches/KDE/4.2/kdelibs/kioslave/http/kcookiejar/kcookiewin.cpp

My previous patch assumed "Only accept this cookie". But the text can actually say "Only accept these cookies", if N are shown in the dialog;
so make the code actually do that -- accept all the cookies that were shown, and not other cookies that might have come in from the same host
while the dialog was up.

------------------------------------------------------------------------
r945023 | dfaure | 2009-03-26 21:03:09 +0300 (Thu, 26 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kdecore/tests/ktcpsockettest.cpp

Backport r938717: You can't assume that the webserver is sending you 1KB upfront. Sometimes yes, sometimes no...

------------------------------------------------------------------------
r945025 | dfaure | 2009-03-26 21:07:06 +0300 (Thu, 26 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kdeui/kernel/kglobalsettings.cpp

Backport fix for kglobalsettingstest

------------------------------------------------------------------------
r945028 | dfaure | 2009-03-26 21:08:51 +0300 (Thu, 26 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kdeui/tests/ktextedit_unittest.cpp

Backport r915764 by skelly: disable invalid unittests.

------------------------------------------------------------------------
r945034 | dfaure | 2009-03-26 21:26:53 +0300 (Thu, 26 Mar 2009) | 4 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kio/kio/copyjob.cpp
   M /branches/KDE/4.2/kdelibs/kio/kio/kdirlister.cpp
   M /branches/KDE/4.2/kdelibs/kio/kio/kdirmodel.cpp
   M /branches/KDE/4.2/kdelibs/kio/tests/kdirmodeltest.cpp
   M /branches/KDE/4.2/kdelibs/kio/tests/kdirmodeltest.h
   M /branches/KDE/4.2/kdelibs/kio/tests/kiotesthelper.h

Fix crash in kdirmodeltest by backporting the actual fixes for it:
r927192: Fix non-working (and/or crashing) overwriting of a file (or symlink) with a directory. (BUG 151851)
r925530: Fix the fix for #164185: comparing mimetype pointers doesn't work (they always differ), compare their names instead.

------------------------------------------------------------------------
r945035 | dfaure | 2009-03-26 21:30:41 +0300 (Thu, 26 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/nepomuk/core/test/CMakeLists.txt

like in trunk: disable non-working unittest.

------------------------------------------------------------------------
r945181 | porten | 2009-03-27 06:16:53 +0300 (Fri, 27 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kjs/date_object.cpp

Make the date string 'Mon Nov 24 04:25:03 -0800 2008' from bug #176511 parsable. Ugly.

------------------------------------------------------------------------
r945316 | zwabel | 2009-03-27 12:25:26 +0300 (Fri, 27 Mar 2009) | 1 line
Changed paths:
   M /branches/KDE/4.2/kdelibs/kate/completion/expandingtree/expandingdelegate.cpp

Backport r945314: Workaround a bug in the Qt 4.5 raster paint engine
------------------------------------------------------------------------
r945358 | mlaurent | 2009-03-27 13:44:54 +0300 (Fri, 27 Mar 2009) | 3 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kdeui/widgets/ktextedit.cpp

Backport:
When we cancel spellchecking we don't want to remove all html formatting

------------------------------------------------------------------------
r945526 | orlovich | 2009-03-27 19:01:03 +0300 (Fri, 27 Mar 2009) | 8 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/khtml/misc/htmlnames.cpp

Properly handle re-creation of KHTMLGlobal --- don't drop the old ID table.
Fixes crashes on exit when this occurs.

Dirk, any chance this could still be rolled into 4.2.2?

CCMAIL:dirk@kde.org
BUG:187853

------------------------------------------------------------------------
r945532 | orlovich | 2009-03-27 19:39:41 +0300 (Fri, 27 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/khtml/imload/image.cpp

Erk, shouldn't be here. Thanks vtokarev.

------------------------------------------------------------------------
r945545 | darioandres | 2009-03-27 20:19:05 +0300 (Fri, 27 Mar 2009) | 7 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kio/kio/global.cpp

Backport to 4.2branch of:
SVN commit 945542 by darioandres:

Rename KDE Control Center -> SystemSettings on timeout message

CCBUG: 188098

------------------------------------------------------------------------
r945549 | darioandres | 2009-03-27 20:29:21 +0300 (Fri, 27 Mar 2009) | 4 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kio/kio/global.cpp

Reverting commit 945545 as it is not allowed because of stringfreeze

CCBUG: 188098

------------------------------------------------------------------------
r945604 | zwabel | 2009-03-27 22:39:49 +0300 (Fri, 27 Mar 2009) | 1 line
Changed paths:
   M /branches/KDE/4.2/kdelibs/kate/completion/katecompletiontree.cpp
   M /branches/KDE/4.2/kdelibs/kate/completion/katecompletiontree.h
   M /branches/KDE/4.2/kdelibs/kate/completion/katecompletionwidget.cpp

Backport: Workaround: Don't crash in the Qt 4.5 raster engine when adapting the height of the completion widget
------------------------------------------------------------------------
r945667 | ggarand | 2009-03-28 01:29:31 +0300 (Sat, 28 Mar 2009) | 3 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/khtml/rendering/render_form.cpp

automatically merged revision 945661:
enable the clear button on lineedits, provided their are not
excessively styled (no background-image, no custom border.)
------------------------------------------------------------------------
r945668 | ggarand | 2009-03-28 01:30:10 +0300 (Sat, 28 Mar 2009) | 5 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/khtml/find/khtmlfind.cpp

automatically merged revision 945662:
remove wrong assert, triggered by the '/', gui-less find-as-you-type
feature.

BUG: 188276
------------------------------------------------------------------------
r945669 | ggarand | 2009-03-28 01:31:33 +0300 (Sat, 28 Mar 2009) | 5 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/khtml/misc/loader.cpp
   M /branches/KDE/4.2/kdelibs/khtml/misc/paintbuffer.h
   M /branches/KDE/4.2/kdelibs/khtml/rendering/render_object.cpp
   M /branches/KDE/4.2/kdelibs/khtml/xml/dom_selection.cpp

automatically merged revision 945663:
it seems we go through ill-known, transitory states where Qt painters are
inactivated, thus returning null paintEngine(). That's no reason to crash.

(spotted by SadEagle on some dpaste.com page)
------------------------------------------------------------------------
r945699 | dfaure | 2009-03-28 03:17:34 +0300 (Sat, 28 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kio/kio/krun.cpp
   M /branches/KDE/4.2/kdelibs/kio/tests/kruntest.cpp

Backport crashfix r945698.

------------------------------------------------------------------------
r945869 | chehrlic | 2009-03-28 16:27:00 +0300 (Sat, 28 Mar 2009) | 1 line
Changed paths:
   M /branches/KDE/4.2/kdelibs/kdecore/kernel/kkernel_win.cpp
   M /branches/KDE/4.2/kdelibs/kioslave/file/file_win.cpp

win32 compile++, make it work on w2k again
------------------------------------------------------------------------
r945888 | cfeck | 2009-03-28 17:12:53 +0300 (Sat, 28 Mar 2009) | 4 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kdeui/icons/kiconeffect.cpp

backport r945882

CCBUG: 165460

------------------------------------------------------------------------
r946095 | ossi | 2009-03-28 20:11:34 +0300 (Sat, 28 Mar 2009) | 2 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/kdecore/config/kconfigdata.h
   M /branches/KDE/4.2/kdelibs/kdecore/tests/kconfigtest.cpp
   M /branches/KDE/4.2/kdelibs/kdecore/tests/kconfigtest.h

backport: don't dirty the config when overwriting with same value, take 2

------------------------------------------------------------------------
r946162 | orlovich | 2009-03-28 22:37:49 +0300 (Sat, 28 Mar 2009) | 14 lines
Changed paths:
   M /branches/KDE/4.2/kdelibs/khtml/rendering/font.cpp
   M /branches/KDE/4.2/kdelibs/khtml/rendering/font.h
   M /branches/KDE/4.2/kdelibs/khtml/rendering/render_object.cpp
   M /branches/KDE/4.2/kdelibs/khtml/rendering/render_style.cpp
   M /branches/KDE/4.2/kdelibs/khtml/rendering/render_style.h

/Enormous/ speedup for rendering speed of large/text-heavy documents
- takes /half/ the time as before this on the test files I have -
e.g. some French dictionary file from Spart now loads in 12 seconds,
while it used to take 24 (and 26 in 4.2.1); rendering of MySQL
reference doc html takes 8 seconds and not 16.

Note: results are likely to be less significant on other sorts of workloads.

This change works by caching width information for fonts in a sparse 2-level
tree, avoiding /insanely/ expensive costs of doing that via Qt (testing
was done with Qt4.5, optimized build). Also a slight shrinkage to
InheritedStyleData, but probably not enough to matter.


------------------------------------------------------------------------
