#
# Copyright (c) 2006 rPath, Inc.
# All rights reserved
#

loadInstalled('python')
class JiraRecipe(BuildPackageRecipe):
    name = 'jiranemo'
    version = '0.2.1'

    buildRequires = [
        'python:devel',
        'SOAPpy:python',
    ]

    def setup(r):
        r.macros.archive_name = 'Django'
        r.macros.pyver = Python.majversion
        r.macros.sitepkgs = '%(libdir)s/python%(pyver)s/site-packages'

        r.addMercurialSnapshot('http://hg.rpath.com/jiranemo/')
        r.Make('libdir=%(libdir)s')
        r.MakeInstall('libdir=%(libdir)s')
        r.Move('%(libdir)s/python/site-packages/%(name)s',
           '%(sitepkgs)s/')

        r.Move('%(libdir)s/python/site-packages/pyjira',
           '%(sitepkgs)s/')

        r.PackageSpec('pyjira', '.*/pyjira/')
