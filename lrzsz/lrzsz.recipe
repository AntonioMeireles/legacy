#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpmpackage')
class Lrzsz(RPMPackageRecipe, CPackageRecipe):
    name = 'lrzsz'
    version = '0.12.20'

    buildRequires = [ 'gettext:runtime' ]

    def setup(r):
        r.addArchive('http://www.ohse.de/uwe/releases/lrzsz-%(version)s.tar.gz')
        srpm = 'http://download.fedora.redhat.com/pub/fedora/linux/core/development/source/SRPMS/lrzsz-0.12.20-22.1.src.rpm'
        for patch in ('lrzsz-0.12.20-glibc21.patch',
                      'lrzsz-0.12.20.patch'):
             r.addPatch(patch, rpm=srpm)

        r.Configure('--disable-pubdir --enable-syslog'
                    ' --program-transform-name=s/l//')
        r.Make()

        r.MakePathsInstall()
