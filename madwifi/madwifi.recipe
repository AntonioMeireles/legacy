# Copyright (c) 2004 Elliot Peele <elliot@bentlogic.net> and contributors
# Modified by Cesar Cardoso <cesar@zyakannazio.eti.br>
# Thanks to elliot and dugan for the macros
#

class madWiFi(PackageRecipe):

    name = 'madwifi'
    version = '2005_08_09'

    buildRequires = ['kernel','sharutils']

    def setup(r):
        r.macros.kver = os.uname()[2]
        r.macros.arch = os.uname()[4]
        r.macros.ksrcdir = '/lib/modules/%(kver)s/build'
        r.macros.cvsVer = r.version.replace('_', '-')
        year, month, day = r.version.split('_')
        r.macros.year = year
        r.macros.month = month

        r.addArchive('http://madwifi.otaku42.de/%(year)s/%(month)s/%(name)s-cvs-snapshot-%(cvsVer)s.tar.bz2')

        r.Make('KERNELPATH=%(ksrcdir)s')
        r.MakeInstall('KERNELPATH=%(ksrcdir)s')
