--- chkconfig-1.3.32/chkconfig.c.orig	2008-04-01 15:26:49.000000000 +0300
+++ chkconfig-1.3.32/chkconfig.c	2008-04-01 17:45:16.000000000 +0300
@@ -267,6 +267,13 @@ static int overrideService(char * name) 
 	
     if (s.type == TYPE_XINETD) return 0;
 
+//    We only use s.levels below, so we don't need to waste time
+//    if (s.isLSB && (s.sPriority <= -1) && (s.kPriority <= -1))
+//		frobDependencies(&s);
+    // Do it just like in addService
+    if (o.isLSB)
+		frobDependencies(&o);
+
     if ((s.levels == o.levels) &&
         (s.kPriority == o.kPriority) &&
         (s.sPriority == o.sPriority)) {
@@ -274,11 +281,6 @@ static int overrideService(char * name) 
 	return 0;
     }
 
-    if (s.isLSB && (s.sPriority <= -1) && (s.kPriority <= -1))
-		frobDependencies(&s);
-    if ((s.isLSB || o.isLSB) && (o.sPriority <= -1) && (o.kPriority <= -1))
-		frobDependencies(&o);
-
     /* Apply overrides only if the service has not been changed since
      * being added, and not if the service has never been configured
      * at all.
@@ -289,16 +291,10 @@ static int overrideService(char * name) 
         thisLevelOn = s.levels & 1<<level;
         if (thisLevelAdded) {
             configured = 1;
-            if (type == 'S') {
-                if (priority != s.sPriority || !thisLevelOn) {
-                    doChange = 0;
-                    break;
-                }
-            } else if (type == 'K') {
-                if (priority != s.kPriority || thisLevelOn) {
-                    doChange = 0;
-                    break;
-                }
+            if ((type == 'S' && !thisLevelOn) ||
+                (type == 'K' && thisLevelOn)) {
+                doChange = 0;
+                break;
             }
 	}
     }
