#
# Copyright (c) 2007 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('gnomepackage.recipe', label='foresight.rpath.org@fl:1-devel')
class NetworkManagerApplet(GnomePackageRecipe):

    name = 'network-manager-applet'
    version = '0.6.5'

    buildRequires = ['GConf:devel', 'NetworkManager:devel', 'ORBit2:devel', 'gnome-keyring:devel', 'gnome-vfs:devel', 'libart_lgpl:devel', 'libbonobo:devel', 'libbonoboui:devel', 'libglade:devel', 'libgnome:devel', 'libgnomecanvas:devel', 'libgnomeui:devel', 'libnotify:devel', 'popt:devel', 'wireless-tools:devel', 'dbus:devel', 'dbus-glib:devellib', 'pango:devel']

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.addPatch('http://archive.ubuntu.com/ubuntu/pool/main/n/network-manager-applet/network-manager-applet_0.6.5-0ubuntu6.diff.gz')
        r.Replace('\"gksu\",','','debian/patches/01_static_network-admin.patch')
        for patch in [
            '01_fix_keyring_crash.patch',
            '01_static_network-admin.patch',
            '02_manual_means_always_online.diff',
            '03_manual_config_available_when_connected.patch',
            '10-po_fr.patch',
        ]:
            r.Run(""" patch -p1 < debian/patches/%s """ % patch)

