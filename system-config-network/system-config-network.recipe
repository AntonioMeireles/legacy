#
# Copyright (c) 2005 Specifix, Inc.
# All rights reserved
#

class SystemConfigNetwork(PackageRecipe):
    buildRequires = [ 'desktop-file-utils:runtime', 'intltool:runtime' ]
    name = "system-config-network"
    version = "1.3.29"

    def setup(r):
        r.addArchive('%(name)s-%(version)s.tar.gz',
            rpm='ftp://ftp.linux.ncsu.edu/pub/fedora/linux/core/development/SRPMS/%(name)s-%(version)s-1.src.rpm')

        r.Replace('Exec=','Exec=gksudo ','neat.desktop.in')
        r.Replace('Categories=Application;SystemSetup;','Categories=Application;System;Settings','neat.desktop.in')
        r.Replace('Exec=','Exec=gksudo ','neat-control.desktop.in')
        r.Replace('Categories=Application;Internet;System;','Categories=Application;System;Settings','neat-control.desktop.in')
        r.Replace('Exec=','Exec=gksudo ','internet-druid.desktop.in')
        r.Replace('Categories=Application;Internet;System;','Categories=Application;System;Settings','internet-druid.desktop.in')

        r.Configure()
        r.Make()
        r.MakeInstall()
        for desktopfile in ('neat.desktop', 'internet-druid.desktop', 'neat-control.desktop'):
            r.Desktopfile(desktopfile)

        r.Requires('rhpl:python', '%(bindir)s/system-config-network')
        r.Requires('pygtk:python', '%(bindir)s/system-config-network')
        r.Requires('gnome-python:python', '%(bindir)s/system-config-network')

	r.Remove('%(destdir)s%(datadir)s/applications/net-neat.desktop')
	r.Remove('%(destdir)s%(datadir)s/applications/net-neat-control.desktop')
	r.Remove('%(destdir)s%(datadir)s/applications/net-internet-druid.desktop')
