#
# Copyright (c) 2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class BroadcomWl(AutoPackageRecipe):
    name = 'broadcom-wl'
    version =  '5.10.91.9.3'

    def setup(r):
        r.macros.version = r.version.replace('.', '_')
        r.Create('%(sysconfdir)s/modprobe.d/%(name)s-blacklist', 
                 contents = """
# modules blacklisted for broadcom-wl
blacklist bcm43xx
blacklist ssb
blacklist b43
blacklist ndiswrapper

""", mode = 0644, component = 'runtime')
        

        # We want to make sure that the userspace code can require the
        # matching kernel-space code
        r.ComponentProvides('%(version)s')
        r.ComponentSpec('runtime', '/lib/modules/')

        # The kernel side is in %(name)s-kernel,
        r.Requires('%(name)s-kmod:runtime', 
                   '%(sysconfdir)s/modprobe.d/%(name)s-blacklist')
