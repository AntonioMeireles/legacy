#
# Copyright (c) 2004 Specifix, Inc.
# All rights reserved
#

class SystemConfigSecurityLevel(PackageRecipe):
    buildRequires = [ 'desktop-file-utils:runtime', 'intltool:runtime',
        'newt:devel', 'slang:devel', 'popt:devel' ]
    name = "system-config-securitylevel"
    version = "1.4.22"

    def setup(r):
        r.addArchive('%(name)s-%(version)s.tar.bz2',
            #rpm='ftp://ftp.linux.ncsu.edu/pub/fedora/linux/core/3/SRPMS/%(name)s-%(version)s-1.src.rpm')
	    rpm='http://mirrors.usc.edu/pub/linux/distributions/fedora/development/SRPMS/system-config-securitylevel-1.4.22-1.src.rpm')

        # we do not implement selinux
        r.addPatch('de-selinuxize.patch', backup='.sel')
        r.Remove('src/{tunable.xml,selinuxPage.py}')
        r.Replace('RPM_BUILD_ROOT', 'INSTROOT', 'po/Makefile')
        r.Replace('python2', 'python', 'src/system-config-securitylevel{,.py}')
        r.Replace('Exec=','Exec=gksudo ','system-config-securitylevel.desktop.in')
        r.Replace('Categories=Application;SystemSetup','Categories=Application;System;Settings','system-config-securitylevel.desktop.in')
        r.Make()
        r.MakeInstall(rootVar='INSTROOT')
        r.Requires('rhpl:python', '%(bindir)s/system-config-securitylevel')
        r.Requires('pygtk:python', '%(bindir)s/system-config-securitylevel')
