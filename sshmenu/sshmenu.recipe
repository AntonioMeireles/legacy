# Copyright (c) 2007-2010 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage')
class sshMenu(GnomePackageRecipe):
    name = 'sshmenu'
    version = '3.18'
    patches = [ 'sshmenu-3.18-libexec.patch',
                ]

    buildRequires = [ 'ruby:runtime'  ]

    externalArchive = 'mirror://sourceforge/sshmenu/'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.disableParallelMake()
        r.Replace('LIB\ \ \ \=\ \$\(DESTDIR\)/usr/lib', 'LIB   = $(DESTDIR)%(libdir)s', 'Makefile')

    def build(r):
        r.Requires('x11-ssh-askpass:runtime', '%(bindir)s/.*')
        r.Requires('ruby-gnome2:runtime', '%(bindir)s/.*')

