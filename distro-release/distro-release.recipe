#
# Copyright (c) 2004 Specifix, Inc.
# All rights reserved
#

class DistroRelease(PackageRecipe):
    name = 'distro-release'
    version = '0.9.4.pre1'
    
    def setup(r):
        release = "Foresight Desktop Linux release %(version)s (Beta)" %r.macros
        issue = release + '\nKernel \\r on an \\m\n'

        r.Create('%(sysconfdir)s/distro-release', contents=release)
        r.Create('%(sysconfdir)s/issue', contents=issue + '\n')
        r.Create('%(sysconfdir)s/issue.net', contents=issue)
	r.addArchive('tags.tgz', dir='/')
        # Distributions can set configuration values for arches
        # and use flags here by defining them below in /etc/conary/distro/arch
        # and /etc/conary/distro/use.  

        # XXX turn off dietlibc for other architectures that x86.
        # XXX Ideally, this would be done in conary's default use flag values
        if not Arch.x86:
            r.Create('/etc/conary/distro/use/dietlibc', 
                     contents='sense disallowed\n')

	# Add a system wide default gtkrc
	r.addSource('gtkrc')
	r.Install('gtkrc','%(sysconfdir)s/gtk-2.0/gtkrc')
	r.addSource('foresight.conaryrc')
	r.Install('foresight.conaryrc','%(sysconfdir)s/conary/conf.d/foresight')
