
loadSuperClass('gnomepackage')
loadSuperClass('rpmpackage')
class GstPluginsGood(RPMPackageRecipe,GnomePackageRecipe):

    buildRequires = [ 'GConf:devel', 'ORBit2:devel', 'audiofile:devel',
        'cairo:devel', 'esound:devel', 'flac:devel', 'fontconfig:devel',
        'freetype:devel', 'glib:devel', 'gst-plugins-base:devel',
        'gstreamer:devel', 'libdv:devel', 'libjpeg:devel', 'liboil:devel',
        'libpng:devel', 'libxml2:devel', 'speex:devel', 'atk:devel',
        'dbus:devel', 'hal:devel', 'pango:devel', 'GConf:runtime',
        'gcc-c++:runtime', 'gstreamer:runtime', 'libavc1394:devel',
        'libraw1394:devel', 'libstdc++:devel', 'taglib:devel',
        'libXdamage:devel', 'libXfixes:devel', 'glib:devel', 'glib:runtime' ]

    name = 'gst-plugins-good'
    version = '0.10.10'
    rpmRelease = '2.fc10'
    rpmName = 'gstreamer-plugins-good'
    
    extraConfig = ' --disable-gtkdoc --enable-experimental '
    # '--enable-ladspa' FIXME ?

    rpmPatches = [ 'gst-plugins-good-0.10.9-libv4l.patch',
                   ]

    def build(r):
        r.Configure('--enable-experimental --enable-ladspa '
                    ' --disable-esd --disable-libcaca --disable-aalib '
                    ' --with-default-visualizer=autoaudiosink')

        r.Make()
        r.Make(dir = 'ext/ladspa')
        r.MakeInstall()
        r.MakeInstall(dir = 'ext/ladspa')
        # Remove the monoscope viz, it's experimental, and might crash applications
        r.Remove('%(libdir)s/gstreamer-0.10}/libgstmonoscope.so')
