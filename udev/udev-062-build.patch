--- udev-062/udevd.c.foo	2005-07-08 22:25:46.000000000 -0400
+++ udev-062/udevd.c	2005-07-08 22:26:00.000000000 -0400
@@ -38,6 +38,9 @@
 #include <sys/un.h>
 #include <sys/sysinfo.h>
 #include <sys/stat.h>
+
+#define __u32 u_int32_t
+#define __u16 u_int16_t
 #include <linux/netlink.h>
 
 #include "list.h"
--- udev-062/Makefile.foo	2005-07-08 22:30:36.000000000 -0400
+++ udev-062/Makefile	2005-07-08 22:31:22.000000000 -0400
@@ -112,7 +112,7 @@
 CFLAGS		+= -D_GNU_SOURCE
 
 # use '-Os' optimization if available, else use -O2
-OPTFLAGS := $(call cc-supports, -Os, -O2)
+OPTFLAGS := %(cflags)s
 
 HEADERS = \
 	udev.h			\
@@ -159,15 +159,9 @@
 endif
 
 # if DEBUG is enabled, then we do not strip or optimize
-ifeq ($(strip $(DEBUG)),true)
-	CFLAGS  += -O1 -g -DDEBUG
-	LDFLAGS += -Wl
-	STRIPCMD = /bin/true -Since_we_are_debugging
-else
-	CFLAGS  += $(OPTFLAGS) -fomit-frame-pointer
-	LDFLAGS += -s -Wl
-	STRIPCMD = $(STRIP) -s --remove-section=.note --remove-section=.comment
-endif
+CFLAGS  += $(OPTFLAGS)
+LDFLAGS += -Wl
+STRIPCMD = /bin/true
 
 # If we are using our version of klibc, then we need to build, link it, and then
 # link udev against it statically. Otherwise, use glibc and link dynamically.
--- udev-062/Makefile.ff	2005-07-08 22:32:07.000000000 -0400
+++ udev-062/Makefile	2005-07-08 22:33:28.000000000 -0400
@@ -185,13 +185,8 @@
 	LDFLAGS += -static
 endif
 
-ifeq ($(strip $(V)),false)
-	QUIET=@$(PWD)/ccdv
-	HOST_PROGS=ccdv
-else
-	QUIET=
-	HOST_PROGS=
-endif
+QUIET=
+HOST_PROGS=
 
 # config files automatically generated
 GEN_CONFIGS =	$(LOCAL_CFG_DIR)/udev.conf
@@ -229,10 +224,6 @@
 # header files automatically generated
 GEN_HEADERS =	udev_version.h
 
-ccdv:
-	@echo "Building ccdv"
-	@$(HOSTCC) -O1 ccdv.c -o ccdv
-
 # Rules on how to create the generated header files
 udev_version.h:
 	@echo "Creating udev_version.h"
