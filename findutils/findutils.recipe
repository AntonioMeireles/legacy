#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Findutils(AutoPackageRecipe):
    name = 'findutils'
    version = '4.3.6'

    if not Use.bootstrap:
        # needs info-file tag description from the install-info package
        buildRequires = [ 'install-info:runtime' ]

    def unpack(r):
        r.addArchive('ftp://alpha.gnu.org/gnu/findutils/', keyid='13141C36')

        # locate has been replaced by slocate:runtime
        # cleaner to modify Makefile.am, but
        # that requires automake-1.9
        r.Replace(' locate ', ' ', 'Makefile.in')

    def make(r):
        r.Make('AR=%(target)s-ar')

    def policy(r):
        # RPL-1178 - not needed anymore
        r.RemoveNonPackageFiles('.*oldfind.*')
