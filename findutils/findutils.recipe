#
# Copyright (c) 2004-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Findutils(AutoPackageRecipe):
    name = 'findutils'
    version = '4.4.0'

    if not Use.bootstrap:
        # needs info-file tag description from the install-info package
        buildRequires = [ 'install-info:runtime' ]

    def unpack(r):
        r.addArchive('mirror://gnu/findutils/', keyid='13141C36')

        # we use "slocate" to provide this functionality
        r.Replace(' locate ', ' ', 'Makefile.in')

    def make(r):
        r.Make('AR=%(target)s-ar')

    def policy(r):
        # RPL-1178 - not needed anymore
        r.RemoveNonPackageFiles('.*oldfind.*')
