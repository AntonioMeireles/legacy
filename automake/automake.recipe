#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Automake(AutoPackageRecipe):
    name = 'automake'
    version = '1.10'

    buildRequires = [ 'perl:runtime', 'perl:lib', 'autoconf:runtime', ]

    srpm = 'ftp://ftp.redhat.com/redhat/linux/enterprise/5Server/en/os/SRPMS/automake-1.9.6-2.3.el5.src.rpm'

    def unpack(r):
        r.addArchive('mirror://gnu/automake/')
        #RPL-3222, CVE-2009-4029
        r.addPatch('automake-1.9.6-CVE-2009-4029.patch',rpm=r.srpm)

    def policy(r):
        r.Requires('m4:runtime', '%(bindir)s/*')
        r.TestSuite('/tests/')
        r.TagSpec('info-file', '%(infodir)s/automake.info.gz')
