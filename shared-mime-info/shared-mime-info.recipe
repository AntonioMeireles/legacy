#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class SharedMimeInfo(AutoPackageRecipe):
    name = 'shared-mime-info'
    version = '0.21'

    buildRequires = [ 'libxml2:devel', 'glib:devel',
                      'perl-XML-Parser:perl','pkgconfig:devel',
                      'zlib:devel', 'gettext:runtime', 'perl:runtime' ]

    def unpack(r):
        r.addArchive('http://freedesktop.org/~hadess/')
        r.addSource('mime-database.tagdescription', macros=True,
            dest='%(tagdescriptiondir)s/mime-database')
        r.addSource('mime-database.taghandler', macros=True, mode=0755,
            dest='%(taghandlerdir)s/mime-database')

    def configure(r):
        r.Configure('--disable-update-mimedb')

    def policy(r):
        r.Doc('shared-mime-info-spec.xml')
        r.Requires('/dev/null', '%(taghandlerdir)s/mime-database')
