#
# Copyright (c) 2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('cmakepackage')
class Quassel(CMakePackageRecipe):

    name = 'quassel'
    version = '0.3.0.1'

    buildRequires = [
        'libstdc++:devel', 'openssl:devel', 'phonon:devel', 'qt4:devel'
    ]

    def unpack(r):

        r.cmakeArgs += ' -DCMAKE_SKIP_RPATH=TRUE '

        r.addArchive('http://quassel-irc.org/pub/quassel-0.3.0.1.tar.bz2')

        r.addSource('quassel-client.desktop', dir='%(datadir)s/applications/')

    def makeinstall(r):

        for app in ('quasselclient',  'quasselcore'):
            r.Install(app, '%(bindir)s/')

        r.Install(
            'src/icons/quassel/128x128/apps/quassel.png',
            '%(datadir)s/icons/hicolor/128x128/apps/quassel.png'
        )

    def policy(r):

        r.Doc('dev-notes/*')
        r.AutoDoc(exceptions='/.+/')

        r.TagSpec('desktop-file', '%(datadir)s/applications/')
        r.TagSpec('gtk-update-icon-cache', '%(datadir)s/icons/')

