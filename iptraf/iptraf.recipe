class iptraf(CPackageRecipe):

    name = 'iptraf'
    version = '3.0.1'

    buildRequires = [ 'ncurses:devel' ]

    def setup(r):

        r.addArchive('ftp://iptraf.seul.org/pub/iptraf/%(name)s-%(version)s.tar.gz')
        r.addPatch('iptraf-3.0.1-compile.fix.patch')

        r.Make('TARGET=%(bindir)s', subDir='src')

        r.MakeDirs('%(localstatedir)s/{local,log,run}/%(name)s')

        r.Install('src/{iptraf,rvnamed}', '%(bindir)s/')

        r.AutoDoc(exceptions='/.+/')

        r.ExcludeDirectories(exceptions='%(localstatedir)s/.+/%(name)s')

