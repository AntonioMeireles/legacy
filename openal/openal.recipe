#
# Copyright (c) 2009 - 2011 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class OpenAl(AutoPackageRecipe):

    name = "openal"
    version = "1.13"

    buildRequires = ['cmake:runtime', 'pulseaudio:devel', 'alsa-lib:devel']

    def setup(r):
        r.macros.srcname = "%(name)s-soft"
        r.addArchive('http://kcat.strangesoft.net/%(name)s-releases/%(srcname)s-%(version)s.tar.bz2')
        r.addSource('openal-config', macros=True)
        r.Run('cmake -D CMAKE_INSTALL_PREFIX=%(prefix)s .')
        r.Make()
        r.Install('openal-config', '%(bindir)s/', mode=0755)
        r.MakeInstall()
        r.Symlink("%(libdir)s/pkgconfig/openal.pc", "%(libdir)s/pkgconfig/openal_soft.pc")
