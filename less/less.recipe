#
# Copyright (c) 2004-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Less(CPackageRecipe):
    name = 'less'
    version = '418'

    buildRequires = [ 'ncurses:devel', 'autoconf:runtime', ]

    def setup(r):
       r.addArchive('http://www.greenwoodsoftware.com/less/')
       r.addSource('lesspipe.sh', dest='%(bindir)s/', mode=0755)
       r.addSource('less.sh', dest='%(sysconfdir)s/profile.d/', mode=0755)
       r.addSource('less.csh', dest='%(sysconfdir)s/profile.d/', mode=0755)

       r.Configure()
       r.Make('CC="%(cc)s %(cflags)s -D_GNU_SOURCE -D_LARGEFILE_SOURCE'
              ' -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64"'
              ' datadir=%(docdir)s')
       r.MakePathsInstall()
