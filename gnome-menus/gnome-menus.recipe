#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('gnomepackage.recipe')
class Gnomemenus(GnomePackageRecipe):
    
    buildRequires = [ 'gamin:devel', 'glib:devel',
        'desktop-file-utils:runtime', 'gettext:runtime',
        'pygtk:python' ]
    
    name = 'gnome-menus'
    version = '2.14.0'
    
    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.Replace('NoDisplay=true','Categories=GNOME;Settings;','simple-editor/gmenu-simple-editor.desktop.in')
        # Patch for alacarte menu editor
        r.addPatch('alacarte.patch')
        #Patch applications.menu in /layout to allow desktop files to reference a Foresight menu
        r.addPatch('foresight-menus.patch', level=0)

        #Copy over Foresight menu definition and icon
        r.addSource('Foresight.directory')
        r.Install('Foresight.directory', '%(datadir)s/desktop-directories/')
        r.addSource('foresight-dir.png')
        r.Install('foresight-dir.png', '%(datadir)s/pixmaps/')
