class TrueCryptRecipe(CPackageRecipe):

    name = 'truecrypt'
    version = '6.1a'

    buildRequires = [
                'fuse:devel',
                'gcc:runtime',
                'gcc-c++:runtime',
                'glibc:devel',
                'libgcc:devellib',
                'libstdc++:devel',
                'make:runtime',
                'pkgconfig:devel',
                'userspace-kernel-headers:devel',
                'wxGTK:devel',
    ]

    def setup(r):

        # TrueCrypt's homepage is annoying, so we'll just keep our
        # own local version of the archive here
        r.addArchive('TrueCrypt %(version)s Source.tar.gz')

        # Need a few things from RSA to build TrueCrypt
        for pkcsh_fn in ('pkcs11', 'pkcs11f', 'pkcs11t'):
            r.addSource('ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-11/v2-20/%s.h' % pkcsh_fn)

        # Build and point TrueCrypt to the right place for PKCS
        r.Make('PKCS11=%(builddir)s')

        # Install the binary
        r.Install('Main/truecrypt', '%(bindir)s/')

        # Don't forget the License file
        r.Doc('License.txt')
