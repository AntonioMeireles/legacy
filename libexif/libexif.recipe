#
# Copyright (c) 2005-2007 rPath, Inc.
# This file is distributed under the terms of the MIT license
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Libexif(AutoPackageRecipe):
    name = 'libexif'
    version = '0.6.16'

    def unpack(r):
        r.disableParallelMake()
        r.addArchive('mirror://sourceforge/%(name)s/')

        # RPL-2068 CVE-2007-6351 CVE-2007-6352
        srpm = 'http://download.fedora.redhat.com/pub/fedora/linux/development/source/SRPMS/libexif-0.6.15-5.fc9.src.rpm'
        r.addPatch('cve-2007-6351.patch', rpm=srpm)
        r.addPatch('cve-2007-6352.patch', rpm=srpm)

        r.Replace('^Cflags: -I\$\{includedir\}',
                  'Cflags: -I${includedir}/libexif -I${includedir}',
                  'libexif.pc.in')

