loadSuperClass('gnomepackage')
class NetworkManagerOpenVPN(GnomePackageRecipe):
   buildRequires = [ 'GConf:devel', 'ORBit2:devel', 'atk:devel',
                     'cairo:devel', 'dbus-glib:devellib', 'dbus:devel',
                     'fontconfig:devel', 'freetype:devel', 'glib:devel',
                     'glibc:devel', 'gnome-keyring:devel', 'gnome-vfs:devel',
                     'gtk:devel', 'libart_lgpl:devel', 'libbonobo:devel',
                     'libbonoboui:devel', 'libglade:devel', 'libgnome:devel',
                     'libgnomecanvas:devel', 'libgnomeui:devel', 'libpng:devel',
                     'libxml2:devel', 'pango:devel', 'popt:devel', 'perl-XML-Parser:perl',
                     'zlib:devel', 'binutils:runtime', 'gawk:runtime', 
                     'NetworkManager:devel', 
                     'gettext:runtime', 'glibc:runtime', 'perl:runtime',
                     'pkgconfig:devel', 'desktop-file-utils:runtime', 'gtk:runtime',
                     'libX11:devel', 'libXau:devel', 'libXdmcp:devel',
                     'libXext:devel', 'libXi:devel', 'libXinerama:devellib',
                     'libXrender:devel','libdmx:devel', 'dbus-glib:devel',
                     'libICE:devel', 'libSM:devel','expat:devel',
                     'automake:runtime', 'autoconf:runtime',
                     'intltool:devel', 'libtool:devel', 'util-macros:devel',
                     'gettext:devel', 'which:runtime', 
                     'gnome-common:runtime', 'gnome-common:devel', 'libtool:runtime'
                     ]

   name = "NetworkManager-OpenVPN"
   version = '0.7.997+'
   configureName='autogen.sh'

   def unpack(r):
      r.addGitSnapshot('git://git.gnome.org/network-manager-openvpn')

   def policy(r):
      r.ComponentSpec('lib','%(libdir)s/libnm-openvpn-properties.so')
      # cheap hack to get perm woes, so that everyone can initiate vpn sessions
      r.Replace('deny', 'allow', '%(sysconfdir)s/dbus-1/system.d/nm-openvpn-service.conf')
