loadSuperClass('gnomepackage')
class NetworkManagerOpenVPN(GnomePackageRecipe):
   name = "NetworkManager-OpenVPN"
   version = '0.8.2'

   buildRequires = [
        'GConf:devel',
        'NetworkManager:devel',
        'dbus-glib:devel',
        'dbus-glib:devellib',
        'dbus:devel',
        'desktop-file-utils:runtime',
        'expat:devel',
        'gawk:runtime',
        'gnome-keyring:devel',
        'gtk:runtime',
        'libglade:devel',
        'libgnome-keyring:devellib',
        'perl-XML-Parser:perl',
        'perl:runtime',
        'popt:devel',
        'util-macros:devel',
        ]

   externalArchive = 'mirror://gnome/NetworkManager-openvpn/%(major_version)s/NetworkManager-openvpn-%(version)s.tar.gz'

   def policy(r):
      # cheap hack to get perm woes, so that everyone can initiate vpn sessions
      r.Replace('deny', 'allow', '%(sysconfdir)s/dbus-1/system.d/nm-openvpn-service.conf')
