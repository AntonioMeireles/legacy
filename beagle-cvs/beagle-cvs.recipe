class Beagle(PackageRecipe):

    buildRequires = [ 'dbus:devel', 'gecho-sharp:devel',
			'gtk-sharp:devel', 'mono:devel',
			'gmime:devel' ]

    name = 'beagle-cvs'
    version = '20050202'
    def setup(r):
        r.addArchive('%(name)s-%(version)s.tar.gz')
	r.addSource('beagle.sh')

	# Minor hack to handle more file-descriptors
	r.addAction("sed -i 's/return cycles_since_last_optimization > 19/return cycles_since_last_optimization > 259/g' beagled/LuceneDriver.cs")

        r.Configure('--enable-epiphany-extension --enable-maintainer-mode')
        r.Make()
        r.MakeInstall()
	r.Install('beagle.sh', '/etc/X11/xinit/xinitrc.d/beagle.sh')
