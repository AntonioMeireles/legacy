#
# Copyright (c) 2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('kdecorepackage')
class kdeNetwork(kdeCorePackageRecipe):

    name = 'kdenetwork'
    version = '3.5.9'

    verify = False
    buildAPIDox = False

    buildRequires = [
        'avahi-qt3:devel', 'avahi:devel', 'kdnssd-avahi:devel', 'libxml2:devel',
        'libxslt:devel', 'openslp:devel', 'openssl:devel', 'pcre:devel',
        'perl-IO-Socket-SSL:perl', 'perl:runtime', 'wireless-tools:devel'
    ]

    modules = [
        'dcoprss',
        'kdict',
        'kdnssd',
        'kget',
        'knewsticker',
        'kopete',
        'kpf',
        'kppp',
        'krdc',
        'krfb',
        'ksirc',
        'ktalkd',
       ('ktalkd', 'doc/kcontrol/kcmktalkd'),
       ('kfile-plugins-network', 'kfile-plugins'),
       ('kdenetwork-filesharing', 'filesharing'),
       ('kdenetwork-lanbrowsing', 'lanbrowsing'),
       ('kdenetwork-lanbrowsing', 'doc/kcontrol/lanbrowser'),
       ('kdenetwork-lanbrowsing', 'doc/lisa'),
       ('kdenetwork-librss', 'librss'),
       ('kwifimanager', 'wifi'),
       ('kwifimanager', 'doc/kwifimanager')
    ]

    def postUnpack(r):

        # Fix ktalkd build in rMake
        r.Environment('kde_cv_utmp_file', '/var/run/utmp')

    def postInstall(r):

        r.SetModes('%(bindir)s/kppp', 04755)

