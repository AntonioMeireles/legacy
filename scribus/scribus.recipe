#
# Copyright (c) 2005-2007 rPath, Inc.
# This file is distributed under the MIT License
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Scribus(AutoPackageRecipe):
    name = 'scribus'
    version = '1.3.3.12'

    buildRequires = [
        'autoconf:runtime', 'automake:runtime', 'cups:devel',
        'desktop-file-utils:runtime', 'expat:devel',
        'fontconfig:devel', 'freetype:devel', 'gcc:devel',
        'ghostscript:runtime', 'lcms:devel', 'libart_lgpl:devel',
        'libICE:devel', 'libjpeg:devel', 'libpng:devel', 'libSM:devel',
        'libstdc++:devel', 'libtiff:devel', 'libX11:devel', 'libXcursor:devel',
        'libXext:devel', 'libXft:devel', 'libXi:devel', 'libXinerama:devel',
        'libxml2:devel', 'libXmu:devel', 'libXrandr:devel', 'libXrender:devel',
        'Mesa:devel', 'MySQL-python:python', 'openssl:devel', 'PIL:python',
        'pkgconfig:devel', 'python:devel', 'python:lib', 'python:tk', 'qt:devel',
        'shared-mime-info:runtime', 'zlib:devel', 'cairo:devel'
    ]

    def unpack(r):
           r.addArchive('mirror://sourceforge/scribus/')

    def configure(r):
           # Application category is deprecated
           # Note that it will still show up in Graphics
           #r.Replace(('Categories=Application', 'Categories='),
           #         ('^DocPath', 'X-DocPath'),
           #         'scribus.desktop')
           libsuffix=''
           if Arch.bits64:
	       libsuffix=' --enable-libsuffix=64'
           r.Configure('--enable-cairo --with-pythondir=%(prefix)s'
                       ' --with-extra-libs=%(libdir)s' + libsuffix)
                  
    def makeinstall(r):
           r.MakePathsInstall()
           r.Desktopfile('vnd.scribus.desktop')
