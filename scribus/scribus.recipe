#
# Copyright (c) 2005-2007 rPath, Inc.
# This file is distributed under the MIT License
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Scribus(CPackageRecipe):
    name = 'scribus'
    version = '1.4.0.rc6'

    buildRequires = [
        'autoconf:runtime', 'automake:runtime', 'cups:devel',
        'desktop-file-utils:runtime', 'expat:devel',
        'fontconfig:devel', 'freetype:devel', 'gcc:devel',
        'ghostscript:runtime', 'lcms:devel', 'libart_lgpl:devel',
        'libICE:devel', 'libjpeg:devel', 'libpng:devel', 'libSM:devel',
        'libstdc++:devel', 'libtiff:devel', 'libX11:devel', 'libXcursor:devel',
        'libXext:devel', 'libXft:devel', 'libXi:devel', 'libXinerama:devel',
        'libxml2:devel', 'libXmu:devel', 'libXrandr:devel', 'libXrender:devel',
        'Mesa:devel', 'MySQL-python:python', 'openssl:devel', 'PIL:python',
        'pkgconfig:devel', 'python:devel', 'python:lib', 'python:tk', 'qt:devel',
        'shared-mime-info:runtime', 'zlib:devel', 'cairo:devel', 'aspell:devel', 
	'cmake:runtime', 'dbus:devel', 'glib:devel', 'libxml2:runtime', 'qt4-core:devellib', 
	'qt4-gui:devellib', 'qt4:devel', 'qt4:runtime', 'phonon:devel', 'podofo:devel', 'qt4-sql:mysql', 'qt4-sql:odbc', 'qt4-sql:psql', 'qt4-sql:sqlite'
    ]

    def setup(r):
           r.addArchive('http://sourceforge.net/projects/scribus/files/scribus-devel/%(version)s/scribus-%(version)s.tar.bz2')
           r.CMake()
           r.Make()
           r.MakeInstall()
           r.Replace("Icon=scribus",
                     "Icon=%(datadir)s/%(name)s/icons/%(name)s.png",
                     "scribus.desktop")
           r.Desktopfile('scribus.desktop')
