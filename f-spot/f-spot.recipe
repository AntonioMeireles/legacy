#
# Copyright (c) 2007-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage')
class FSpot(GnomePackageRecipe):
    name = 'f-spot'
    version = '0.4.2'

    buildRequires = [ 'GConf:runtime', 'desktop-file-utils:runtime', 'gnome-sharp:devellib',
                      'gnome-sharp:cil', 'gtk-sharp:devellib', 'gtk-sharp:cil',
                      'gtk:devellib', 'lcms:devel', 'libexif:devel',
                      'libgnome:devellib', 'libgnomeui:devel', 'libjpeg:devel',
                      'libusb:devellib', 'mono:devel', 'mono:cil',
                      'mono:runtime', 'rarian:runtime', 'rarian:devel',
                      'libxslt:runtime', 'gnome-doc-utils:devel', 'gnome-doc-utils:runtime',
                      'libgphoto2:devel', 'libgphoto2:devellib', 'banshee:lib',
                      'ndesk-dbus:cil', 'ndesk-dbus:devellib' ]

    extraConfig = ' --disable-scrollkeeper'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.Environment('MONO_SHARED_DIR', '/tmp')
        # fix upstream breakage
        r.Replace('rm \-f \$\(plugindir\)\/GalleryExport\.addin\.xml',
                  'rm -f $(DESTDIR)$(plugindir)/GalleryExport.addin.xml',
                  'extensions/GalleryExport/Makefile.in')
