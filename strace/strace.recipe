#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Strace(CPackageRecipe):
    name = 'strace'
    version = '4.5.14'
    buildRequires = [ 'perl:lib', 'perl:runtime',
        'userspace-kernel-headers:devel' ]

    def setup(r):
        r.disableParallelMake()
        r.addArchive('mirror://sourceforge/strace/')
        r.addPatch('strace-4.5.14-sysctl-proc.patch')
        r.addPatch('strace-4.5.14-getsiginfo.patch')
        r.Configure()
        r.Make()
        r.MakeInstall('man1dir=%(mandir)s/man1')
        # we do not want to make strace depend on perl
        r.ComponentSpec('perl', '%(bindir)s/strace-graph')
