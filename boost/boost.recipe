#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Boost(AutoPackageRecipe):
    name = 'boost'
    version = '1.33.1'
    buildRequires = [ 'bzip2:devel', 'icu:devel', 'libstdc++:devel',
        'python:devel', 'zlib:devel' ]

    def unpack(r):
        r.macros.archive_version = r.version.replace('.', '_')
        r.addArchive('mirror://sourceforge/%(name)s/%(name)s_%(archive_version)s.tar.bz2')
        r.Replace('^BJAM_CONFIG=""', 'BJAM_CONFIG="--layout=system"', 'configure')

    def configure(r):
        r.ManualConfigure(' --prefix=%(destdir)s%(prefix)s --with-icu')

    def policy(r):
        r.AutoDoc(exceptions='/.+/')
        docs = [ 'LICENSE_1_0.txt', 'boost.{css,png}', 'google_logo_40wht.png',
            'index.htm', 'rst.css', 'more', 'people', 'status', 'wiki' ]
        r.Doc(*docs)
        r.Doc('doc/html', dir='doc')
        r.CheckSonames(exceptions='%(libdir)s/libboost_.*')
