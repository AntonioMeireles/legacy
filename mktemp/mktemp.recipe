#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Mktemp(CPackageRecipe):
    name = 'mktemp'
    version = '1.5'

    def setup(r):
        r.addArchive('ftp://ftp.cs.colorado.edu/pub/mktemp/', keyid='7EE470C4')
        srpm='http://download.fedora.redhat.com/pub/fedora/linux/core/development/source/SRPMS/mktemp-1.5-23.2.2.src.rpm'
        r.addPatch('mktemp-1.5-build.patch', rpm=srpm)

        if Use.bootstrap:
            r.macros.mflags="CC=%(target)s-gcc"
            extraConf = '--with-libc' # build with glibc's mkstemp
        else:
            extraConf = ''

        r.Configure(extraConf)
        r.Make()
        r.MakePathsInstall('bindir=%(destdir)s/%(essentialbindir)s')
