#
# Copyright (c) 2011 - the Foresight Linux Project
#
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
# 

class Heimdall(AutoPackageRecipe):
    name = 'heimdall'
    version = '1.1.1'

    buildRequires = [ 'libstdc++:devel', 'libusb1:devel', 'pkgconfig:devel' ]

    def setup(r):
        r.addArchive('https://github.com/downloads/Benjamin-Dobell/Heimdall/')
        # devs smoke crack ...
        r.Replace('sudo service udev reload', '', 'heimdall/Makefile.{in,am}')
        r.Configure(dir = 'heimdall')
        r.Make(dir = 'heimdall')
        r.MakeInstall(dir = 'heimdall')
        
        # FIXME uncomment after you find right (qt3) buildReqs
        # r.Run('qmake heimdall-frontend.pro', dir = 'heimdall-frontend')
        # r.Make(dir = 'heimdall-frontend')
        # r.MakeInstall(dir = 'heimdall-frontend')
