#
# Copyright (c) 2011 - the Foresight Linux Project
#
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
# 

class Heimdall(PackageRecipe):
    name = 'heimdall'
    version = '1.3.1'

    buildRequires = [ 'libstdc++:devel', 'libusb1:devel', 'pkgconfig:devel', 'binutils:runtime', 'libgcc:devellib', 'qt4-core:lib', 'qt4-gui:lib', 'zlib:devel' ]

    def setup(r):

        r.macros.snapshot = r.version.split('.')[-1]
        r.macros.site = 'https://github.com/downloads/Benjamin-Dobell/Heimdall'

        dist = [
            ('heimdall_1.3.1_i386.deb', Arch.x86),
            ('heimdall_1.3.1_amd64.deb', Arch.x86_64),
            ('heimdall-frontend_1.3.1_i386.deb', Arch.x86),
            ('heimdall-frontend_1.3.1_amd64.deb', Arch.x86_64),
        ]
        for (rpm, arch) in dist:
            r.addArchive('%(site)s/'+rpm, dir='/', use=(arch==True))
