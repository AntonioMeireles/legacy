#
# Copyright (c) 2009 - 2011 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Aqualung(AutoPackageRecipe):
    name = 'aqualung'
    revision = 'r1228'
    version = '0.9beta11+' + revision
 
    packageSummary = 'Aqualung is an advanced music player'
    packageDescription = 'Aqualung is an advanced music player. It plays audio CDs, internet radio streams and podcasts as well as soundfiles in just about any audio format and has the feature of inserting no gaps between adjacent tracks.'
    
    buildRequires = ['alsa-lib:devel',
		'atk:devel',
		'bzip2:devel',
		'cairo:devel',
		'desktop-file-utils:runtime',
		'expat:devel',
		'ffmpeg:devel',
		'flac:devel',
		'fontconfig:devel',
		'freetype:devel',
		'glib:devel',
		'gtk:devel',
		'jack:devel',
		'lame:devel',
		'libX11:devel',
		'libXrender:devel',
		'libcddb:devel',
		'libcdio:devel',
		'liblrdf:devel',
		'libmad:devel',
		'libmodplug:devel',
		'libogg:devel',
		'libpng:devel',
		'libsamplerate:devel',
		'libsndfile:devel',
		'libstdc++:devel',
		'libusb:devel',
		'libvorbis:devel',
		'libxcb:devel',
		'libxml2:devel',
		'lua:devel',
		'pango:devel',
		'pixman:devel',
		'pkgconfig:devel',
		'pulseaudio:devel',
		'raptor:devel',
		'wavpack:devel',
		'xcb-util:devel',
		'zlib:devel',
		'libtool:runtime',  
		'automake:runtime', 
		'autoconf:runtime',
		'gettext:runtime', 
		'intltool:runtime',
		'cvs:runtime',
		        ]
 
    def unpack(r):
        r.addSvnSnapshot('http://aqualung.svn.sourceforge.net/svnroot/aqualung/trunk', revision = r.revision)
	r.addSource('%(name)s.desktop')

    def configure(r):
        r.Run('./autogen.sh')
	r.Configure('--with-alsa=yes --with-cdda=yes --with-cddb=yes --with-flac=yes --with-id3=yes --with-jack=yes --with-ladspa=yes --with-loop=yes --with-metadata=yes --with-metaedit=yes --with-mpc=no --with-mod=yes --with-ogg=yes --with-oss=yes --with-sndfile=yes --with-src=yes --with-systray=yes --with-vorbisenc=yes --with-wavpack=yes --with-lame=yes --with-lavc=yes --with-mpeg=yes --with-mpegstatrec=no --with-ifp=no --with-mac=no')

    def policy(r):
	r.Install('src/img/icon_48.png', '%(datadir)s/pixmaps/%(name)s.png')
	r.Desktopfile('%(name)s.desktop')
