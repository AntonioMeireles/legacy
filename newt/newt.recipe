#
# Copyright (c) 2004-2010 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpmpackage')
loadInstalled('python')
class Newt(RPMPackageRecipe, AutoPackageRecipe, Python.VersionMixIn):
    name = 'newt'
    version = '0.52.6'
    rpmRelease = '3.fc7'
    distroVersion = '7'

    buildRequires = [ 'python:devel', 
                      'python:runtime', 
                      'slang:devel',
                      'popt:devel', 
                      'tcl:devel',
                    ]

    def unpack(r):
        r.srpm = 'http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/7/Fedora/source/SRPMS/newt-0.52.6-3.fc7.src.rpm'
        RPMPackageRecipe.unpack(r)

    def configure(r):
        r.setDefaultPython()
        r.Configure()

    # Do not configure with --with-gpm-support; bugs affect anaconda
    def makeinstall(r):
        r.MakeInstall('libdir=%(libdir)s', rootVar='instroot')
        r.CompilePython('%(libdir)s/python*')
        r.Doc('tutorial.sgml', 'peanuts.py', 'popcorn.py')
        r.Requires('slang:devel', '%(includedir)s/newt.h')
        r.ComponentSpec('tcl', '%(libdir)s/whiptcl.so')
