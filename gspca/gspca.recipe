#
# Copyright (c) 2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('kernelmodulepackage', label='foresight.rpath.org@fl:1-devel')
class Gspca(KernelModulePackageRecipe):
    name = 'gspca'
    version = '20070508'

    buildRequires = ['kernel:build-tree']

    def unpack(r):
        r.addArchive('http://mxhaard.free.fr/spca50x/Download/%(name)sv1-%(version)s.tar.gz')
        r.Replace('KERNEL_VERSION =.*', 'KERNEL_VERSION = %(kver)s', 'Makefile')
        r.Replace('.*depmod.*', '', 'Makefile')
        r.Make()
        r.Install('%(name)s.ko', '/lib/modules/%(kver)s/kernel/drivers/usb/media/')
