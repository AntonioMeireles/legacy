#
# Copyright (c) 2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Nspr(CPackageRecipe):
    name = 'nspr'
    version = '4.6.2'

    buildRequires = []

    if Arch.x86_64:
        extraConfig = '--with-64bit'
    else:
        extraConfig = ''

    def setup(r):
        r.macros.subDir = 'mozilla/nsprpub'
        r.addArchive('ftp://ftp.mozilla.org/pub/mozilla.org/nspr/releases/v%(version)s/src/%(name)s-%(version)s.tar.gz')
        r.Configure('--includedir=%(includedir)s/nspr4 ' + r.extraConfig, subDir='%(subDir)s')
        r.Make(subDir='%(subDir)s')
        r.MakeInstall(subDir='%(subDir)s', installtarget='real_install')
