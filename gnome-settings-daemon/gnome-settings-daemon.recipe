#
# Copyright (c) 2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('gnomepackage')
class GnomeSettingsDaemon(GnomePackageRecipe):
    
    buildRequires = ['GConf:devel', 'GConf:runtime', 'ORBit2:devel', 'esound:devel', 'gail:devel', 'gnome-desktop:devel', 'gnome-keyring:devel', 'gnome-vfs:devel', 'gst-plugins-base:devel', 'gstreamer:devel', 'libXxf86misc:devel', 'libart_lgpl:devel', 'libbonobo:devel', 'libbonoboui:devel', 'libglade:devel', 'libgnome:devel', 'libgnomecanvas:devel', 'libgnomekbd:devel', 'libgnomeui:devel', 'libxklavier:devel', 'popt:devel', 'startup-notification:devel', 'dbus-glib:runtime', 'libXrandr:devel']

    name = 'gnome-settings-daemon'
    version = '2.22.1'

    extraConfig = ' --disable-scrollkeeper --disable-update-mimedb'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.addPatch('http://archive.ubuntu.com/ubuntu/pool/main/g/gnome-settings-daemon/gnome-settings-daemon_2.22.1-0ubuntu1.diff.gz')

        ubuntuPatches = [ '08_extra_touchpad_options.patch',
                          '11_sleepkey.patch',
                          '19_extra_keybindings.patch',
                          '91_gsd-add-randr-12.patch',
                          '92_gsd-xrandr-version-check.patch',
                        ]
        for patch in ubuntuPatches:
            r.addPatch(patch, sourceDir='debian/patches/')
