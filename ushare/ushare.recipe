#
# Copyright (c) 2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class UshareRecipe(AutoPackageRecipe):
    name = 'ushare'
    version = '1.1a'
    buildRequires = ['libupnp:devel', 'pkgconfig:devel']

    def unpack(r):
        r.addArchive('http://ushare.geexbox.org/releases/')
        # Use the fedora-style init file from the mercurial checkout, instead
        # of the debian-style
        r.addSource('ushare.init', dest="scripts/ushare")

    def configure(r):
        r.Run("./configure --prefix=%(prefix)s --bindir=%(bindir)s --sysconfdir=%(sysconfdir)s")

    def policy(r):
        r.Requires("info-ushare:user", "%(initdir)s/ushare")
