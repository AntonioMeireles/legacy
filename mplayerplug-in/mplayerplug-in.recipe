#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#


class MplayerPlugin(AutoPackageRecipe):
    name = 'mplayerplug-in'
    version = '3.45'

    buildRequires = [ 'pkgconfig:devel', 'atk:devel', 'firefox:devel',
                      'cairo:devel', 'fontconfig:devel', 'freetype:devel', 'glib:devel',
                      'glibc:devel', 'gtk:devel', 'libgcc:devellib', 'libpng:devel',
                      'libstdc++:devel', 'nspr:devel', 'pango:devel', 'gettext:runtime',
                      'zlib:devel', 'gawk:runtime','expat:devel', 'libICE:devel',
                      'libSM:devel', 'libXext:devel', 'libXpm:devel', 'libXt:devel',
                      # for the tag scripts
                      'firefox:runtime', 'GConf:runtime'
                      ]

    def unpack(r):
        r.addArchive('mirror://sourceforge/%(name)s/')

    def policy(r):
        r.Move('%(libdir)s/mozilla/plugins/', '%(libdir)s/xulrunner/plugins/')
        r.TagSpec("firefox-xpt-component", '%(libdir)s/xulrunner/plugins/*.xpt')
        r.ComponentSpec("runtime", "%(libdir)s/xulrunner.*")

        r.Requires('mplayer:runtime', '%(libdir)s/xulrunner/plugins/mplayerplug-in-qt.so')
