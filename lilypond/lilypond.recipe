# vim:set ts=4 sw=4 et:

class LilyPond(AutoPackageRecipe):
    name = 'lilypond'
    version = '2.14.1'

    buildRequires = ['flex:devel', 'flex:runtime', 'fontconfig:devel', 'fontforge:runtime',
                     'freetype:devel', 'gettext:runtime', 'ghostscript:runtime', 'glib:devel',
                     'guile:devel', 'guile:runtime', 'install-info:runtime', 'libstdc++:devel',
                     'lxml:python', 'pango:devel', 'pkgconfig:devel', 'python:devel', 'rarian:runtime',
                     't1utils:runtime', 'tetex:runtime', 'mftrace:runtime',
                     'texi2html:runtime', 'texinfo:runtime',
                     'bison', 'expat:devel', 'fontconfig:runtime', 'perl:runtime', 'zlib:devel',
                     'gmp:devel', 'urw-fonts:data']

    def unpack(r):
        r.addArchive('http://lilypond.org/download/sources/v%(major_version)s/')

    def configure(r):
        r.Configure('--with-ncsb-dir=%(datadir)s/fonts/default/Type1')

    def make(r):
        r.Make('all')

    def makeinstall(r):
        r.MakeInstall('vimdir=%(datadir)s/vim/vim73')
