#
# Copyright (c) 2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage')
class Banshee(GnomePackageRecipe):
    name = 'banshee'
    version = '0.13.2'
    buildRequires = [ 'GConf:devel', 'GConf:runtime', 'ORBit2:devel',
                      'atk:devel', 'avahi-sharp:devellib', 'avahi-sharp:cil',
                      'cairo:devel', 'dbus-glib:devel', 'dbus:devel',
                      'desktop-file-utils:runtime', 'expat:devel', 'fontconfig:devel',
                      'freetype:devel', 'gettext:runtime', 'glib:devel',
                      'gnome-sharp:cil', 'gnome-sharp:devellib', 'gnome-sharp:lib',
                      'gnome-vfs:devel', 'gst-plugins-base:devel', 'gst-plugins-base:lib',
                      'gst-plugins-good:lib', 'gstreamer:devel', 'gstreamer:runtime',
                      'gtk-sharp:devellib', 'gtk-sharp:lib', 'gtk:devel', 'hal-sharp:devellib',
                      'hal-sharp:lib', 'hal:devel', 'intltool:runtime',
                      'libX11:devel', 'libXrender:devel', 'libgphoto2-sharp:devellib',
                      'libmusicbrainz:devel', 'libpng:devel', 'libusb:devel',
                      'libusb:lib', 'libxml2:devel', 'mono:devel',
                      'mono:lib', 'mono:runtime', 'nautilus-cd-burner:devel',
                      'pango:devel', 'perl:runtime', 'pkgconfig:devel',
                      'sqlite:devellib', 'zlib:devel', 'mono-zeroconf:cil',
                      'gnome-common:runtime', 'gnome-common:devel',
                      'mono-zeroconf:devellib', 'podsleuth:devellib', 'podsleuth:lib', 
                      'podsleuth:runtime', 'ipod-sharp:devellib', 'libmtp:devel',
                      ]
    GnomePackageRecipe.extraConfig += '--disable-static --disable-helix --disable-vlc '
    GnomePackageRecipe.extraConfig += '--disable-xing --disable-docs --with-gstreamer-0-10 --enable-avahi --disable-mtp --enable-ipod'

    def unpack(r):
        r.addArchive('http://www.banshee-project.org/files/%(name)s/')
        r.Environment('MONO_SHARED_DIR', '/tmp')
        r.disableParallelMake()

    def policy(r):
        r.Requires('libmtp:lib', '%(libdir)s/banshee/Banshee.Dap/libmtp-sharp.dll.config')
        r.Requires('ipod-sharp:lib', '%(libdir)s/banshee/Banshee.Dap/ipod-sharp.dll.config')
