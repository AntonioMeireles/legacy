loadSuperClass('kernelmodulepackage')
class OV51xJpegKernel(KernelModulePackageRecipe):
    name = 'ov51x-jpeg-kernel'
    version =  '1.5.9'

    def unpack(r):
        r.addArchive('http://www.rastageeks.org/downloads/ov51x-jpeg/ov51x-jpeg-%(version)s.tar.gz')
        for p in [ 'kernel_messages.patch',
                   'ov51x-jpeg-2.6.29.patch',
                   'ov51x-jpeg-2.6.30.patch',
                   'noowner.patch',
                   'autoconf.patch',
                   'v4l2.patch',
                   'ov51x-jpeg-2.6.36.patch',]:
            r.addPatch('http://aur.archlinux.org/packages/ov51x-jpeg/ov51x-jpeg/'+p)
        r.Replace('\$\(shell\ uname\ \-r\)', '%(kver)s', 'Makefile')
