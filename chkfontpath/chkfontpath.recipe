#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class ChkFontPath(CPackageRecipe):
    name = 'chkfontpath'
    version = '1.10.1'

    buildRequires = [ 'popt:devel' ]

    def setup(r):
        srpm = 'http://download.fedora.redhat.com/pub/fedora/linux/core/5/source/SRPMS/%(name)s-%(version)s-1.src.rpm'
        r.addArchive('%(name)s-%(version)s.tar.gz', rpm=srpm)

        r.Make()
        r.MakeInstall('BINDIR=%(sbindir)s MANDIR=%(mandir)s',
                      rootVar='INSTROOT')

        # sysvinit:runtime is needed for /sbin/pidof
        for requirement in ('sysvinit:runtime', 'xfs:runtime'):
            r.Requires(requirement, '%(sbindir)s/chkfontpath')
