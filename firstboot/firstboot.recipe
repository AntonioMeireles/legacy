#
# Copyright (c) 2005-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpmpackage')
class FirstBoot(RPMPackageRecipe, CPackageRecipe):
    name = 'firstboot'
    version = '1.4.39'
    rpmRelease = '1.fc8'
    distroVersion = '8'

    buildRequires = [ 'intltool:runtime', 'gettext:runtime', 'kudzu:python',
        'libuser:python', 'newt:python', 'pygtk:python', 'pyxf86config:python',
        'rhpl:python', 'rhpxl:python', ]

    def setup(r):
        r.unpack()
        r.Replace('RPM_BUILD_ROOT', 'INSTROOT', 'po/Makefile')
        r.Replace('python2', 'python', 'src/{,x}firstboot.py')
        r.Remove('src/pixmaps/rhn*png')
        r.Remove('src/pixmaps/splash.png')
        r.Remove('src/modules/additional_cds.py')
        r.Make()
        r.MakeInstall(rootVar='INSTROOT')

        r.Remove('%(sbindir)s/firstboot')
        r.Remove('%(sysconfdir)s/rc.d/init.d/firstboot')
