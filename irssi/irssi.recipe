#
# Copyright (c) 2006-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class irssi(CPackageRecipe):
    name = 'irssi'
    version = '0.8.11_rc1'

    buildRequires = ['glib:devel', 'glibc:devel', 'ncurses:devel',
        'openssl:devel', 'zlib:devel', 'binutils:runtime', 'gawk:runtime',
        'perl:runtime', 'pkgconfig:devel', 'sed:runtime', 'krb5:devel',
        'perl-URI:perl', 'perl-libwww-perl:perl', 'perl:devel', 'perl:lib', ]

    def setup(r):
        r.macros.upver = r.version.replace('_', '-')
        r.addArchive('http://www.irssi.org/files/%(name)s-%(upver)s.tar.gz')

        r.Configure('--with-plugins --enable-ipv6 --with-textui --with-imlib '
                '--with-bot --with-socks --with-proxy --with-perl="yes" '
                '--with-ncurses')
        r.Make()
        r.MakeInstall('DESTDIR=%(destdir)s')
        r.ExcludeDirectories(exceptions=['/usr/lib/irssi/modules'])

