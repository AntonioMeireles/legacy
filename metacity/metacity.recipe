#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('gnomepackage.recipe')
class Metacity(GnomePackageRecipe):
    
    buildRequires = [ 'gtk:devel', 'pango:devel', 'fontconfig:devel',
        'GConf:devel', 'desktop-file-utils:runtime', 'GConf:runtime',
        'libglade:devel', 'startup-notification:devel', 'intltool:runtime',
        'ORBit2:devel', 'atk:devel', 'cairo:devel', 'freetype:devel',
        'glib:devel', 'libpng:devel', 'gettext:runtime', 'perl:runtime',
        'libXcursor:devel', 'libXfixes:devel', 'libXrandr:devel',
        'expat:devel' ]

    name = 'metacity'
    version = '2.18.2'

    docs = ['README', 'AUTHORS', 'COPYING', 'NEWS', 'HACKING',
            'doc/theme-format.txt', 'doc/metacity-theme.dtd']

    #extraConfig = '--disable-compositor --disable-render'


    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.macros.optflags = '-g -Os'
        r.addPatch('metacity-2.4.13.90-ctrlaltdel.patch')
        r.addPatch('font.patch')
        r.Replace('Clearlooks','Foresight','src/metacity.schemas*')

    def setup(r):
        r.disableParallelMake()
        GnomePackageRecipe.setup(r)
