#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Lite(GroupRecipe):
    name = 'group-lite'
    version = '0.9.9'

    autoResolve = True
    depCheck = True
    checkOnlyByDefaultDeps = True

    def startGroup(r, name, parentGroup, depCheck=False, byDefault=True,
                   checkPathConflicts=None):
        # creates group named "name", adds it to the toplevel group,
        # and sets the current group to that name.  calls to r.add()
        # will use the current group by default.

        # note: byDefault applies to whether the group is included by
        # default in its parent group, not whether the troves in
        # the group are added by default. (use the setByDefault() command
        # to get that)

        # get all the the default for the new group from its parent group.
        r.setDefaultGroup(parentGroup)
        r.createGroup(name, autoResolve=False, depCheck=depCheck,
                      byDefault=True, checkPathConflicts=checkPathConflicts)
        r.addNewGroup(name, groupName=parentGroup, byDefault=byDefault)
        r.setDefaultGroup(name)

    def setup(r):
      r.setLabelPath('foresight.rpath.org@fl:1', 'conary.rpath.com@rpl:1', 'foresight.rpath.org@fl:1-contrib', 'contrib.rpath.org@rpl:devel', 'kernelbits.rpath.org@rpl:1')
      compatLabel='conary.rpath.com@rpl:1-compat'
      conaryLabel='foresight.rpath.org@fl:1-devel'

      kernelVersion = 'kernelbits.rpath.org@rpl:1/2.6.19.1-0.1-1'

      r.removeComponents(['devel', 'devellib', 'doc', 'supdoc'])
      r.add('group-laptop-tools')
      r.add('group-drivers')
      r.add('group-turbogears')
      r.add('group-xorg')
      r.add('group-core')
      r.add('group-base')
      r.add('group-media')
      r.add('info-raa-web','raa.rpath.org@rpl:1')
      r.add('raa','raa.rpath.org@rpath:raa-1.1-devel')
      r.add('raa-lighttpd','raa.rpath.org@rpath:raa-1.1-devel')
      r.add('raa-branding','raa.rpath.org@rpath:raa-1.1-devel')
      r.add('raa-desktop')
      r.add('foresight-fonts')


      r.startGroup('group-gnome-minimal', parentGroup='group-lite')
      r.removeComponents(['devel', 'devellib', 'doc'])

      # troves we want
      r.add('control-center')
      r.add('compiz')
      r.add('compiz-extra')
      r.add('gnome-compiz-manager')
      r.add('gnome-compiz-manager-extra')
      r.add('gamin')
      r.add('GConf')
      r.add('gdm')
      r.add('gnome-applets')
      r.add('gnome-backgrounds')
      r.add('gnome-desktop')
      r.add('gnome-icon-theme')
      r.add('gnome-media')
      r.add('gnome-menus')
      r.add('gnome-mime-data')
      r.add('gnome-panel')
      r.add('gnome-power-manager')
      r.add('gnome-session')
      r.add('gnome-system-monitor')
      r.add('gnome-system-tools')
      r.add('gnome-terminal')
      r.add('gnome-themes')
      r.add('gnome-utils')
      r.add('gnome-vfs')
      r.add('gnome-volume-manager')
      r.add('gtk-engines')
      r.add('gtk-theme-foresight')
      r.add('hal')
      r.add('hal-gnome')
      r.add('hicolor-icon-theme')
      r.add('avahi')
      r.add('info-haldaemon')
      r.add('libbonobo')
      r.add('libbonoboui')
      r.add('metacity')
      r.add('nautilus')
      r.add('NetworkManager')
      r.add("tango-icon-theme")
      r.add("tango-icon-theme-extras")
      r.add('firefox')
      r.add('firefox-rBuilder-search')
      r.add('gaim')
      r.add('xchat-gnome')


