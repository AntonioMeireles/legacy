# Copyright (c) 2007-2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Podsleuth(AutoPackageRecipe):
    name = 'podsleuth'
    version = '0.6.1'
    buildRequires = [ 'dbus:devel',
                      'hal:devel',
                      'libtool:devel',
                      'mono:devel',
                      'mono:runtime',
                      'ndesk-dbus:cil',
                      'ndesk-dbus:devellib',
                      'pkgconfig:devel',
                      'sg3_utils:devel',
                      'zlib:devel']

    def unpack(r):
        r.addArchive('http://banshee-project.org/files/%(name)s/')
        r.Replace('sleuthdir = \$\(prefix\)/lib/podsleuth', 'sleuthdir = %(libdir)s/podsleuth', 'src/PodSleuth.Hal/Makefile.*')
        r.Replace('sleuthdir = \$\(prefix\)/lib/podsleuth', 'sleuthdir = %(libdir)s/podsleuth', 'src/PodSleuth/Makefile.*')

    def configure(r):
        r.Configure('--prefix=%(prefix)s --with-hal-callouts-dir=%(prefix)s/libexec')

    def policy(r):
        r.Requires('sg3_utils:lib', '%(libdir)s/podsleuth/PodSleuth.dll')
