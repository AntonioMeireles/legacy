# Copyright (c) 2007 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Podsleuth(AutoPackageRecipe):
    name = 'podsleuth'
    version = '0.6.1'
    buildRequires = [ 'dbus:devel',
                      'hal:devel',
                      'hal-sharp:lib',
                      'libtool:devel',
                      'mono:devel',
                      'mono:runtime',
                      'ndesk-dbus:cil',
                      'ndesk-dbus:devellib',
                      'pkgconfig:devel',
                      'sg3_utils:devel',
                      'zlib:devel']

    def unpack(r):
        r.addArchive('http://banshee-project.org/files/%(name)s/')

    def configure(r):
        r.Configure('--prefix=%(prefix)s --with-hal-callouts-dir=%(prefix)s/libexec')

    def policy(r):
        if Arch.x86_64:
            for f in ['%(prefix)s/libexec/hal-podsleuth', '%(bindir)s/podsleuth', '%(libdir)s/pkgconfig/podsleuth.pc']:
                r.Replace('/usr/lib64', '/usr/lib', f)
