#
# Copyright (c) 2007 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Smolt(PackageRecipe):
    name = 'smolt'
    version = '0.9.9b'
 
    buildRequires = ['CherryPy:python', 'SQLObject:python', 'TurboGears:python',
                     'TurboJson:python', 'mx:python']
 
    def setup(r):
        r.addMercurialSnapshot('http://hg.fedoraproject.org/hg/hosted/smolt')
        r.macros.maindir = '%(datadir)s/%(name)s'
        #DOCS
        r.macros.docs = '%(docdir)s/%(name)s'
        r.MakeDirs('%(maindir)s','%(docs)s')
        r.Install('client/config.py','%(sysconfdir)s/smolt.cfg')
        r.Install('doc/*','%(docs)s')
        r.Install('README','%(docs)s')
        r.Install('GPL','%(docs)s')
        r.Install('TODO','%(docs)s')
        #CLIENT
        #r.Make(dir='client')
        r.Install('client/*','%(maindir)s')
        # CONFIG setup
        r.Install('client/config.py','%(sysconfdir)s/smolt.cfg')
        r.Remove('%(maindir)s/config.py')
        r.Symlink('%(sysconfdir)s/smolt.cfg','%(maindir)s/config.py')
        r.Install('smoon','%(datadir)s')
   

