#
# Copyright (c) 2012-2013 The Foresight Linux Project
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Qbittorrent(CPackageRecipe):
    name = 'qbittorrent'
    version = '3.0.8'
 
    buildRequires = [
        'openssl:devel', 
        'qt4:devel', 
        'boost:devel', 
        'desktop-file-utils:runtime', 
        'libstdc++:devel', 
        'libtorrent-rasterbar:devel',
        'python:devel',
        'which:runtime',
        'xdg-utils:runtime',
            ]
 
    def setup(r):
        r.addArchive('https://downloads.sourceforge.net/project/qbittorrent/qbittorrent/qbittorrent-%(version)s/qbittorrent-%(version)s.tar.gz')
        #
        # Fixme: Need to update when geolite site don't say: Rate limited exceeded, please try again in 24 hours.
        # r.addSource('http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz',
        #            dir='src/geoip/')
        #
        r.addSource('GeoIP.dat.gz', dir='src/geoip/')
        r.Run('gunzip src/geoip/GeoIP.dat.gz')
        r.ManualConfigure('--prefix=%(prefix)s --with-geoip-database-embedded')
        r.Make()
        r.MakeInstall('INSTALL_ROOT=%(destdir)s')
