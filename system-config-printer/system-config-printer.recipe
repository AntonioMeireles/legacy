#
# Copyright (c) 2005-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpmpackage.recipe', label='conary.rpath.com@rpl:devel')
class SystemConfigprinter(RPMPackageRecipe):

    buildRequires = [ 'gawk:runtime', 'pygtk:python', 'rhpl:python', 'desktop-file-utils:runtime', 'cups:devel', 'gettext:runtime', 'glibc:devel', 'perl:runtime' ]

    name = 'system-config-printer'
    version = '0.7.32'


    def setup(r):
        r.unpack()
        r.addArchive('pycups-1.9.13.tar.bz2', rpm=r.srpm, dir='%(name)s-%(version)s')
        r.Replace('Exec=', 'Exec=gksudo ', 'system-config-printer.desktop.in')
        r.Replace('bin', 'sbin', 'system-config-printer.desktop.in')
        r.Replace('Application', 'Settings ', 'Makefile.in')
        r.Replace('SystemSetup', 'System ', 'Makefile.in')
        r.Replace('X-Red-Hat-Base', 'DesktopSettings ', 'Makefile.in')
        r.Configure()
        r.Make()
        r.MakeInstall()
        #r.CheckDesktopFiles(exceptions='.*\\.desktop')
        r.MakeInstall(dir='pycups-1.9.13')
        #r.Desktopfile('system-config-printer.desktop')
