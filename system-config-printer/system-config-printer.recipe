#
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class SystemConfigPrinter(AutoPackageRecipe):

    name = 'system-config-printer'
    version = '1.1.2+git20090125'

    buildRequires = [ 'dbus-python:python', 'desktop-file-utils:runtime', 'gettext:runtime', 'intltool:runtime', 'libxml2:python', 'perl:runtime', 'pycairo:python', 'pycups:python', 'python:devel', 'xmlto:runtime', 'notify-python:python', 'pygtk:python', 'sexy-python:python' ]

    def unpack(r):

        #r.addArchive('http://cyberelk.net/tim/data/system-config-printer/%(major_version)s/')
        r.addArchive('http://archive.ubuntu.com/ubuntu/pool/main/s/system-config-printer/system-config-printer_%(version)s.orig.tar.gz')
        r.addPatch('http://patches.ubuntu.com/s/system-config-printer/extracted/01_delay_autostart.patch')
        r.Replace('NoDisplay=true','NoDisplay=false','manage-print-jobs.desktop.in')
        r.Replace('NotShowIn=KDE', 'NotShowIn=KDE;', 'print-applet.desktop.in')

    def configure(r):
        r.Configure(' --with-desktop-vendor=foresight ')

    def policy(r):
        r.Requires('notify-python:python', '%(bindir)s/%(name)s')
