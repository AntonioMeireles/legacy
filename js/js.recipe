#
# Copyright (c) 2007-2012 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class JS(CPackageRecipe):

    name = 'js'
    version = '1.8.5'
 
    buildRequires = ['ncurses:devel', 'nspr:devel', 'readline:devel', 'libstdc++:devel', 'perl:runtime']

    def setup(r):
        r.addArchive('http://ftp.mozilla.org/pub/mozilla.org/js/js185-1.0.0.tar.gz')
        r.addPatch('js185-destdir.patch', dir='js/src')
        r.Configure('--enable-threadsafe --prefix=%(prefix)s --with-system-nspr', dir='js/src')
        r.Make(dir='js/src')
        r.MakeInstall(dir='js/src')
        r.Install('js/src/shell/js', '%(bindir)s/')
