#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class AspellEn(BuildPackageRecipe):
    name = 'aspell-en'
    # this package has an interesting versioning scheme:
    # aspell6-en-6.0-0 is the latest, and apparently matches
    # aspell 0.60. we'll just take the last part: 6.0.0
    version = '6.0.0' # version cannot have '-' in it

    buildRequires = [ 'aspell:runtime', 'which:runtime' ]


    def setup(r):
        # insert upstream -
        verlist = r.version.split('.')
        r.macros.majver = verlist[0]
        if len(verlist) > 2:
            r.macros.upver = '-'.join(('.'.join(verlist[0:2]),
                                       '.'.join(verlist[2:])))
        else:
            r.macros.upver = r.version

        r.mainDir('aspell%(majver)s-en-%(upver)s')
        r.addArchive('http://ftp.gnu.org/gnu/aspell/dict/en/aspell%(majver)s-en-%(upver)s.tar.bz2')

        # this isn't an autoconf configure script
        # don't use %(libdir)s for dictdir because we're not looking
        # at shared libs
        r.ManualConfigure('--vars datadir=%(datadir)s/aspell dictdir=%(prefix)s/lib/aspell')

        r.Make()
        r.MakeInstall()
