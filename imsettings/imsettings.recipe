#
# Copyright (c) 2010 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Imsettings(AutoPackageRecipe):
    name = 'imsettings'
    version = '0.108.0'
 
    packageSummary = 'Delivery framework for general Input Method configuration'

    buildRequires = [
        'GConf:devel',
        'GConf:runtime',
        'atk:devel',
        'cairo:devel',
        'dbus-glib:devel',
        'dbus:devel',
        'fontconfig:devel',
        'freetype:devel',
        'gettext:runtime',
        'glib:devel',
        'gtk:devel',
        'intltool:runtime',
        'libX11:devel',
        'libnotify:devel',
        'libstdc++:devel',
        'pango:devel',
        'pkgconfig:devel',
        'qt4-core:devellib',
        ]
 
    def unpack(r):
        r.addArchive('http://imsettings.googlecode.com/files/')

    def policy(r):
        r.SetModes('%(libexecdir)s/xinputinfo.sh', 0755)

        # lxde package
        r.PackageSpec('%(name)s-lxde', '%(libexecdir)s/lxde-im-settings-daemon')
        r.PackageSpec('%(name)s-lxde', '%(datadir)s/dbus-1/services/lxde-im-settings-daemon.service')

        # remove qt stuff as in fedora
        r.Remove('%(datadir)s/dbus-1/services/qt-im-settings-daemon.service')
        r.Remove('%(libexecdir)s/qt-im-settings-daemon')
