#
# Copyright (c) 2006-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

import time

loadSuperClass('python=cantwait.rpath.org@rpl:2')
class ConaryPolicy(BuildPackageRecipe, Python.VersionMixIn):
    name = 'conary-policy'
    version = time.strftime('%Y%m%d%H%M', time.localtime())

    def setup(r):
        r.setDefaultPython()
        r.addMercurialSnapshot('http://hg.rpath.com/%(name)s')
        r.MakeInstall()
        # NOT %(libdir)s
        r.CompilePython('%(prefix)s/lib/conary/policy')
        r.Requires(bootstrapPythonFlags=('%(lib)s', '2.6'))
