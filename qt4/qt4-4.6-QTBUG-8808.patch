From 53795b645d82afc30a0527523e3fad2a763779e2 Mon Sep 17 00:00:00 2001
From: Zeno Albisser <zeno.albisser@nokia.com>
Date: Mon, 8 Mar 2010 18:15:57 +0100
Subject: [PATCH] Changed TEST_COMPILER from CC to CXX in configure script.

We are using a cpp file for testing the compiler. Because of that we
have to use a c++ compiler for the test as well.
But if there was a CC variable defined, this one was used instead
of CXX for the compiler test.
This resulted in a missing QMAKE_LFLAGS definition in .qmake.cache.
Due to this, the -L/path/to/QTDIR/lib was missing too and
assistant could not be linked to libQtCLucene.so.4.

Reviewed-by: Marius Storm-Olsen
Task-number: QTBUG-8808,QTBUG-5471,QTBUG-5385,QTBUG-5774
---
 configure |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/configure b/configure
index 56fd067..71056b6 100755
--- a/configure
+++ b/configure
@@ -2976,7 +2976,7 @@ else
 fi
 
 QMAKE_CONF_COMPILER=`getQMakeConf "$XQMAKESPEC" | grep "^QMAKE_CXX[^_A-Z0-9]" | sed "s,.* *= *\(.*\)$,\1," | tail -1`
-TEST_COMPILER="$CC"
+TEST_COMPILER="$CXX"
 [ -z "$TEST_COMPILER" ] && TEST_COMPILER=$QMAKE_CONF_COMPILER
 if [ -z "$TEST_COMPILER" ]; then
     echo "ERROR: Cannot set the compiler for the configuration tests"
-- 
1.6.1

