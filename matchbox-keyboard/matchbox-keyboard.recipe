#
# Copyright (c) 2009 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class MatchboxKeyboard(AutoPackageRecipe):
    name = 'matchbox-keyboard'
    version = '0.1+svn20080701'
 
    buildRequires = ['atk:devel', 'cairo:devel', 'desktop-file-utils:runtime', 'expat:devel', 'fontconfig:devel', 'freetype:devel', 'glib:devel', 'gtk:devel', 'libX11:devel', 'libXau:devel', 'libXdmcp:devel', 'libXext:devel', 'libXrender:devel', 'libXtst:devel', 'libfakekey:devel', 'libpng:devel', 'pango:devel', 'pixman:devel', 'pkgconfig:devel', 'zlib:devel', 'gnome-common:runtime', 'gnome-common:devel', 'libtool:devel', 'libtool:runtime', 'inputproto:devel']
 
    def unpack(r):
        r.addArchive('http://archive.ubuntu.com/ubuntu/pool/universe/m/matchbox-keyboard/matchbox-keyboard_0.1+svn20080701.orig.tar.gz')
        r.addPatch('http://archive.ubuntu.com/ubuntu/pool/universe/m/matchbox-keyboard/matchbox-keyboard_0.1+svn20080701-0ubuntu1.diff.gz')
        r.addPatch('http://patches.ubuntu.com/m/matchbox-keyboard/extracted/gtk-im-random-fixes.patch')
	images = [
            'arrow_down.png',
            'arrow_left.png',
            'arrow_right.png',
            'arrow_up.png',
            'close.png',
            'keyboard_bkgd.png',
            'return.png',
            ]

        for image in images:
            r.addSource(image, dest='%(datadir)s/pixmaps/')

    def configure(r):
        r.Configure('--enable-cairo --enable-gtk-im', configureName='autogen.sh')
	r.Replace('-lxcb-xlib','','src/Makefile')
