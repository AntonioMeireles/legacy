#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpmpackage')
class Libcap(RPMPackageRecipe, CPackageRecipe):
    name = 'libcap'
    version = '1.10'
    rpmRelease = '25'
    rpmPatches = [ 'libcap-1.10-ia64.patch', 'libcap-1.10-alpha.patch',
        'libcap-1.10-shared.patch', 'libcap-1.10-userland.patch',
        'libcap-1.10-useCFLAGSwithCC.patch', ]

    def setup(r):
        r.unpack()
        # we do not have a traditional C compiler!
        r.Replace(('-Wtraditional', ''),
                  ('-pedantic', ''),
                  'Make.Rules')
        r.Make('PREFIX=%(prefix)s LIBDIR=%(libdir)s')

        r.MakeInstall(' LIBDIR=%(destdir)s%(essentiallibdir)s'
                      ' SBINDIR=%(destdir)s%(sbindir)s'
                      ' INCDIR=%(destdir)s%(includedir)s'
                      ' MANDIR=%(destdir)s%(mandir)s/'
                      ' COPTFLAG="%(cflags)s"',
                        rootVar='FAKEROOT')
