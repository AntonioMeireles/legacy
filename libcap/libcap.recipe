#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpmpackage')
class Libcap(RPMPackageRecipe, CPackageRecipe):
    name = 'libcap'
    version = '2.16'
    rpmRelease = '2.fc11'
    rpmPatches = [ 'libcap-2.16-headerfix.patch' ]
    buildRequires = [ 'pam:devel', 'attr:devel' ]

    def setup(r):
        RPMPackageRecipe.unpack(r)
        # we do not have a traditional C compiler!
        r.Make('PREFIX=%(prefix)s LIBDIR=%(essentiallibdir)s SBINDIR=%(sbindir)s'
               ' INCDIR=%(includedir)s MANDIR=%(mandir)s COPTFLAG="%(cflags)s"')

        r.MakeInstall(' LIBDIR=%(destdir)s%(essentiallibdir)s'
                      ' SBINDIR=%(destdir)s%(sbindir)s'
                      ' INCDIR=%(destdir)s%(includedir)s'
                      ' MANDIR=%(destdir)s%(mandir)s/'
                      ' COPTFLAG="%(cflags)s"',
                        rootVar='FAKEROOT')
        r.Move('doc/*.3', '%(mandir)s/man3')
