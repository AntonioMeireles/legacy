#
# Copyright (c) 2010 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class LibdesktopAgnostic(CPackageRecipe):
    name = 'libdesktop-agnostic'
    version = '0.3.90'
 
    buildRequires = ['GConf:devel', 
		'atk:devel', 
		'cairo:devel', 
		'fontconfig:devel', 
		'freetype:devel', 
		
		'glib:devel', 
		'gobject-introspection:devel',
		'gtk:devel', 
		'pango:devel', 
		'pkgconfig:devel',
		'pygobject:devellib',
		'pygobject:runtime',
		'pygtk:devel',
		'python:devel', 
		'make:runtime', 
		'vala:runtime'
		]
 
    def setup(r):
        r.addArchive('http://code.launchpad.net/libdesktop-agnostic/0.4/%(version)s/+download/')
        r.Run(''' sed -i 's|repository version="1.0"|repository version="1.2"|' \
    gen_src/libdesktop-agnostic/DesktopAgnostic*.gir ''')
	r.Run('./waf --prefix=%(prefix)s --libdir=%(libdir)s --sysconfdir=%(sysconfdir)s --config-backends=gconf --vfs-backends=gio --desktop-entry-backends=glib --with-glade configure')
	r.Make(makeName='./waf')
	r.Run('./waf --destdir=%(destdir)s install')
        r.FixupMultilibPaths(exceptions='.*')
