loadRecipe('gnomepackage.recipe')
class Gvm(GnomePackageRecipe):

    buildRequires = [ 'hal:devel', 'dbus:devel', 'GConf:devel', 
        'ORBit2:devel', 'atk:devel', 'glib:devel', 'glibc:devel', 
        'gnome-vfs:devel', 'libart_lgpl:devel', 'libbonobo:devel', 
        'libbonoboui:devel', 'libglade:devel', 'libgnome:devel', 
        'libgnomecanvas:devel', 'libgnomeui:devel', 'libxml2:devel', 
        'pango:devel', 'popt:devel', 'cairo:devel', 'libgksuui1.0:devel',
        'dbus-glib:devellib', 'fontconfig:devel',
        'freetype:devel', 'gnome-keyring:devel',
        'libpng:devel', 'libnotify:devel', 'GConf:runtime',
        'desktop-file-utils:runtime', 'gettext:runtime',
        'nautilus:runtime', 'perl:runtime' ]

    name = 'gnome-volume-manager'
    version = '2.17.0'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.extraConfig += ' '
        r.macros.optflags = '-g -Os'
        r.addPatch('defaults.patch')

        r.addPatch('http://librarian.launchpad.net/7412466/gnome-volume-manager_2.17.0-2ubuntu1.diff.gz')

        ubuntuPatches = [
            # '01_set_defaults.patch',
            '07_low_disk_space_no_media.patch',
            '09_low_disk_space_always_show_mountpoint.patch',
            '93_ubuntu_foreground_user.patch',
            # '94_ubuntu_xfce-autostart.patch',
            '95_ubuntu_auto_unmount_notifications.patch']

        for p in  ubuntuPatches:
            r.Run(' patch -p1 < debian/patches/%s' % p)


