loadRecipe('gnomepackage.recipe')
class Gvm(GnomePackageRecipe):

    buildRequires = [ 'hal:devel', 'dbus:devel', 'GConf:devel', 
        'ORBit2:devel', 'atk:devel', 'glib:devel', 'glibc:devel', 
        'gnome-vfs:devel', 'libart_lgpl:devel', 'libbonobo:devel', 
        'libbonoboui:devel', 'libglade:devel', 'libgnome:devel', 
        'libgnomecanvas:devel', 'libgnomeui:devel', 'libxml2:devel', 
        'pango:devel', 'popt:devel', 'cairo:devel', 'libgksuui1.0:devel',
        'dbus-glib:devellib', 'fontconfig:devel',
        'freetype:devel', 'gnome-keyring:devel',
        'libpng:devel', 'libnotify:devel', 'GConf:runtime',
        'desktop-file-utils:runtime', 'gettext:runtime',
        'nautilus:runtime', 'perl:runtime' ]

    name = 'gnome-volume-manager'
    version = '2.17.0'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.extraConfig += ' --with-mount-command="/usr/bin/pmount-hal %%h; /usr/bin/pmount %%d" --with-unmount-command="/usr/bin/pumount %%d" --disable-multiuser'
        r.macros.optflags = '-g -Os'
        r.addPatch('defaults.patch')
        r.addPatch('02_pmount_crypt.patch')
        r.addPatch('03_no_gnome_mount.patch')
        r.addPatch('07_low_disk_space_no_media.patch')
        r.addPatch('09_low_disk_space_always_show_mountpoint.patch')
        r.addPatch('91_ubuntu-remove_default_audio_dev.patch')
        r.addPatch('92_ubuntu-new_audio_notification.patch')
        r.addPatch('93_ubuntu_foreground_user.patch')
        r.addPatch('94_ubuntu_xfce-autostart.patch')
        r.addPatch('95_ubuntu_auto_unmount_notifications.patch')
