#
# Copyright (c) 2009 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class LohitFonts(PackageRecipe):
    name='lohit-fonts'
    version='2.3.0'

    buildRequires = ['fontconfig:runtime', 'mkfontdir:runtime' ]

    def setup(r):
        # building from source requires fontforge, so we include only .ttf
        # files here.
        # r.addSvnSnapshot('http://svn.fedorahosted.org/svn/lohit/branches/lohit_2_3_0')
        r.addArchive('%(name)s-%(version)s.tar.gz')
        fontlist = { 'bn' : 'bengali',
                     'gu' : 'gujarati', 
                     'hi' : 'hindi',
                     'kn' : 'kannada',
                     'ml' : 'malayalam',
                     'or' : 'oriya',
                     'pa' : 'punjabi',
                     'ta' : 'tamil',
                     'te' : 'telugu',
                     'mr' : 'marathi',
                     'mai' : 'maithili',
                     'kok' : 'konkani',
                     'ks' : 'kashmiri',
                     'sd' : 'sindhi',
                     'ne' : 'nepali' }

        r.MakeDirs('%(docdir)s/%(name)s-%(version)s')
        r.Install('README', '%(docdir)s/%(name)s-%(version)s', mode=0644)
        r.Install('COPYING', '%(docdir)s/%(name)s-%(version)s', mode=0644)
        r.Install('AUTHORS', '%(docdir)s/%(name)s-%(version)s', mode=0644)
        r.Install('ChangeLog', '%(docdir)s/%(name)s-%(version)s', mode=0644)
        for font in fontlist.keys():
            fontdir = '%%(datadir)s/fonts/%s' % fontlist[font]
            fontfile = fontlist[font] + '/lohit_' + font + '.ttf'
            r.MakeDirs(fontdir)
            r.Install(fontfile, fontdir, mode=0644)
            r.PackageSpec('fonts-' + fontlist[font], '%(datadir)s/fonts/' + fontfile)
