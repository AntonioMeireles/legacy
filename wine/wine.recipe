#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Wine(CPackageRecipe):
    name = 'wine'
    version = '0.9.38'

    buildRequires = [ 'alsa-lib:devel', 'flex:runtime',
        'freeglut:devel', 'freetype:devel', 'glib:devel',
        'lcms:devel', 'libieee1284:devel', 'libjpeg:devel',
        'libusb:devel', 'libxml2:devel', 'libxslt:devel',
        'openldap:devel','pkgconfig:devel', 'libXxf86vm:devel', 
        'zlib:devel', 'audiofile:devel', 'esound:devel',
        'esound:devel', 'perl:lib', 'fontconfig:runtime',
        'fontforge:runtime', 'libgphoto2:devel', 'libXmu:devel',
        'bison:runtime', 'hal:devel', 'dbus:devel', 'cups:devel',
        'ncurses:devel', 'libungif:devel', 'Mesa:devel',
        'libICE:devel', 'libSM:devel', 'libX11:devel',
        'libXext:devel', 'libXi:devel', 'sane-backends:devel' ]

    def setup(r):
        r.addArchive('http://ibiblio.org/pub/linux/system/emulators/wine/')

        r.Configure('--sysconfdir=%(sysconfdir)s/wine')
        r.Make()
        r.MakePathsInstall('includedir=%(destdir)s%(includedir)s/wine '
                           'sysconfdir=%(destdir)s%(sysconfdir)s/wine '
                           'dlldir=%(destdir)s%(libdir)s/wine '
                           'LDCONFIG=/bin/true UPDATE_DESKTOP_DATABASE=/bin/true')

        r.CheckSonames(exceptions='%(libdir)s/libwine.*')

        r.TagSpec('desktop-file', '%(datadir)s/applications/wine.desktop')
