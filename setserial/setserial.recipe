#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Setserial(AutoPackageRecipe):

    buildRequires = [ 'groff:runtime' ]
    name = 'setserial'
    version = '2.17'

    def unpack(r):
        srpm = 'ftp://ftp.redhat.com/pub/redhat/linux/enterprise/3/en/os/i386/SRPMS/setserial-%(version)s-12.src.rpm'
        r.addArchive('setserial-%(version)s.tar.gz', rpm=srpm)
        r.addPatch('setserial-2.17-fhs.patch', rpm=srpm)
        r.addPatch('setserial-2.17-rc.patch', rpm=srpm)
        r.addPatch('setserial-2.17-readme.patch', rpm=srpm)
        r.addPatch('setserial-2.17-spelling.patch', rpm=srpm)
        r.Run('rm -f config.cache')
    def makeinstall(r):
        r.MakeDirs('%(bindir)s')
        r.MakeDirs('%(mandir)s/man8')
        r.MakePathsInstall()
        r.Remove('%(bindir)s/man8', recursive=True)
        r.AutoDoc('rc.serial')
