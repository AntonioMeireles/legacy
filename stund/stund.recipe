#
# Copyright (c) 2010 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class StunD(CPackageRecipe):
    name = 'stund'
    version = '0.96_Aug13'

    buildRequires = [
        'chkconfig:runtime', 'libstdc++:devel',
    ]

    def setup(r):
        r.addArchive('mirror://sourceforge/project/stun/stun/0.96/stund_0.96_Aug13.tgz')
        r.addPatch('stunhack.patch') # original very broken, cheap hack to fix
        r.addSource('stunserver.init', dest='%(initdir)s/stunserver')
        r.addSource('stunserver.sysconfig',
                    dest='%(sysconfdir)s/sysconfig/stunserver')

        r.Make()
        r.Install('server', '%(sbindir)s/stunserver')
