#
# Copyright (c) 2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('kernelmodulepackage')
class Btrfs(KernelModulePackageRecipe):
    name = 'btrfs'
    version = '0.16'
    #hgRevision = None
    hgRevision = '677'

    if hgRevision:
        version += '+' + hgRevision

    def unpack(r):
        if r.hgRevision:
            r.addMercurialSnapshot('http://www.kernel.org/hg/index.cgi/'
                'btrfs/kernel/', tag=r.hgRevision)
        else:
            r.addArchive('http://www.kernel.org/pub/linux/kernel/'
                'people/mason/btrfs/', keyid='517D0F0E')

        r.Make('version')
