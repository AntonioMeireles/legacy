#
# Copyright (c) 2004-2005 rpath, Inc.
# All rights reserved
#

class Anaconda(PackageRecipe):
    name = "anaconda"
    version = "10.2.1.5"

    buildRequires = [ 'atk:devel', 'bogl:devel', 'bogl:runtime',
                      'kudzu:devel', 'kudzu:python', 'pump:devel',
                      'newt:devel', 'rhpl:python', 'pciutils:devel',
                      'gtk:devel', 'popt:devel', 'e2fsprogs:devel',
                      'slang:devel', 'pango:devel', 'pkgconfig:devel',
                      'gettext:runtime', 'xorg-x11:devel',
                      'glib:devel', 'zlib:devel', 'glibc:locale',
                      'python:devel', 'bzip2:devel' ]

    if Arch.x86:
        buildRequires.extend([ 'dietlibc:runtime', 'dietlibc:devel' ])

    def setup(r):
	r.addArchive('anaconda-%(version)s.tar.bz2')
	r.addPatch('rpath_foresight.patch')
	r.Replace('showMinimal = 1','showMinimal = 0','installclass.py', 'installclasses/custom.py')
	r.Make('depend')
        r.Make()
	r.MakeInstall()
        # keep _isys.so in /usr/lib/anaconda/ instead of /usr/lib64/anaconda
        # since anaconda doesn't know about lib64 yet
        r.FixupMultilibPaths(exceptions='.*')

