#
# Copyright (c) 2004 Specifix, Inc.
# All rights reserved
#

loadSuperClass('gnomepackage.recipe')
class GnomeCupsManager(GnomePackageRecipe):
    buildRequires = [ 'libgnomeui:devel', 'cups:devel', 'desktop-file-utils:runtime', 'libgnomecups:devel',
		'GConf:devel', 'ORBit2:devel', 'atk:devel', 'cairo:devel', 'fontconfig:devel', 'freetype:devel',
		'glib:devel', 'gnome-keyring:devel', 'gnome-vfs:devel', 'libart_lgpl:devel', 'libbonobo:devel',
		'libbonoboui:devel', 'libglade:devel', 'libgnome:devel', 'libgnomecanvas:devel', 'libpng:devel',
		'libstdc++:devel', 'libxml2:devel', 'pango:devel', 'popt:devel', 'samba:devel' ]

    name = 'gnome-cups-manager'
    version = '0.31'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        # unbrand the test page, leaving the xd2- version for folks
        # who would prefer it
        for testsize in ('a4', 'letter'):
            r.addSource('testpage-%s.ps' %testsize)
        r.addAction("sed -i 's/xd2-//' libgnomecups/gnome-cups-ui-util.c")

    def install(r):
        GnomePackageRecipe.install(r)
        for testsize in ('a4', 'letter'):
            r.Install('testpage-%s.ps' %testsize,
                      '%(datadir)s/gnome-cups-manager/')
        for program in ('gnome-cups-add', 'gnome-cups-manager'):
            r.Move('%(bindir)s/'+program, '%(sbindir)s/')
            r.ConsoleHelper('%(bindir)s/'+program, '%(sbindir)s/'+program,
                session=True, timestamp=True)
	r.addSource('gnome-cups-manager.png')
	r.addSource('gnome-cups-manager.desktop')
	r.Install('gnome-cups-manager.png', '%(datadir)s/pixmaps/gnome-cups-manager.png')
	r.Desktopfile('gnome-cups-manager.desktop')	
