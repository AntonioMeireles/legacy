#
# Copyright (C) 2005-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Psutils(CPackageRecipe):
    name = 'psutils'
    version = '1.17'

    buildRequires = [ 'perl:runtime', 'unzip:runtime' ]

    def setup(r):
        r.addArchive('mirror://sourceforge/gnuwin32/psutils-%(version)s-src.zip', dir='psutils')
        r.addPatch('psutils-Makefile.patch')
        r.Make('-f Makefile.unix PAPER="letter"', dir='src')
        r.MakeInstall('-f Makefile.unix MANDIR=%(destdir)s/%(mandir)s/man1'
                      ' DESTDIR=%(destdir)s install', dir='src')
        r.Replace('#\!perl', '#!/usr/bin/perl', '%(bindir)s/{fix*,extractres}')
