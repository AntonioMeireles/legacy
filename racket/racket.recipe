#
# Copyright (c) 2011 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Racket(AutoPackageRecipe):
    name = 'racket'
    version = '5.1.3'
 
    buildRequires = ['libffi:devel','freetype:devel','openjpeg:devel','pango:devel','libpng:devel','openssl:devel','libXaw:devel','libXft:devel','Mesa:devel','libX11:devel','libXrender:devel','cairo:devel','gtk:devel'] 
 
    def setup(r):
        r.addArchive('http://download.racket-lang.org/installers/%(version)s/%(name)s/%(name)s-%(version)s-src-unix.tgz')
        #r.addGitSnapshot('http://git.racket-lang.org/plt.git',tag='6b519f7b646ca27a9a196995e80c64b230f8e1cd')
        #r.macros.cflags = re.sub('-D_FORTIFY_SOURCE=2', ' ', r.macros.cflags)
        #r.macros.cflags = re.sub('-fstack-protector', ' ', r.macros.cflags)
        #r.macros.cflags = ''
        #r.macros.ldlags = ''
        r.Configure('--enable-shared', dir='src/')
        #r.Run('./configure --prefix="%(prefix)s" --enable-shared', dir='src/')
        r.Make(dir='src/')
        #r.Run('make', dir='src/')
        r.MakeInstall(dir='src/')
        #r.Run('make DESTDIR="%(destdir)s" install', dir='src/')
