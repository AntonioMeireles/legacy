#
# Copyright (c) 2010 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#
import datetime
class Smuxi(AutoPackageRecipe):
    name = 'smuxi'
    svnVersion = '25059bc7'
    version = '0.8+' + svnVersion + '+' + datetime.date.today().strftime("%Y.%m.%d")
 
    buildRequires = [ 'desktop-file-utils:runtime', 'gettext:runtime', 'gnome-sharp:cil', 'gnome-sharp:devellib', 'gtk-sharp:cil', 'gtk-sharp:devellib', 'intltool:runtime', 'log4net:cil', 'log4net:devellib', 'mono:cil', 'mono:devel', 'mono:runtime', 'nini:cil', 'nini:devellib', 'perl:runtime', 'pkgconfig:devel', 'automake:runtime', 'autoconf:runtime', 'git:runtime', 'intltool:devel', 'notify-sharp:cil', 'notify-sharp:devellib', 'libindicate:cil']
 
    def unpack(r):
        r.addGitSnapshot('git://git.qnetp.net/smuxi.git')
        r.addGitSnapshot('git://git.qnetp.net/smartirc4net.git', dir='smuxi-master/lib/SmartIrc4net')
        r.addAction(""" mv lib/SmartIrc4net/smuxi-master/* lib/SmartIrc4net/ """)
        r.addGitSnapshot('git://git.qnetp.net/twitterizer.git', dir='smuxi-master/lib/Twitterizer')
        r.addAction(""" mv lib/Twitterizer/smuxi-master/* lib/Twitterizer/ """)
        r.addGitSnapshot('git://git.qnetp.net/json-net.git', dir='smuxi-master/lib/Newtonsoft.Json')
        r.addAction(""" mv lib/Newtonsoft.Json/smuxi-master/* lib/Newtonsoft.Json/ """)
        r.addGitSnapshot('git://git.qnetp.net/db4o-net.git', dir='smuxi-master/lib/db4o-net')
        r.addAction(""" mv lib/db4o-net/smuxi-master/* lib/db4o-net/ """)
        r.addPatch('FL-default-setting.patch')

    def configure(r):
        r.Configure('--with-notify', configureName='autogen.sh')

    def make(r):
        r.Make('-j1')
