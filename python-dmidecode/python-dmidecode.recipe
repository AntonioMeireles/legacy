#
# Copyright (c) 2010 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class PythonDmidecode(CPackageRecipe):
    name = 'python-dmidecode'
    version = '3.10.10'

    buildRequires = [ 'libxml2:devel', 'python:devel',
                      'zlib:devel', 'libxml2:python', 'make:runtime']

    def setup(r):
        r.addArchive('http://src.autonomy.net.au/python-dmidecode/')
        r.Make('build')
        r.Run('python src/setup.py install --root=%(destdir)s')
        r.Requires(exceptDeps=r'soname\:\ ELF64\/libxml2mod\.so.*')
        arch = (Arch.x86_64 and 'x86_64') or 'x86'
        r.Requires(r'soname: %%(libdir)s/python%%(pyver)s/site-packages/libxml2mod.so(SysV %s)' % arch,
                   r'.*dmidecodemod\.so')
