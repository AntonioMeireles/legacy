#
# Copyright (c) 2007-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadInstalled('python')
class PythonMarkdown(PackageRecipe):

    name = 'python-markdown'
    version = '1.7'

    buildRequires = [ 'python-setuptools:python', 'unzip:runtime', 'python:devel' ]

    def setup(r):
        r.macros.pyver = Python.majversion
        r.macros.sitepkgs = '%(libdir)s/python%(pyver)s/site-packages'

        r.addArchive('http://downloads.sourceforge.net/%(name)s/markdown-%(version)s.zip')
        r.addSource('python-markdown', macros = True)
        r.addSource("mdx_codehilite.py",dir="%(sitepkgs)s/")

        r.Install('python-markdown', '%(bindir)s/', mode=0755)

        r.PythonSetup()

        # synthetic provides/requires to satisfy wrapper script in
        # python-markdown:runtime
        r.Requires('python-markdown:python', '%(bindir)s/python-markdown')


