class rhgb(PackageRecipe):

    buildRequires  = [ 'atk:devel', 'binutils:runtime', 'cairo:devel',
        'fontconfig:devel', 'freetype:devel', 'gawk:runtime', 'glib:devel',
        'glibc:devel', 'gtk:devel', 'libpng:devel', 'ncurses:devel',
        'pango:devel', 'pkgconfig:devel', 'popt:devel', 'vte:devel',
        'xorg-x11:devel', 'zlib:devel' ]

    name = "rhgb"
    version = "0.16.3"

    def setup(r):
        r.macros.rpmrevision = "1"
        r.addArchive('rhgb-%(version)s.tar.gz',
            rpm='http://download.fedora.redhat.com/pub/fedora/linux/core/5/source/SRPMS/rhgb-%(version)s-%(rpmrevision)s.src.rpm')
        r.addSource('system-logo.png')
	r.addSource('large-computer.png')
        r.Replace('<xf86Parser.h>','"/usr/X11R6/include/xf86Parser.h"', 'src/set-keymap.c')
        r.Configure()
        r.Make()
        r.MakeInstall()
        r.Install('system-logo.png', '%(datadir)s/rhgb/')
	r.Install('large-computer.png', '%(datadir)s/rhgb/')
        r.MakeDirs('%(sysconfdir)s/rhgb/temp')
        r.ExcludeDirectories(exceptions='%(sysconfdir)s/rhgb/temp')

