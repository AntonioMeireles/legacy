#
# Copyright (c) 2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#
loadSuperClass('xfce-core-package.recipe')
class xfce4_session(xfceCorePackage):

    name = 'xfce4-session'
    version = '4.4.2'

    extraConfig = '--enable-session-screenshots'

    def setup(r):
        xfceCorePackage.setup(r)
        r.addSource('themerc', dir='%(datadir)s/themes/Foresight/balou/', mode = 0644)
        r.addSource('logo.png', dir='%(datadir)s/themes/Foresight/balou/', mode = 0644)
        r.addPatch('sessionrc.patch')
        r.addSource('xfce4-splash.rc', dir='%(sysconfdir)s/xdg/xfce4-session/', mode = 0644)
        # workaround uncomplete /etc/Xclients
        r.addSource('Xclients', dest='%(sysconfdir)s/skel/.Xclients', mode = 0755)
        r.Remove('%(sysconfdir)s/xdg/autostart/xfce4-tips-autostart.desktop')
    def policy(r):
        xfceCorePackage.policy(r)
        r.Requires('sudo:runtime', '%(bindir)s/xfce4-session')

