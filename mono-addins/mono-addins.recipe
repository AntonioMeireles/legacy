#
# Copyright (c) 2007-2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#
loadSuperClass('rpmpackage')
class MonoAddins(RPMPackageRecipe,AutoPackageRecipe):
    name = 'mono-addins'
    version = '0.4'
    rpmRelease = '6.20091702svn127062.1.fc11'
    tarballName = '%(name)s-127062.tar.bz2'

    buildRequires = ['gnome-sharp:cil', 'gnome-sharp:devellib', 'gtk-sharp:cil',
                     'gtk-sharp:devellib', 'mono:cil', 'mono:devel',
                     'mono:runtime', 'pkgconfig:devel', 'automake:runtime',
                     'autoconf:runtime', 'libtool:runtime',
                     ]
 
    def unpack(r):
        RPMPackageRecipe.unpack(r)
        
        r.Run("""sed -i -e 's!$(prefix)/lib/!%(libdir)s/!' mautil/Makefile.am ; sed -i -e 's!$(prefix)/lib!%(libdir)s!' configure.ac ; autoreconf -f -i -s """)

    def configure(r):
        r.Configure('--prefix=%(prefix)s --libdir=%(libdir)s --enable-gui')
