#
# Copyright (c) 2008-2011 The Foresight Linux Project
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('kernelmodulepackage')
class TPsmapiKMOD(KernelModulePackageRecipe):
    name = 'tp_smapi-kernel'
    version =  '0.41'

    moduleDir = 'updates'

    def unpack(r):
        # r.addArchive('http://downloads.sourceforge.net/tpctl/tp_smapi/0.41/tp_smapi-%(version)s.tgz')
        r.addArchive('http://ftp.de.debian.org/debian/pool/main/t/tp-smapi/tp-smapi_%(version)s.orig.tar.gz')

    def build(r):
        r.Make("KVER=%(kver)s HDAPS=1")

    def policy(r):
        # if we install this we want matching userland...
        r.Requires('hdapsd:runtime', '/lib/modules/%(kver)s/.*')

