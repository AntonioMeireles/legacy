

class TrytonPackage(PackageRecipe):
    name = 'trytonpackage'
    version = '1.6.0'
    download_url = None
    url = "http://www.tryton.org"
    
    prebuild = []
    buildRequires = ['python-setuptools:python']

    def setup(r):
        if r.__class__.__name__ == 'TrytonPackage':
            return

        r.macros.tryver = r.version[:3]
        r.buildRequires.extend(r.prebuild)
        if "trytond_" in r.name:
            r.buildRequires.extend(['python:devel', 'trytond:python'])
        if r.download_url:
            r.addArchive(r.download_url)
        else:
            r.addArchive("http://downloads.tryton.org/%(tryver)s/")
        r.PythonSetup(data='--install-data=%(prefix)s')
        if "trytond_" in r.name:
            file = "%(builddir)s/__tryton__.py" % r.macros
            print file
            tryton_module = __import__(file)
            #r.macros.tytron_module_name = r.name.split("_")[]
            #r.Requires("python: trytond.modules.%(tryton_module_name)s.__tryton__")


