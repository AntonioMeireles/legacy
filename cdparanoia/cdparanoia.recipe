#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpmpackage')
class Cdparanoia(RPMPackageRecipe, CPackageRecipe):
    name = 'cdparanoia'
    version = '9.8'

    rpmUpVer = 'alpha%(version)s'
    rpmRelease = '27.2'

    def setup(r):
        r.disableParallelMake()
        r.addArchive('http://www.xiph.org/paranoia/download/%(name)s-III-alpha%(version)s.src.tgz')
        r.addPatch('cdparanoia-9.8-gcc-3.4.4.patch', level=1)
        r.addPatch('cdparanoia-III-alpha9.8.sgio.patch', rpm=r.srpm)

        r.Configure()
        r.Make('OPT="%(cflags)s"')

        r.MakeInstall('BINDIR=%(destdir)s/%(bindir)s'
                      ' MANDIR=%(destdir)s/%(mandir)s'
                      ' INCLUDEDIR=%(destdir)s/%(includedir)s'
                      ' LIBDIR=%(destdir)s/%(libdir)s')
