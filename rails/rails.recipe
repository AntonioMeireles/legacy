#
# Copyright (c) 2006-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Rails(PackageRecipe):
    name = 'rails'
    version = '1.2.5'

    buildRequires = [ 'ruby:runtime', ]

    def setup(r):
        r.addArchive('http://rubyforge.org/frs/download.php/26563/')
        r.addSource('rails', macros=True, mode=0755, dest='%(bindir)s/')
        r.addSource('rails.1', macros=True, mode=0644, dest='%(mandir)s/')

        # Install required libraries in site_ruby directory
        r.Install('vendor/rails/railties', '%(libdir)s/ruby/site_ruby/',
                  mode=0644)

        # This is used by /usr/bin/rails by default
        r.Doc('doc/api')

        r.Requires('actionmailer:ruby', '%(libdir)s/ruby/site_ruby/.*')
        r.Requires('actionpack:ruby', '%(libdir)s/ruby/site_ruby/.*')
        r.Requires('actionwebservice:ruby', '%(libdir)s/ruby/site_ruby/.*')
        r.Requires('activerecord:ruby', '%(libdir)s/ruby/site_ruby/.*')
        r.Requires('activesupport:ruby', '%(libdir)s/ruby/site_ruby/.*')
