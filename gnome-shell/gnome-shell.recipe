#
# Copyright (c) 2009 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage')
class GnomeShell(GnomePackageRecipe):
    name = 'gnome-shell'
    version = '2.28.0'

    buildRequires = [
        'GConf:devellib',
        'GConf:runtime',
        'clutter:devellib',
        'desktop-file-utils:runtime',
        'gir-repository:data',
        'gjs:devellib',
        'gnome-desktop:devellib',
        'gnome-menus:devellib',
        'gnome-python:python',
        'gobject-introspection:runtime',
        'gstreamer:devel',
        'libXScrnSaver:devellib',
        'libcroco:devellib',
        'libgsf:devellib',
        'librsvg:devellib',
        'libwnck:devellib',
        'mutter:devellib',
        'mutter:runtime',
        'python:devel',
    ]

    extraConfig = GnomePackageRecipe.extraConfig
    # we are not interested in compile-warnings
    extraConfig += ' --enable-compile-warnings=no'

    GnomePackageRecipe.preMake += ' LIBS="-lgsf-1 -lcroco-0.6"'

    def policy(r):
        r.RemoveNonPackageFiles(exceptions='.*\.la')
        GnomePackageRecipe.policy(r)
