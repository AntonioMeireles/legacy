#
# Copyright (c) 2009 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#


class GnomeShell(PackageRecipe):
    name = 'gnome-shell'
    version = '2010.01.30'

    buildRequires = [
        'GConf:devellib',
        'GConf:runtime',
        'clutter:devellib',
        'desktop-file-utils:runtime',
        'gir-repository:data',
        'gjs:devellib',
        'gnome-desktop:devellib',
        'gnome-menus:devellib',
        'gnome-python:python',
        'gobject-introspection:runtime',
        'gstreamer:devel',
        'libXScrnSaver:devellib',
        'libcroco:devellib',
        'libgsf:devellib',
        'librsvg:devellib',
        'libwnck:devellib',
        'mutter:devellib',
        'mutter:runtime',
        'python:devel',
	'binutils:runtime', 
	'dbus-glib:devel', 
	'dbus-python:python', 
	'file:runtime', 
	'gettext:runtime', 
	'intltool:runtime', 
	'libtool:runtime',
	'autoconf:runtime',
	'make:runtime', 
	'pkgconfig:devel',
	'diffutils:runtime', 
	'which:runtime',
	'gnome-common:runtime',
	'gcc:runtime',
    ]

    # extraConfig = GnomePackageRecipe.extraConfig
    # we are not interested in compile-warnings
    # extraConfig += ' --enable-compile-warnings=no'
    def setup(r):
	r.addGitSnapshot('git://git.gnome.org/gnome-shell', tag='05e3a747d07e')
	r.Configure('--enable-compile-warnings=no', configureName='./autogen.sh')
	r.Make()
	r.MakeInstall()
    def policy(r):
        r.Requires('pkgconfig:runtime', '%(bindir)s/gnome-shell') # line 111
