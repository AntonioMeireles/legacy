#
# Copyright (c) 2007-2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage')
class Yelp(GnomePackageRecipe):

    name = 'gnome-hdaps-applet'
    version = '20081204'

    buildRequires = [ 'GConf:devel', 'ORBit2:devel', 'gnome-panel:devel', 'libart_lgpl:devel', 'libbonobo:devel', 'libbonoboui:devel', 'libgnome:devel', 'libgnomecanvas:devel', 'popt:devel' ]

    def setup(r):
        r.addArchive('http://www.dresco.co.uk/hdaps/', dir='%(name)s-%(version)s')

        # (1) Compile the applet using the following command line -
        r.Run('%(cc)s $(pkg-config --cflags --libs libpanelapplet-2.0) -o gnome-hdaps-applet gnome-hdaps-applet.c')

        # Copy the compiled gnome-hdaps-applet file to "/usr/bin/"
        r.Install('gnome-hdaps-applet', '%(bindir)s/', mode = 0755)

        # (3) Copy the .png files to a new directory "/usr/share/pixmaps/gnome-hdaps-applet/"
        r.Install('*.png', '%(datadir)s/pixmaps/gnome-hdaps-applet/')

        # (4) Copy the GNOME_HDAPS_StatusApplet.server file to "/usr/lib/bonobo/servers/"
        r.Install('GNOME_HDAPS_StatusApplet.server', '%(libdir)s/bonobo/servers/')
        
        #
        r.Requires('hdapsd:runtime', '%(bindir)s/gnome-hdaps-applet')
