#
# Copyright (c) 2005-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('xorgcpackage.recipe')
class LibXfont(XorgCPackageRecipe):
    name = 'libXfont'
    version = '1.2.7'
    component = 'lib'

    buildRequires = [ 'fontcacheproto:devel', 'fontsproto:devel',
        'freetype:devel', 'libfontenc:devel', 'xproto:devel', 'xtrans:devel',
        'zlib:devel' ]

    extraConfig = ' --with-encodingsdir=%(datadir)s/X11/encodings'
    def unpack(r):
        r.addArchive('mirror://xorg/individual/%(component)s/')

        # X.Org security advisory, April 3rd, 2007
        # Multiple vulnerability in X server, libXfont and libX11
        # CVE IDs: CVE-2007-1003 CVE-2007-1351 CVE-2007-1352 CVE-2007-1352
        # (FL-223)

        r.addPatch("http://xorg.freedesktop.org/archive/X11R7.2/patches/xorg-libXfont-1.2.7-bdf-fontdir.diff")

