#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpmpackage')
class Popt(RPMPackageRecipe, CPackageRecipe):
    name = 'popt'
    # the canonical source for this package is within the source to rpm itself
    version = '4.4.2'
    rpmRelease = '31'
    rpmName = 'rpm'
    tarballName = 'rpm-%(version)s.tar.gz'

    conf = ('--prefix=%(prefix)s '
            '--exec-prefix=%(exec_prefix)s '
            '--bindir=%(bindir)s '
            '--sbindir=%(sbindir)s '
            '--sysconfdir=%(sysconfdir)s '
            '--datadir=%(datadir)s '
            '--includedir=%(includedir)s '
            '--libdir=/usr/lib '
            '--libexecdir=%(libexecdir)s '
            '--localstatedir=%(localstatedir)s '
            '--sharedstatedir=%(sharedstatedir)s '
            '--mandir=%(mandir)s '
            '--infodir=%(infodir)s ')

    def setup(r):
        r.unpack()
        if Use.bootstrap:
            r.conf += ' --target=%(target)s --host=%(host)s --build=%(build)s'
        r.ManualConfigure(r.conf, dir='popt')
        r.Make(dir='popt')
        r.MakeInstall(dir='popt')
