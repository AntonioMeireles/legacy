#
# Copyright (c) 2004-2005 rpath, Inc.
# All rights reserved
#

loadSuperClass('gnomepackage.recipe')
class DesktopPrinting(GnomePackageRecipe):
    
    buildRequires = [ 'libgnomeui:devel', 'dbus:devel', 'hal:devel',
                      'desktop-file-utils:runtime', 'intltool:runtime',
                      'libgnomecups:devel', 'gnome-keyring:devel',
                      'cups:devel' ]

    name = 'desktop-printing'
    version = '0.18'

    extraConfig = ''
    preMakeInstall = 'GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1'

    def unpack(r):
	srpm = 'http://download.fedora.redhat.com/pub/fedora/linux/core/4/SRPMS/desktop-printing-0.18-10.src.rpm'
	r.mainDir('eggcups-%(version)s')
	r.addArchive('eggcups-%(version)s.tar.bz2', rpm=srpm)
	r.addPatch('eggcups-0.18-cvs-backport.patch', rpm=srpm)
	r.Install('icon.png','%(datadir)s/pixmaps/gnome-default-printer.png')

    def install(r):
	GnomePackageRecipe.install(r)
	r.Install('icon.png','%(datadir)s/pixmaps/gnome-default-printer.png')
