#
# Copyright (c) 2005 rpath, Inc.
# All rights reserved
#

loadSuperClass('kernelmodulepackage')
class Ipw2200(KernelModulePackageRecipe):

    name = 'ipw2200'
    version = '1.0.6'
    
    def unpack(r):
	r.addArchive('http://unc.dl.sourceforge.net/sourceforge/%(name)s/%(name)s-%(version)s.tgz')

    def build(r):
        r.Replace(('/sbin/depmod.*', '@/bin/true'),
                  ('^install: modules', 'install:'),
                  'Makefile')
        r.Make('KVER=%(kver)s modules')
        # This makefile doesn't have a nice way to deal with DESTDIR
        r.Make('KVER=%(kver)s'
               ' KMISC=%(destdir)s/lib/modules/%(kver)s/drivers/net/wireless/'
               ' install')
        r.AutoDoc('CHANGES')
