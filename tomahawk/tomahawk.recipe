# vim:set ts=4 sw=4 et:
#
# Copyright (c) 2012 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Tomahawk(AutoPackageRecipe):
    name = 'tomahawk'
    version = '0.4.0'
 
    buildRequires = [
                    'attica:devel',
                    'clucene:devel',
                    'cmake:runtime',
                    'desktop-file-utils:runtime',
                    'fftw:devel',
                    'gcc-c++:runtime',
                    'jreen:devel',
                    'kdelibs:config',
                    'libICE:devel',
                    'libSM:devel',
                    'libX11:devel',
                    'libXScrnSaver:devel',
                    'libXau:devel',
                    'libXcomposite:devel',
                    'libXcursor:devel',
                    'libXdamage:devel',
                    'libXdmcp:devel',
                    'libXext:devel',
                    'libXfixes:devel',
                    'libXft:devel',
                    'libXi:devel',
                    'libXinerama:devel',
                    'libXpm:devel',
                    'libXrandr:devel',
                    'libXrender:devel',
                    'libXt:devel',
                    'libXtst:devel',
                    'libXv:devel',
                    'libXxf86misc:devel',
                    'libechonest:devel',
                    'libsamplerate:devel',
                    'libstdc++:devel',
                    'phonon:devel',
                    'pkgconfig:devel',
                    'qca2:devel',
                    'qjson:devel',
                    'qt4-core:devellib',
                    'qt4-gui:devellib',
                    'qt4-qt3support:devellib',
                    'qt4-sql:devellib',
                    'qt4-sql:mysql',
                    'qt4-sql:odbc',
                    'qt4-sql:psql',
                    'qt4-sql:sqlite',
                    'qt4:devel',
                    'quazip:devel',
                    'taglib:devel',
                    ]
 
    def unpack(r):
        r.addArchive('http://downloads.tomahawk-player.org/')

    def configure(r):
        r.CMake('-DCMAKE_INSTALL_PREFIX=%(prefix)s -DCMAKE_INSTALL_LIBDIR=%(libdir)s -DCMAKE_INSTALL_LIBEXECDIR=%(libexecdir)s -DCMAKE_BUILD_TYPE=Release -DWITH_QTweetLib:BOOL=OFF')

    def policy(r):
        r.Requires('phonon-backend-gstreamer:data', '%(bindir)s/%(name)s')
