#
# Copyright (c) 2004-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('gnomepackage')
loadSuperClass('rpmpackage')
class Libbtctl(RPMPackageRecipe,GnomePackageRecipe):
    buildRequires = [ 'bluez-libs:devel', 'gettext:runtime', 'glib:devel', 'gtk-sharp:runtime',
                      'gtk-sharp:lib', 'gtk-sharp:devellib', 'mono:lib', 'openobex:devel', 'gnome-python:devel',
                      'gnome-python:python', 'python:devel', 'mono:devel', 'gtk-sharp:cil', 'mono:cil', 
                      'GConf:devel', 'ORBit2:devel', 'gnome-vfs:devel', 'unixODBC:devel']

    name = "libbtctl"
    version = '0.10.0'
    rpmRelease = '9.fc11'
    rpmPatches = ['libbtctl-bluez4.patch']
    # FIXME
    #    extraConfig = ' --with-mono'
    extraConfig = ' --disable-mono '
    def unpack(r):
        r.Environment('MONO_SHARED_DIR', '/tmp')
        RPMPackageRecipe.unpack(r)
        r.Replace('\$\(DESTDIR\)\$\(MONO_INSTDIR\)/lib', '\$\(DESTDIR\)\$%(libdir)s', 'mono/libbtctl/Makefile.*')

#    def policy(r):
#         r.Replace('libdir=\${exec_prefix}/lib', 'libdir=%(libdir)s', '%(libdir)s/pkgconfig/*-sharp.pc')
