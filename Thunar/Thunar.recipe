#
# Copyright (c) 2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#
loadSuperClass('xfce-core-package.recipe')
class Thunar(xfceCorePackage):

    name = 'Thunar'
    version = '0.9.0'
    xfce = '4.4.2'

    buildRequires = [
        'libexif:devel', 'libexo:devel'
    ]

    Flags.gnome_thumbnailers = False
    if not Flags.gnome_thumbnailers:
        extraConfig = '--disable-gnome-thumbnailers'
    else:
        buildRequires.append('GConf:devel')

    def unpack(r):
        xfceCorePackage.unpack(r)
        r.addPatch('http://thunar.xfce.org/download/sources/Thunar/0.9.0/Thunar-0.9.0-missing-audio-cds-for-volman.patch')
        r.addPatch('http://bugzilla.xfce.org/attachment.cgi?id=1452')
        r.addPatch('http://thunar.xfce.org/download/sources/Thunar/0.9.0/Thunar-0.9.0-use-eject-where-necessary.patch')

    def policy(r):

        xfceCorePackage.policy(r)
        r.Run('echo >> %(destdir)s/%(sysconfdir)s/xdg/Thunar/uca.xml')

