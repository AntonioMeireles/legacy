#
# Copyright (c) 2008-2011 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Libquicktime(AutoPackageRecipe):
    name = 'libquicktime'
    version = '1.2.2'

    buildRequires = [  'expat:devel', 
                       'ffmpeg:devel', 
                       'freetype:devel', 
                       'lame:devel', 
                       'libogg:devel', 
                       'Mesa:devel', 
                       'alsa-lib:devel', 
                       'libXaw:devel', 
                       'libXv:devel', 
                       'libdv:devel', 
                       'libjpeg:devel', 
                       'atk:devel', 
                       'cairo:devel', 
                       'fontconfig:devel', 
                       'gettext:runtime', 
                       'glib:devel', 
                       'gtk:devel', 
                       'intltool:runtime', 
                       'liboil:devel', 
                       'libpng:devel', 
                       'pango:devel', 
                       'pkgconfig:devel', 
                       'python:bin', 
                       'schroedinger:devel',
                       'x264:devel',
			]

    def unpack(r):
        r.addArchive('mirror://sourceforge/%(name)s/')

    def configure(r):
	r.Configure(' --with-libdv --enable-gpl --disable-rpath '
                    ' --disable-dependency-tracking --disable-static '
                    ' --with-cpuflags="%(cflags)s"'
                    ' --enable-libswscale --without-doxygen')
        r.Replace(('^hardcode_libdir_flag_spec=.*',
                   'hardcode_libdir_flag_spec=""'),
                  ('^runpath_var=LD_RUN_PATH',
                   'runpath_var=DIE_RPATH_DIE'),
                  'libtool')
