#
# Copyright (c) 2004-2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('gnomepackage')
class Nautilus(GnomePackageRecipe):

    buildRequires = [ 'glib:devel', 'gtk:devel', 'pango:devel',
        'libgnomeui:devel', 'eel:devel', 'gail:devel', 'gnome-vfs:devel',
        'gnome-desktop:devel', 'gamin:devel', 'desktop-file-utils:runtime',
        'startup-notification:devel', 'libexif:devel', 'librsvg:devel',
        'fontconfig:runtime', 'libxml2:devel',
        'intltool:runtime', 'GConf:devel', 'ORBit2:devel', 'atk:devel',
        'audiofile:devel', 'beagle:devel', 'cairo:devel', 'esound:devel',
        'fontconfig:devel', 'freetype:devel', 'gnome-keyring:devel',
        'libart_lgpl:devel', 'libbonobo:devel', 'libbonoboui:devel',
        'libglade:devel', 'libgnome:devel', 'libgnomecanvas:devel',
        'libpng:devel', 'popt:devel', 'GConf:runtime',
        'docbook-utils:runtime', 'gettext:runtime', 'glib:runtime',
        'perl:runtime', 'shared-mime-info:runtime', 'gvfs:devel',
                      'libbeagle:devel']

    name = 'nautilus'
    version = '2.22.5.1'

    extraConfig = '--disable-update-mimedb'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.macros.optflags = " -Os"
        r.addPatch('hide_computer.patch')
        r.addPatch('browse_mode.patch')
        r.addPatch('font.patch')
