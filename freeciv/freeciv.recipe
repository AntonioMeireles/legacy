# Gil Hamlin
# gil@foresightlinux.com
# 3rd August 2005

loadRecipe('gnomepackage.recipe')
class freeciv(GnomePackageRecipe):
    buildRequires = [ 'glibc:devel', 'SDL:devel', 'SDL_mixer:devel', 'alsa-lib:devel', 'atk:devel', 'audiofile:devel', 'cairo:devel', 'esound:devel', 'fontconfig:devel', 'freetype:devel', 'glib:devel', 'libpng:devel', 'ncurses:devel', 'pango:devel', 'readline:devel', 'gtk:devel', 'zlib:devel', ]

    name = "freeciv"
    version = "2.0.9"

    def setup(r):
        r.addArchive('ftp://ftp.freeciv.org/pub/freeciv/stable/%(name)s-%(version)s.tar.bz2')
	
	#getting default soundschema
	r.addSource('ftp://ftp.freeciv.org/freeciv/contrib/audio/soundsets/stdsounds3.tar.gz')
        r.Configure()
        r.Make()

	#making client use the standard schema per default
	r.Replace('civclient','civclient -S stdsounds','client/freeciv.desktop')
        r.MakeInstall()
	
	
	#unpacking it
	r.Run('tar -xzf stdsounds3.tar.gz')
	#installing it
	r.Install('data/*','%(datadir)s/%(name)s/')
#       Install the freeciv sound pack

#       Here are the docs

        r.Doc('AUTHORS', 'COPYING', 'README')
