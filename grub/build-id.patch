--- acinclude.m4.orig	2008-07-16 17:26:56.000000000 +0300
+++ acinclude.m4	2008-07-16 17:27:10.000000000 +0300
@@ -59,11 +59,11 @@ else
 fi
 grub_cv_prog_objcopy_absolute=yes
 for link_addr in 2000 8000 7C00; do
-  if AC_TRY_COMMAND([${CC-cc} ${CFLAGS} -nostdlib -Wl,-N -Wl,-Ttext -Wl,$link_addr -Wl,--build-id=none conftest.o -o conftest.exec]); then :
+  if AC_TRY_COMMAND([${CC-cc} ${CFLAGS} -nostdlib -Wl,-N -Wl,-Ttext -Wl,$link_addr conftest.o -o conftest.exec]); then :
   else
     AC_MSG_ERROR([${CC-cc} cannot link at address $link_addr])
   fi
-  if AC_TRY_COMMAND([${OBJCOPY-objcopy} -O binary conftest.exec conftest]); then :
+  if AC_TRY_COMMAND([${OBJCOPY-objcopy} -O binary -R .note.gnu.build-id conftest.exec conftest]); then :
   else
     AC_MSG_ERROR([${OBJCOPY-objcopy} cannot create binary files])
   fi
--- configure.in.orig	2008-07-16 17:25:06.000000000 +0300
+++ configure.in	2008-07-16 17:25:13.000000000 +0300
@@ -176,7 +176,7 @@ STAGE2_CFLAGS="$STAGE2_CFLAGS -isystem `
 LIBGCC=$(gcc $CFLAGS -static-libgcc -print-libgcc-file-name)
 AC_SUBST(LIBGCC)
 
-LOADER_LDFLAGS="-Wl,--build-id=none ${LIBGCC}"
+LOADER_LDFLAGS="${LIBGCC}"
 AC_SUBST(LOADER_LDFLAGS)
 
 if test "x$platform" = xefi; then
--- stage1/Makefile.am.orig	2008-07-16 17:28:34.000000000 +0300
+++ stage1/Makefile.am	2008-07-16 17:29:41.000000000 +0300
@@ -15,6 +15,6 @@ stage1_exec_SOURCES = stage1.S stage1.h
 
 SUFFIXES = .exec
 .exec:
-	$(OBJCOPY) -O binary $< $@
+	$(OBJCOPY) -O binary -R .note.gnu.build-id $< $@
 
 endif
--- stage1/Makefile.in.orig	2008-07-16 17:31:15.000000000 +0300
+++ stage1/Makefile.in	2008-07-16 17:31:28.000000000 +0300
@@ -450,7 +450,7 @@ uninstall-am: uninstall-nodist_pkgdataDA
 	tags uninstall uninstall-am uninstall-nodist_pkgdataDATA
 
 .exec:
-	$(OBJCOPY) -O binary $< $@
+	$(OBJCOPY) -O binary -R .note.gnu.build-id $< $@
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
--- stage2/Makefile.am.orig	2008-07-16 17:37:20.000000000 +0300
+++ stage2/Makefile.am	2008-07-16 17:37:40.000000000 +0300
@@ -306,6 +306,6 @@ pxegrub: pxeloader diskless
 # General rule for making a raw binary.
 SUFFIXES = .exec
 .exec:
-	$(OBJCOPY) -O binary $< $@
+	$(OBJCOPY) -O binary -R .note.gnu.build-id $< $@
 
 endif
--- stage2/Makefile.in.orig	2008-07-16 17:40:11.000000000 +0300
+++ stage2/Makefile.in	2008-07-16 17:39:48.000000000 +0300
@@ -4010,7 +4010,7 @@ uninstall-am: uninstall-pkgdataDATA
 	-rm -f $@
 	cat $^ > $@
 .exec:
-	$(OBJCOPY) -O binary $< $@
+	$(OBJCOPY) -O binary -R .note.gnu.build-id $< $@
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
