#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class FontForge(CPackageRecipe):
    name = 'fontforge'
    version = '20060715'
    docversion = '20060703'

    buildRequires = [ 'libtiff:devel', 'libpng:devel', 'libjpeg:devel',
        'freetype:devel', 'libxml2:devel', 'autotrace:devel',
        'libuninameslist:devel', 'xorg-x11:devel', 'gettext:runtime' ]

    Flags.multilayer = True

    def setup(r):
        r.macros.docversion = r.docversion
        r.macros.sf = 'mirror://sourceforge/fontforge'
        r.addArchive('%(sf)s/fontforge_full-%(version)s.tar.bz2')
        # docs do not go in %(thisdocdir)s because fontforge looks for
        # the docs and presents them to the user as help
        r.addArchive('%(sf)s/fontforge_htdocs-%(docversion)s.tar.bz2',
                     dir='%(docdir)s/%(name)s')

        config = ''
        if r.Flags.multilayer:
            config += ' --with-multilayer'
        r.Configure(config)
        r.Make()

        r.MakePathsInstall()

        r.Provides('file', '%(bindir)s/fontforge')
