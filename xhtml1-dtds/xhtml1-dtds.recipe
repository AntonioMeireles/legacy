#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Xhtml1Dtds(PackageRecipe):
    name = 'xhtml1-dtds'
    version = '1.0'

    buildRequires = [ 'libxml2:runtime',
                      'sgml-common:runtime' ]   # for tagdescription

    def setup(r):
        r.addArchive('http://www.w3.org/TR/xhtml1/xhtml1.tgz')

        r.Install('DTD/*.{dtd,ent}',
                  '%(datadir)s/sgml/xhtml1/xhtml1-20020801/DTD/')

        # install the catalog database
        catalog = 'xhtml1-dtds.xml'
        r.addSource(catalog, dest='%(tagdatadir)s/xml-catalog/desc.d/')

        # set up the catalog
        r.XMLCatalogEntry(catalog,
                          'public',
                          '-//W3C//DTD XHTML 1.0 Strict//EN',
                          'file://%(datadir)s/sgml/xhtml1/xhtml1-20020801/DTD/xhtml1-strict.dtd')
        r.XMLCatalogEntry(catalog,
                          'public',
                          '-//W3C//DTD XHTML 1.0 Transitional//EN',
                          'file://%(datadir)s/sgml/xhtml1/xhtml1-20020801/DTD/xhtml1-transitional.dtd')
        r.XMLCatalogEntry(catalog,
                          'public',
                          '-//W3C//DTD XHTML 1.0 Frameset//EN',
                          'file://%(datadir)s/sgml/xhtml1/xhtml1-20020801/DTD/xhtml1-frameset.dtd')
        r.XMLCatalogEntry(catalog,
                         'rewriteSystem',
                         'http://www.w3.org/TR/xhtml1/DTD',
                         'file://%(datadir)s/sgml/xhtml1/xhtml1-20020801/DTD')
        r.XMLCatalogEntry(catalog,
                          'rewriteURI',
                          'http://www.w3.org/TR/xhtml1/DTD',
                          'file://%(datadir)s/sgml/xhtml1/xhtml1-20020801/DTD')
