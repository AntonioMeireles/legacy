#
# Copyright (c) 2009 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class PythonCalibre(AutoPackageRecipe):
    name = 'calibre'
    version = '0.6.46'

    buildRequires = [
        'bzr:python',
        'dbus-python:python',
        'dnspython:python',
        'gcc-c++:runtime',
        'gcc:devel',
        'gcc:runtime',
        'help2man:runtime',
        'ImageMagick:devel',
        'libjpeg:devel',
        'libusb:devel',
        'lxml:python',
        'make:runtime',
        'mod_python:python',
        'mx:python',
        'PIL:python',
        'podofo:devel',
        'poppler:devel',
        'pyOpenSSL:python',
        'pyPdf:python',
        'PyQt4:python',
        'PyQt4:runtime',
        'python-dateutil:python',
        'python:devel',
        'python-mechanize:python',
        'python-setuptools:python',
        'qt4:devel',
        'sip:devel',
        'sip:python',
        'sip:runtime',
        'xdg-utils:runtime',
    ]

    def setup(r):
        r.addArchive('http://calibre.kovidgoyal.net/downloads/')

        r.Run("python setup.py install --prefix=%(prefix)s "
            "--bindir=%(bindir)s --libdir=%(libdir)s --sharedir=%(datadir)s "
            "--root=%(destdir)s "
            "--staging-bindir=%(destdir)s%(bindir)s "
            "--staging-libdir=%(destdir)s%(libdir)s "
            "--staging-sharedir=%(destdir)s%(datadir)s")
