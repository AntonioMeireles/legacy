#
# Copyright (c) 2009 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadInstalled('python')
class hgGit(BuildPackageRecipe):
    name = 'hg-git'
    version = 'tip'

    buildRequires = [ 'mercurial:python', 'python:devel', ]

    def setup(r):
        r.macros.sitepkgs = Python.sitepkgs
        r.addMercurialSnapshot('http://bitbucket.org/Scotty/hg-git/')
        r.addPatch('py24.patch')
        r.Install('dulwich', '*.py', '%(sitepkgs)s/hgext/hg-git/')
        r.Remove('%(sitepkgs)s/hgext/hg-git/dulwich/tests', recursive=True)
