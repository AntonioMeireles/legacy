#
# Copyright 2005, Pavel Volkovitskiy (int@mtx.ru)
#

class libetpan(AutoPackageRecipe):

    name = 'libetpan'
    version = '0.48'

    Flags.bdb = True

    buildRequires = [ 'openssl:devel', 'bash:runtime', 'cyrus-sasl:devel' ]

    if Flags.bdb:
    	buildRequires.extend(['db:devel'])

    def unpack(r):

        r.addArchive('http://switch.dl.sourceforge.net/sourceforge/%(name)s/%(name)s-%(version)s.tar.gz')

    def configure(r):

        if Use.krb:
            r.macros.cppflags = '%(cppflags)s -I%(prefix)s/kerberos/include'
            r.macros.ldflags = '%(ldflags)s -L%(prefix)s/kerberos/lib'

	extraConf = ''
	if not Flags.bdb:
		extraConf += ' --disable-db'
        r.Configure()

    def policy(r):
        r.Requires('sed:runtime', '%(bindir)s/%(name)s-config')
