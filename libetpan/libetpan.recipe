#
# Copyright 2005, Pavel Volkovitskiy (int@mtx.ru)
# Changes 2007 Foresight Linux
#

class libetpan(AutoPackageRecipe):

    name = 'libetpan'
    version = '0.56'

    buildRequires = [ 'openssl:devel', 'bash:runtime', 'cyrus-sasl:devel',
        'db:devel', 'curl:devel', 'expat:devel', 'libstdc++:devel' ]

    def unpack(r):
        r.addArchive('http://switch.dl.sourceforge.net/sourceforge/%(name)s/%(name)s-%(version)s.tar.gz')

    def configure(r):

        if Use.krb:
            r.macros.cppflags = '%(cppflags)s -I%(prefix)s/kerberos/include'
            r.macros.ldflags = '%(ldflags)s -L%(prefix)s/kerberos/lib'
        r.Configure()

    def policy(r):
        r.Requires('sed:runtime', '%(bindir)s/%(name)s-config')
