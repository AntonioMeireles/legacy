#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class MonoDoc(AutoPackageRecipe):
    name = 'monodoc'
    version = '2.0'

    buildRequires = [ 'mono:runtime', 'mono:lib', 'mono:cil', 'unzip:runtime', 'mono:devel', 'autoconf:runtime','automake:runtime','pkgconfig:devel' ]

    def unpack(r):
        r.addArchive('http://go-mono.com/sources/%(name)s/')
        r.Environment('MONO_SHARED_DIR', '/tmp')

        # we Install all our .dlls under $(libdir), not $(prefix)/lib
        r.Replace('\$\(prefix\)/lib', '$(libdir)', 'engine/Makefile.am')
        r.Replace('libdir=@prefix@/lib','libdir=@libdir@', 'monodoc.pc.in')
        r.Replace('\${prefix}/lib', '${libdir}', 'monodoc.pc.in')
        r.Run('autoreconf')

    def policy(r):
        r.NonBinariesInBindirs(exceptions=['%(bindir)s/.*\.exe'])
