class GroupDesktopPlatform(GroupRecipe):
    name = 'group-desktop-platform'
    version = '1.9.0.0.1'

    autoResolve = True

    Flags.local_tools = True
    depCheck = True
    checkPathConflicts = True
    x86_64FlavorString = 'is: x86(i486,i586,i686,~!sse2) x86_64'
    rPathVersionStr = None

    unwantedComponents = [ 'supdoc' ]

    def startGroup(r, name, parentGroup, depCheck=False, byDefault=True, autoResolve = False):
        # creates group named "name", adds it to the toplevel group,
        # and sets the current group to that name.  calls to r.add()
        # will use the current group by default.

        # note: byDefault applies to whether the group is included by
        # default in its parent group, not whether the troves in
        # the group are added by default. (use the setByDefault() command
        # to get that)

        # get all the the default for the new group from its parent group.
        if parentGroup:
            r.setDefaultGroup(parentGroup)
        r.createGroup(name, autoResolve=autoResolve, depCheck=depCheck,
                      byDefault=True)
        if parentGroup:
            r.addNewGroup(name, groupName=parentGroup, byDefault=byDefault)
        r.setDefaultGroup(name)
        r.removeComponents(r.unwantedComponents)

    def flAddCopy(r, name, origin , flavor=None):
        if Arch.x86_64 and not flavor:
            flavor=GroupDesktopPlatform.x86_64FlavorString

        r.addCopy(name, origin, flavor)

    def setup(r):
        rplBranch = "conary.rpath.com@rpl:devel"
        r.setSearchPath('foresight.rpath.org@fl:2-devel', 'conary.rpath.com@rpl:devel')

        r.flAddCopy('group-core', rplBranch)
        r.flAddCopy('group-base', rplBranch)
        r.flAddCopy('group-devel', rplBranch)
        r.flAddCopy('group-X', rplBranch)
        r.flAddCopy('group-X-applications', rplBranch)
        r.flAddCopy('group-gnome', rplBranch)
        r.flAddCopy('group-netserver', rplBranch)
        r.flAddCopy('group-printing', rplBranch)
        r.flAddCopy('group-text-tools', rplBranch)

        if Arch.x86_64:
            r.flAddCopy('group-compat32', rplBranch)

        # just for now... 
        r.remove('evolution')
