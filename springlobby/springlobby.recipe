#
# Copyright (c) 2011 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#
import datetime
class Springlobby(PackageRecipe):
    name = 'springlobby'
    version = 'd0d55c9' + '+' + datetime.date.today().strftime("%Y.%m.%d")
 
    buildRequires = [
                'cmake:runtime',
                'make:runtime', 
                'binutils:runtime', 
                'boost:devel', 
                'curl:devel', 
                'desktop-file-utils:runtime', 
                'gcc-c++:runtime', 
                'gcc:runtime', 
                'gdk-pixbuf:devel', 
                'gettext:runtime', 
                'glib:devel', 
                'intltool:runtime', 
                'libgcc:devellib', 
                'libnotify:devel', 
                'libpng:devel', 
                'libstdc++:devel', 
                'libtorrent-rasterbar:devel', 
                'openal:devel', 
                'pkgconfig:devel', 
                'wxGTK:devel', 
                'wxGTK:runtime',
                'libmpg123:devel',
                    ]
 
    def setup(r):
        r.addGitSnapshot('git://springlobby.info/git/koshi/springlobby')
        # Change git when we update next time, need to use this one to get around curl issue        
        # r.addGitSnapshot('git://springlobby.info/git/buildbot/springlobby.git')
        r.Replace('boost_system-mt', 'boost_system', 'CMakeLists.txt')
        r.CMake()
        r.Make()
        r.MakeInstall()
        r.Requires('spring:runtime', '%(bindir)s/springlobby')
        r.Requires('spring:lib', '%(bindir)s/springlobby')
