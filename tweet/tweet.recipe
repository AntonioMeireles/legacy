#
# Copyright (c) 2008 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Tweet(CPackageRecipe):
    name = 'tweet'
    version = '20080621'
 
    buildRequires = ['NetworkManager:devel', 'atk:devel', 'cairo:devel', 'clutter-cairo:devel', 'clutter-gtk:devel', 'clutter:devel', 'dbus-glib:devel', 'dbus:devel', 'desktop-file-utils:runtime', 'expat:devel', 'fontconfig:devel', 'freetype:devel', 'gettext:runtime', 'glib:devel', 'gnutls:devel', 'gtk:devel', 'intltool:runtime', 'json-glib:devel', 'libX11:devel', 'libXrender:devel', 'libgcrypt:devel', 'libgpg-error:devel', 'libpng:devel', 'libsoup:devel', 'libxcb:devel', 'libxml2:devel', 'pango:devel', 'perl:runtime', 'pixman:devel', 'pkgconfig:devel', 'xcb-util:devel', 'zlib:devel', 'gnome-doc-utils:devel', 'Mesa:devel', 'gnome-common:runtime', 'gnome-common:devel', 'libtool:devel', 'libtool:runtime', 'gnome-doc-utils:runtime']
 
    def setup(r):
        #r.addArchive('http://live.gnome.org/Tweet?action=AttachFile&do=get&target=tweet-%(version)s.tar.gz')
        r.addGitSnapshot('git://github.com/ebassi/tweet.git')

        r.Configure(configureName='autogen.sh')
        if Arch.x86_64:
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'src/Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'tests/Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'data/Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'data/*/Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'data/*/*/Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'data/*/*/*/Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'copy-and-paste/Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'copy-and-paste/tidy/Makefile')
            r.Replace('\-L\/usr\/lib ','-L%(libdir)s ', 'twitter-glib/Makefile')
        r.Make()
        r.MakeInstall()

