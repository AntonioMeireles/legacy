diff -Nur ubuntu/build-tree/hal-0.5.7.1/hald/linux2/hotplug.c ubuntu.new/build-tree/hal-0.5.7.1/hald/linux2/hotplug.c
--- hal-0.5.7.1/hald/linux2/hotplug.c	2006-07-26 20:03:17.000000000 +0200
+++ hal-0.5.7.1/hald/linux2/hotplug.c	2006-08-23 12:52:59.000000000 +0200
@@ -285,6 +285,13 @@
 		is_partition = isdigit(hotplug_event->sysfs.sysfs_path[len - 1]) ||
 			       strstr (hotplug_event->sysfs.sysfs_path, "/fakevolume") ;
 
+		/* /sys/block/ has a guaranteed structure of being device/partition */
+		if (strncmp(hotplug_event->sysfs.sysfs_path, "/sys/block/", 11) == 0 &&
+		    !strchr(hotplug_event->sysfs.sysfs_path + 11, '/')) {
+			HAL_INFO(("hotplug_event->sysfs.sysfs_path %s is not a partition\n", hotplug_event->sysfs.sysfs_path));
+			is_partition = 0;
+		}
+
 		if (hotplug_event->action == HOTPLUG_ACTION_ADD) {
 			HalDevice *parent = NULL;
 
