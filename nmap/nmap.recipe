#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Nmap(CPackageRecipe):
    name = 'nmap'
    version = '4.20'

    buildRequires = [ 'openssl:devel', 'pcre:devel', 'libpcap:lib',
        'gcc-c++:runtime', 'libstdc++:devel', 'krb5:devel', 'atk:devel',
        'cairo:devel', 'desktop-file-utils:runtime', 'fontconfig:devel',
        'freetype:devel', 'glib:devel', 'gtk:devel', 'pango:devel',
        'pkgconfig:devel', 'zlib:devel', 'libX11:devel', 'libXext:devel',
        'libXrender:devel', 'libpcap:devel',
        'libpng:devel', ]

    def setup(r):
        r.disableParallelMake()
        r.addArchive('http://download.insecure.org/nmap/dist/', keyid='33599B5F')
        r.Configure('--with-libpcap=%(prefix)s --with-nmapfe --with-openssl=%(includedir)s')
        r.Make()
        r.MakeInstall()
        r.PackageSpec('nmapfe', '.*nmapfe.*')
        r.PackageSpec('nmapfe', '.*xnmap.*')
