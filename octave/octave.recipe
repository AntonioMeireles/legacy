#
# Copyright (c) 2008 Foresight Linux
# Copyright (c) 2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class octave(AutoPackageRecipe):
    name = 'octave'
    version = '3.0.2'

    buildRequires = [
        'desktop-file-utils:runtime', 'flex:runtime', 'gperf:runtime',
        'install-info:runtime', 'less:runtime', 'libstdc++:devel',
        'ncurses:devel', 'perl:runtime', 'readline:devel',
        'texinfo:runtime', 'zlib:devel', 'gnuplot:runtime',
    ]

    def unpack(r):
        r.addArchive('ftp://ftp.octave.org/pub/octave/')

    def policy(r):
        r.NonBinariesInBindirs(exceptions=('ls-R', 'PKG_ADD'))
        # we have a symlink in the way
        r.ComponentSpec('devel', '%(bindir)s/octave-config.*')
        # These probably indicate the need for a taghandler in order
        # to have things like octave-forge work, but we'll get to that
        # later if necessary
        r.InitialContents('ls-R', 'PKG_ADD')

