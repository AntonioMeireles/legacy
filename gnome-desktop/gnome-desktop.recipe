#
# Copyright (c) 2004 Specifix, Inc.
# All rights reserved
#

loadRecipe('gnomepackage.recipe', label='conary.rpath.com@rpl:devel')
class GnomeDesktop(GnomePackageRecipe):
    
    buildRequires = GnomePackageRecipe.buildRequires
    buildRequires.extend([ 'glib:devel', 'pango:devel', 'gtk:devel',
                           'GConf:devel', 'gnome-vfs:devel',
                           'libgnomeui:devel', 'libgnome:devel',
                           'startup-notification:devel', 
                           'scrollkeeper:devellib'])
    
    name = 'gnome-desktop'
    version = '2.12.2'
    
    extraConfig = GnomePackageRecipe.extraConfig
    extraConfig += ' --with-gnome-distributor="Foresight Desktop Linux" --disable-scrollkeeper'

    def setup(r):
	GnomePackageRecipe.setup(r)
	r.MakeDirs('%(sysconfdir)s/skel/Documents')
	r.MakeDirs('%(sysconfdir)s/skel/Desktop')
	r.MakeDirs('%(sysconfdir)s/skel/Music')
	r.MakeDirs('%(sysconfdir)s/skel/Photos')
	r.MakeDirs('%(sysconfdir)s/skel/Videos')
	r.Symlink('%(sysconfdir)s/skel/Documents','%(sysconfdir)s/skel/Desktop/Documents')
	r.Symlink('%(sysconfdir)s/skel/Music','%(sysconfdir)s/skel/Desktop/Music')
	r.Symlink('%(sysconfdir)s/skel/Photos','%(sysconfdir)s/skel/Desktop/Photos')
	r.Symlink('%(sysconfdir)s/skel/Videos','%(sysconfdir)s/skel/Desktop/Videos')
	r.ExcludeDirectories(exceptions=['%(sysconfdir)s/skel/Documents','%(sysconfdir)s/skel/Music','%(sysconfdir)s/skel/Photos','%(sysconfdir)s/skel/Videos'])
