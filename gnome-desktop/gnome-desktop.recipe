#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('gnomepackage.recipe', label='conary.rpath.com@rpl:devel')
class GnomeDesktop(GnomePackageRecipe):
    
    buildRequires = GnomePackageRecipe.buildRequires
    buildRequires.extend([ 'glib:devel', 'pango:devel', 'gtk:devel', 'GConf:devel',
        'gnome-vfs:devel', 'libgnomeui:devel', 'libgnome:devel',
        'startup-notification:devel', 'scrollkeeper:devellib',
        'ORBit2:devel', 'atk:devel', 'cairo:devel', 'fontconfig:devel',
        'freetype:devel', 'gnome-keyring:devel', 'libart_lgpl:devel',
        'libbonobo:devel', 'libbonoboui:devel', 'libgnomecanvas:devel',
        'libpng:devel', 'libxml2:devel', 'popt:devel', 'intltool:runtime',
        'gnome-doc-utils:devel' ])
    
    name = 'gnome-desktop'
    version = '2.14.1.1'
    
    extraConfig = GnomePackageRecipe.extraConfig
    extraConfig += ' --with-gnome-distributor="Foresight Desktop Linux" --disable-scrollkeeper'

    def unpack(r):
       GnomePackageRecipe.unpack(r)
       r.addSource('gnome-logo-icon-transparent.png', dir='pixmaps')

    def setup(r):
        GnomePackageRecipe.setup(r)
        r.MakeDirs('%(sysconfdir)s/skel/Documents')
        r.MakeDirs('%(sysconfdir)s/skel/Desktop')
        r.MakeDirs('%(sysconfdir)s/skel/Music')
        r.MakeDirs('%(sysconfdir)s/skel/Photos')
        r.MakeDirs('%(sysconfdir)s/skel/Videos')
        r.Symlink('%(sysconfdir)s/skel/Documents','%(sysconfdir)s/skel/Desktop/Documents')
        r.Symlink('%(sysconfdir)s/skel/Music','%(sysconfdir)s/skel/Desktop/Music')
        r.Symlink('%(sysconfdir)s/skel/Photos','%(sysconfdir)s/skel/Desktop/Photos')
        r.Symlink('%(sysconfdir)s/skel/Videos','%(sysconfdir)s/skel/Desktop/Videos')
        r.ExcludeDirectories(exceptions=['%(sysconfdir)s/skel/Documents','%(sysconfdir)s/skel/Music','%(sysconfdir)s/skel/Photos','%(sysconfdir)s/skel/Videos'])
