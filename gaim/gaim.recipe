#
# Copyright (c) 2004-2005 Specifix, Inc.
# All rights reserved
#
class Gaim(PackageRecipe):
    name = 'gaim'
    version = '1.5.0'
   
    buildRequires = [ 'libao:devel', 'startup-notification:devel', 'audiofile:devel',
		'gtkspell:devel', 'aspell:devel', 'mozilla:devel', 'gtk:devel',
		'GConf:devel', 'ORBit2:devel', 'atk:devel', 'cairo:devel',
		'evolution-data-server:devel', 'fontconfig:devel', 'freetype:devel',
		'glib:devel', 'glibc:devel', 'gnome-vfs:devel', 'libbonobo:devel',
		'libgnome:devel', 'libpng:devel', 'libxml2:devel', 'pango:devel',
		'perl:runtime', 'popt:devel', 'xorg-x11:devel', 'zlib:devel' ] 
               
    def setup(r):
	r.addArchive('http://easynews.dl.sourceforge.net/sourceforge/gaim/gaim-%(version)s.tar.bz2')
	r.addPatch('logging.patch')
	r.addSource('foresight-default-prefs.xml')
	r.Configure('--disable-tcl --disable-tk --enable-gnutls=no --enable-nss=yes')
	r.disableParallelMake()
	r.Make()
	r.MakeInstall()
	r.Run('find %(destdir)s -name "*.a" | xargs rm -f')
	r.Remove('%(libdir)s/gaim/relnot.so')
	r.Doc('doc/CREDITS', 'NEWS', 'COPYING', 'AUTHORS', 'doc/FAQ', 'README',
	      'ChangeLog', 'doc/PERL-HOWTO.dox')
	r.Install('foresight-default-prefs.xml','%(sysconfdir)s/gaim/prefs.xml')
