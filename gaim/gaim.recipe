#
# Copyright (c) 2004-2005 Specifix, Inc.
# All rights reserved
#
loadRecipe('gnomepackage.recipe')
class gaim(GnomePackageRecipe):
    name = 'gaim'
    version = '1.5.0'
   
    buildRequires = [ 'libao:devel', 'startup-notification:devel', 'audiofile:devel',
		'gtkspell:devel', 'aspell:devel', 'mozilla:devel', 'gtk:devel',
		'GConf:devel', 'ORBit2:devel', 'atk:devel', 'cairo:devel',
		'evolution-data-server:devel', 'fontconfig:devel', 'freetype:devel',
		'glib:devel', 'glibc:devel', 'gnome-vfs:devel', 'libbonobo:devel',
		'libgnome:devel', 'libpng:devel', 'libxml2:devel', 'pango:devel',
		'perl:runtime', 'popt:devel', 'xorg-x11:devel', 'zlib:devel', 'mozilla-nspr:devel', 'mozilla-nss:devel', 'doxygen:runtime'] 

    externalArchive = 'http://easynews.dl.sourceforge.net/sourceforge/%(name)s/%(name)s-%(version)s.tar.bz2'
        
    extraConfig = GnomePackageRecipe.extraConfig
    extraConfig += ' --disable-tcl --disable-tk --enable-gnutls=no --enable-nss=yes'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.macros.optflags = '-g -Os'
        r.addPatch('logging.patch')
        r.addSource('foresight-default-prefs.xml')

    def install(r):
        GnomePackageRecipe.install(r)
        r.Run('find %(destdir)s -name "*.a" | xargs rm -f')
	r.Remove('%(libdir)s/gaim/relnot.so')
	r.Doc('doc/CREDITS', 'NEWS', 'COPYING', 'AUTHORS', 'doc/FAQ', 'README',
	      'ChangeLog', 'doc/PERL-HOWTO.dox')
        r.Install('foresight-default-prefs.xml','%(sysconfdir)s/gaim/prefs.xml')
