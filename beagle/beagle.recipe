class Beagle(PackageRecipe):

    buildRequires = [ 'gecko-sharp:devellib',
			'gtk-sharp:devellib', 'mono:devel', 
			'evolution-sharp:devellib', 'gmime:devel', 
			'desktop-file-utils:runtime', 'atk:devel', 
			'gcc:devel', 'glib:devel', 
			'glibc:devel', 'gtk:devel', 'libxml2:devel', 
			'mozilla-nspr:devel', 'mozilla:devel', 
			'pango:devel', 'xorg-x11:devel', 'zlib:devel' ]

    name = 'beagle'
    version = '0.1.0'
    def setup(r):
        r.addArchive('ftp://ftp.gnome.org/pub/GNOME/sources/beagle/0.1/%(name)s-%(version)s.tar.bz2')
	r.addSource('beagle.sh')
	r.addSource('cron.beagle')
	r.addSource('sysconfig.beagle')
	r.Replace('Categories=Application;Settings;AdvancedSettings;Utility;Filesystem;X-Ximian-Settings;','Categories=Application;Settings;','tools/beagle-settings.desktop')
	r.Replace('/var','%(localstatedir)s','cron.beagle')
        r.Configure('--enable-maintainer-mode --with-mozilla=mozilla --enable-webservices=yes')
        r.Make()
        r.MakeInstall()
	r.Install('cron.beagle','%(sysconfdir)s/cron.hourly/')
	r.Install('sysconfig.beagle','%(sysconfdir)s/sysconfig/')
	r.Install('beagle.sh', '/etc/X11/xinit/xinitrc.d/beagle.sh')
	r.MakeDirs('%(localstatedir)s/cache/beagle/indexes/share')
	r.MakeDevices('/dev/inotify','c',10,63,'root','root',0644)
	r.Requires('/bin/awk', '%(taghandlerdir)s/home-user_xattr-user')
	r.Requires('e2fsprogs:runtime', '%(taghandlerdir)s/home-user_xattr-user')
	r.Requires('distro-release:runtime', '%(bindir)s/beagled')
	r.TagSpec('home-user_xattr-user', '%(bindir)s/beagled')
