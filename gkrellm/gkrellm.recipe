#
# Copyright (c) 2005 Specifix, Inc.
# All rights reserved
#

class Gkrellm(PackageRecipe):

    buildRequires = [ 'gtk:devel' ]
    name = 'gkrellm'
    version = '2.2.4'
    buildRequires = [ 'atk:devel', 'cairo:devel', 'fontconfig:devel',
        'freetype:devel', 'glib:devel', 'glibc:devel', 'libpng:devel',
        'pango:devel', 'xorg-x11:devel', 'zlib:devel' ]
    

    def setup(r):
	r.addArchive('http://members.dslextreme.com/users/billw/gkrellm/gkrellm-%(version)s.tar.bz2')

        # makefile degenerates to placing its include dir in /include.
        r.Replace('/include', '/usr/include', 'Makefile')

        if r.macros.lib == 'lib64':
            r.Run('sed -i "s^-L/usr/X11R6/lib^-L/usr/X11R6/lib64 -L/usr/X11R6/lib^g" '
                  'src/Makefile')
	r.Make()
	r.MakeInstall()
	r.Doc('INSTALL', 'Changelog', 'COPYRIGHT', 'CREDITS', 'README',
              'Changelog-plugins.html', 'Changelog-themes.html', 'Themes.html')
