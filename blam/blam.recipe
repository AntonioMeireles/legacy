loadSuperClass('gnomepackage', label='conary.rpath.com@rpl:devel')
loadInstalled('mozilla', label='conary.rpath.com@rpl:devel')

class Blam(GnomePackageRecipe):

    buildRequires = [ 'gtk:devel', 'gtk-sharp:devellib', 'gecko-sharp:devellib', 'mono:devel',
		'GConf:devel','ORBit2:devel', 'atk:devel', 'cairo:devel', 'fontconfig:devel',
		'freetype:devel', 'glib:devel', 'gnome-keyring:devel', 'gnome-vfs:devel',
		'libart_lgpl:devel', 'libbonobo:devel', 'libbonoboui:devel', 'libgnome:devel',
		'libgnomecanvas:devel', 'libgnomeui:devel', 'libpng:devel', 'libstdc++:devel',
		'libxml2:devel', 'mozilla-nspr:devel', 'mozilla:devel', 'pango:devel',
		'popt:devel', 'GConf:runtime', 'gettext:runtime', 'mono:runtime',
		'desktop-file-utils:runtime' ]

    name = 'blam'
    version = '1.8.2'

    def unpack(r):
        GnomePackageRecipe.unpack(r)
        r.addSource('collection.xml')
        r.macros.optflags = '-Os'
	r.Replace('gecko-sharp','gecko-sharp-2.0','configure')
	r.Replace('gtk-sharp','gtk-sharp-2.0','configure')
	r.Replace('gconf-sharp','gconf-sharp-2.0','configure')
	r.Replace('glade-sharp','glade-sharp-2.0','configure')

    def build(r):
	r.macros.mozver = Mozilla.version
	r.macros.mozilladir = 'mozilla-%(mozver)s'
	r.Requires(rpath='%(libdir)s/%(mozilladir)s')
	GnomePackageRecipe.build(r)
