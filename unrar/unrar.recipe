#
# Copyright (c) 2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class unRAR(CPackageRecipe):
    name = 'unrar'
    version = '3.9.7'

    buildRequires =  [ 'libstdc++:devel', ]

    def setup(r):
        r.macros.archive_name = 'unrarsrc'
        r.addArchive('http://www.rarlab.com/rar/')

        # CONTRIB-55 CVE-2007-3726
        #r.addPatch('cve-2007-3726.patch')

        r.Symlink('makefile.unix','Makefile')

        r.Replace(('^CXX=.*', ''),
                  ('^CXXFLAGS=.*', ''),
                  ('^STRIP=.*', 'STRIP=true'),
                  'makefile.unix')

        r.Make()
        r.Install('unrar','%(bindir)s/')
        r.Doc('*.txt')

