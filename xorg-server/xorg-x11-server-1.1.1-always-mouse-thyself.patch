--- xorg-server-1.1.1/hw/xfree86/common/xf86Config.c.mouse-thyself	2006-08-10 14:00:15.000000000 -0400
+++ xorg-server-1.1.1/hw/xfree86/common/xf86Config.c	2006-08-10 14:19:13.000000000 -0400
@@ -1625,6 +1625,31 @@
 	return FALSE;
     }
 
+    /*
+     * hack: always synthesize a 'mouse' section configured to send core
+     * events, unless a 'void' section is found, in which case the user
+     * probably wants to run footless.
+     */
+    if (!xf86findInputByDriver("void", xf86configptr->conf_input_lst) &&
+	    !xf86findInputByDriver("mouse", xf86configptr->conf_input_lst)) {
+	xf86Msg(X_INFO, "No default mouse found, adding one\n");
+	bzero(&defPtr, sizeof(defPtr));
+	defPtr.inp_identifier = "<default pointer>";
+	defPtr.inp_driver = "mouse";
+	confInput = &defPtr;
+	foundPointer = configInput(&Pointer, confInput, from);
+        if (foundPointer) {
+	    count++;
+	    indp = xnfrealloc(servlayoutp->inputs,
+			      (count + 1) * sizeof(IDevRec));
+	    indp[count - 1] = Pointer;
+	    indp[count - 1].extraOptions =
+				xf86addNewOption(NULL, "AlwaysCore", NULL);
+	    indp[count].identifier = NULL;
+	    servlayoutp->inputs = indp;
+	}
+    }
+
     confInput = NULL;
 
     /* 1. Check for the -keyboard command line option. */
