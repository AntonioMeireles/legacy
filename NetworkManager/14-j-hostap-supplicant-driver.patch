--- src/nm-device-802-11-wireless.c.orig	2006-11-14 20:33:03.000000000 +0100
+++ src/nm-device-802-11-wireless.c	2006-11-14 20:35:29.000000000 +0100
@@ -2526,7 +2526,9 @@
        
 	if (!strcmp (kernel_driver, "ath_pci"))
                wpa_driver = "madwifi";
-       else
+        else if (!strcmp (kernel_driver, "hostap_pci") || !strcmp (kernel_driver, "hostap_cs") || !strcmp (kernel_driver, "hostap_plx"))
+               wpa_driver = "hostap";
+	else
                wpa_driver = "wext";
 
 	/* wpa_cli -g/var/run/wpa_supplicant-global interface_add eth1 "" wext /var/run/wpa_supplicant */
