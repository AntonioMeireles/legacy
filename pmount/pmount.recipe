#
# Copyright (c) 2005-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class PMount(CPackageRecipe):
   name = 'pmount'
   version = '0.9.13'

   buildRequires = [ 'sysfsutils:devel', 'hal:devel', 'dbus:devel', 'pkgconfig:devel', 'gettext:runtime', 'perl:runtime', 'perl-XML-Parser:perl']

   def setup(r):
        r.addArchive('http://www.piware.de/projects/pmount-%(version)s.tar.gz')
        r.addPatch('pmount-dbus-close.patch')

        r.Replace(' -o root -g root','', 'src/Makefile.*')

        r.Configure()
        r.Make()
        r.MakeInstall()
        r.SetModes('%(bindir)s/pmount','%(bindir)s/pumount', 04755)
