#
# Copyright (c) 2004-2009 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Bc(CPackageRecipe):
    name = 'bc'
    version = '1.06'

    buildRequires = [ 'bison:runtime', 'flex:runtime', 'ncurses:devel',
        'readline:devel', 'install-info:runtime', ]

    def setup(r):
        r.addArchive('mirror://gnu/bc/')
        r.addPatch('bc-1.06-readline42.patch')
        r.addPatch('bc-1.06-info_exp_bessel.patch')
        # RPL-3034
        r.addPatch('http://cvs.fedoraproject.org/viewvc/devel/bc/bc-1.06-dc_ibase.patch?view=co')
        r.addPatch('http://cvs.fedoraproject.org/viewvc/devel/bc/bc-1.06-s390.patch?view=co')
        r.addPatch('http://cvs.fedoraproject.org/viewvc/devel/bc/bc-1.06-string.patch?view=co')

        # flex option parsing seems to have changed. these options are the
        # default in gnu flex anyway, so just remove them
        r.Replace('-I8', '', 'configure')

        r.Configure('--with-readline')
        r.Make()
        r.MakeInstall()
        r.Doc('COPYING.LIB')
