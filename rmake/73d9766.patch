# HG changeset patch
# User Michael Tharp <mtharp@rpath.com>
# Date 1352302129 18000
# Node ID 73d976606f76443cfcd85e8589abbfbd22396573
# Parent  535af9948c66edebc944c8971b97437b0d0e4a2d
Fix test broken by resolver cache

diff --git a/rmake_test/unit_test/buildtest/buildertest.py b/rmake_test/unit_test/buildtest/buildertest.py
--- a/rmake_test/unit_test/buildtest/buildertest.py
+++ b/rmake_test/unit_test/buildtest/buildertest.py
@@ -75,11 +75,13 @@
         job.setBuildTroves._mock.assertCalled(expected)
 
         logDir = builderObj.serverCfg.getBuildLogDir(1)
+        rscache = self.rmakeCfg.getResolverCachePath()
         dephandler.DependencyHandler._mock.assertCalled(
                                          builderObj.job.getPublisher(),
                                          builderObj.logger,
                                          expectReg, [specTrv], logDir,
-                                         dumbMode=False)
+                                         dumbMode=False,
+                                         resolverCachePath=rscache)
 
     def testBuild(self):
         trv = imagetrove.ImageTrove(1, *self.makeTroveTuple('group-foo'))
