#
# Copyright (c) 2007,2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Splashy(PackageRecipe):
    name = 'splashy-theme'
    version = '0.3.5'

    def setup(r):
        r.addSource('background.png')
        r.addSource('FreeSans.ttf')
        r.addSource('theme.xml')
        r.Copy('*',
               '%(datadir)s/splashy/themes/rpath/')
        r.Requires('splashy:runtime',
                   '%(datadir)s/splashy/themes/rpath/theme.xml');
        # Do not tag the default theme.  There's no need to.  (RPL-3188)
        # r.TagSpec('splashy-theme', '%(datadir)s/splashy/themes/rpath/theme.xml')

        r.addSource('syslinux-background.png', dest='/boot/extlinux/background.png')
        r.Create('%(sysconfdir)s/bootloader.d/syslinux-background.conf', contents="""\
background /boot/extlinux/background.png
""")
        r.Create('%(sysconfdir)s/bootloader/syslinux/layout.conf', contents="""\
menu rows 14
menu tabmsgrow 20
menu cmdlinerow 20
menu timeoutrow 21
""")
        r.TagSpec('bootman-config', '%(sysconfdir)s/bootloader/')
        r.TagSpec('bootman-config', '%(sysconfdir)s/bootloader.d/')
