#
# Copyright (c) 2004-2009 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('kdecorepackage')
class kdeUtils(kdeCorePackageRecipe):

    name = 'kdeutils'
    version = '4.3.1+r1024331'

    buildRequires = [
        'dbus-python:python', 'gmp:devel', 'konqueror:devel', 'libzip:devel',
        'pycups:python', 'pykde:python', 'PyQt4:python', 'python:devel',
        'qca2:devel', 'qimageblitz:devel', 'system-config-printer:python'
    ]

    modules = [
        'ark',
        'kcalc',
        'kcharselect',
        'kdelirc',
        'kdessh',
        'kdf',
        'kfloppy',
        'kgpg',
        'ktimer',
        'kwallet',
        'okteta',
        'superkaramba',
        'sweeper',
        ('printer-applet-kde', 'printer-applet'),
    ]

    def postUnpack(r):

        r.addUbuntuPatches('k/kdeutils',
            'kubuntu_01_kgpg_key_gen.diff',
        )

        # build fix
        r.addPatch('kdeutils-4.3-kwalletmanager.patch')

        r.Replace('add_subdirectory.kcontrol.', '', 'doc/CMakeLists.txt')

