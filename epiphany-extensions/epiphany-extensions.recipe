#
# Copyright (c) 2007 Foresight Linux .
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('gnomepackage')
class EpiphanyExtensions(GnomePackageRecipe):

    buildRequires = [ 'GConf:runtime', 'dbus-glib:devel','epiphany:devel',
                      'gcc-c++:runtime', 'gettext:runtime', 'gnome-python:python',
                      'nspr:devel', 'opensp:devel', 'pcre:devel', 'perl:runtime',
                      'pygtk:python', 'pygobject:python', 'scrollkeeper:runtime',
                      'xulrunner:devel', 'libxslt:runtime' ]

    name = 'epiphany-extensions'
    version = '2.20.1'

    # We rather disable scrollkeeper:
    extraConfig = ' --disable-scrollkeeper'

    ## Extension Handling
    # Default (all) extensions are:
    # actions, auto-scroller, certificates, error-viewer, extensions-manager-ui
    # gestures, java-console, page-info, push-scroller, select-stylesheet,
    # sidebar, smart-bookmarks, tab-groups, tab-states, python-console favicon 
    # cc-license-viewer
    #
    # Enable more extensions: 
    extraConfig += ' --with-extensions=all,favicon,greasemonkey,livehttpheaders,permissions,rss'
    # We disable epilicious till bug #433739 in GNOME bugzilla is solved.
    # 'epilicious'

    def setup(r):
        GnomePackageRecipe.setup(r)
        r.Requires(exceptDeps=r'soname\:\ ELF32\/libgtkembedmoz\.so\(SysV\ x86\)')
        r.Requires(exceptDeps=r'soname\:\ ELF32\/libxpcom\.so\(SysV\ x86\)')
