#
# Copyright (c) 2009 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#
class Gnash(CPackageRecipe):
    name = 'gnash'
    version = '0.8.7'
 
    buildRequires = ['SDL:devel',
		'agg:devel',
		'boost:devel',
		'curl:devel',
		'dejagnu:devel',
		'dejagnu:runtime',
		'expat:devel',
		'fontconfig:devel',
		'freetype:devel',
		'gettext:runtime',
		'giflib:devel',
		'glib:devel',
		'gstreamer:devel',
		'gstreamer:runtime',
		'gtk:devel',
		'libX11:devel',
		'libXext:devel',
		'libXi:devel',
		'libXv:devel',
		'libjpeg:devel',
		'libpng:devel',
		'libstdc++:devel',
		'libtool:devel',
		'libxml2:devel',
		'openldap:devel',
		'perl:runtime',
		'pkgconfig:devel',
		'speex:devel',
		'zip:runtime',
		'zlib:devel',
		'gst-plugins-base:devel',
		'gst-plugins-ffmpeg:lib',
		'libmad:devel',
		'libmad:devellib',
		# 'gst-plugins-ffmpeg:devellib', 
		'gst-plugins-ugly:lib',
		'gst-plugins-bad:lib',
		'bzip2:devel',
		'doxygen:runtime',
		'nc:runtime',
		'wget:runtime']
 
    def setup(r):
        r.addArchive('http://ftp.gnu.org/pub/gnu/gnash/%(version)s/%(name)s-%(version)s.tar.gz')
        r.macros.ldflags += ' -L%(libdir)s/xorg.mesa.3d/ '
	r.Configure('--with-plugins-install=prefix --with-npapi-plugindir=%(libdir)s/mozilla/plugins/ --with-npapi-install=prefix --enable-gui=gtk')
        r.Make()
        r.MakeInstall()
        r.MakeInstall(installtarget='install-plugins')
