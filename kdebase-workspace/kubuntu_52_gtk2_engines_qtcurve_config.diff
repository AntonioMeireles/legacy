Index: kdebase-workspace-4.3.90/startkde.cmake
===================================================================
--- kdebase-workspace-4.3.90.orig/startkde.cmake	2010-01-06 20:08:40.286005830 -0500
+++ kdebase-workspace-4.3.90/startkde.cmake	2010-01-06 20:09:55.494006506 -0500
@@ -242,6 +242,39 @@
   unset KLOCALE_LANGUAGES
 fi
 
+# configuration of the gtk2-engines-qtcurve if not already set
+
+# First we need to remove previous gtk-qt-engines config if any
+if [ -e $kdehome/env/gtk-qt-engine.rc.sh ] && [ ! -e /var/lib/dpkg/info/gtk-qt-engine.list ] ; then
+  rm -f $kdehome/env/gtk-qt-engine.rc.sh
+  # We also have to remove .gtkrc-2.0-kde4 since it'll have gtk-qt-engines config in it
+  if [ -e $HOME/.gtkrc-2.0-kde4 ] ; then
+    rm -f $HOME/.gtkrc-2.0-kde4
+  fi
+fi
+
+if [ -e /var/lib/dpkg/info/gtk2-engines-qtcurve.list ] && [ -e /var/lib/dpkg/info/kubuntu-default-settings.list ] ; then
+  # The theme and k-d-s are installed, configuring...
+  if [ ! -e $kdehome/env/gtk2-engines-qtcurve.rc.sh ] && [ -e /usr/share/kubuntu-default-settings/gtk2-engines-qtcurve.rc.sh ] ; then
+    mkdir -p $kdehome/env
+    cp -f /usr/share/kubuntu-default-settings/gtk2-engines-qtcurve.rc.sh $kdehome/env
+    chmod 755 $kdehome/env/gtk2-engines-qtcurve.rc.sh
+  fi
+
+  if [ ! -e $HOME/.gtkrc-2.0-kde4 ] && [ -e /usr/share/kubuntu-default-settings/dot-gtkrc-2.0-kde4 ] ; then
+    cp -f /usr/share/kubuntu-default-settings/dot-gtkrc-2.0-kde4 $HOME/.gtkrc-2.0-kde4
+  fi
+else
+  # Either the theme or k-d-s are missing, not forcing the configuration then... 
+  if [ -e $kdehome/env/gtk2-engines-qtcurve.rc.sh ] ; then
+    rm -f $kdehome/env/gtk2-engines-qtcurve.rc.sh
+  fi
+
+  if [ -e $HOME/.gtkrc-2.0-kde4 ] && [ ! -e /var/lib/dpkg/info/gtk-qt-engine.list ] ; then
+    rm -f $HOME/.gtkrc-2.0-kde4
+  fi
+fi
+
 # Source scripts found in <localprefix>/env/*.sh and <prefixes>/env/*.sh
 # (where <localprefix> is $KDEHOME or ~/.kde, and <prefixes> is where KDE is installed)
 #
