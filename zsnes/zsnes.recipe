class Zsnes(PackageRecipe):

    name = "zsnes"
    version = "1.42"

    buildRequires = [
        'SDL:devel',
        'desktop-file-utils:runtime',
        'gcc:devel',
        'glibc:devel',
        'libgcc:devellib',
        'libpng:devel',
        'libstdc++:devel',
        'nasm:runtime',
        'xorg-x11:devel',
        'zlib:devel',
    ]

    def setup(r):
        r.macros.versionmaj = r.version.split('.')[0]
        r.macros.versionmin = r.version.split('.')[1]

        r.addArchive('http://voxel.dl.sourceforge.net/sourceforge/%(name)s/%(name)s%(versionmaj)s%(versionmin)ssrc.tar.gz')
        r.addSource('zsnes.desktop')
        r.mainDir('zsnes_%(versionmaj)s_%(versionmin)s/src')
        r.Replace('@prefix@/man', '@prefix@/share/man', 'Makefile.in')

        r.Configure()
        r.Make()
        r.MakeInstall()
        r.Install('icons/16x16x32.png', '%(datadir)s/pixmaps/zsnes_16x16x32.png')
        r.Install('icons/32x32x32.png', '%(datadir)s/pixmaps/zsnes_32x32x32.png')
        r.Install('icons/48x48x32.png', '%(datadir)s/pixmaps/zsnes_48x48x32.png')
        r.Install('icons/64x64x32.png', '%(datadir)s/pixmaps/zsnes_64x64x32.png')

        r.Desktopfile('zsnes.desktop')
