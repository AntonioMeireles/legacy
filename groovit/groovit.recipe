# Gil Hamlin
# gil@foresightlinux.com
# 15th October 2005

class Groovit(CPackageRecipe):

    name = 'groovit'
    version = '1.3'

    buildRequires = ['ncurses:devel']

    def setup(r):
        r.addArchive('http://groovit.disjunkt.com/downloads/%(version)s/%(name)s-%(version)s.tar.gz')

        r.Replace('^SAMPLEDIR=.*', 'SAMPLEDIR=%(datadir)s/%(name)s',
'Configure')

        # Some place to put the settings file.
        r.Replace('/usr/local/lib/groovit', '%(sysconfdir)s', 'settings.h')

        r.Make('fast')

        # Install it.
        r.Replace(('here_insert_revision', '%(version)s'),
                  ('here_insert_url/doc', '%(thisdocdir)s'),
                  ('here_insert_sampledir', '%(datadir)s/%(name)s'),
                  ('here_insert_mainrc', '%(sysconfdir)s/groovitrc'),
                  'groovit.man1')
        r.Replace('here_insert_url/doc', '%(thisdocdir)s', 'grov.man5')

        r.Install('groovit', '%(destdir)s/%(bindir)s/')
        r.Install('groovit.man1', '%(destdir)s/%(mandir)s/man1/groovit.1')
        r.Install('grov.man5', '%(destdir)s/%(mandir)s/man5/grov.5')
        r.Install('doc-groovit/*', '%(destdir)s/%(thisdocdir)s/')
        r.Install('SAMPLES/*', '%(destdir)s/%(datadir)s/%(name)s/') 
