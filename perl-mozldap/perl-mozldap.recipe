#
# Copyright (c) 2008 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class PerlMozLdap(CPackageRecipe):
    name = 'perl-mozldap'
    version = '1.5.2'

    buildRequires = [ 'mozldap:devel', 'nspr:devel', 'nss:devel',
                      'perl:devel', 'perl:runtime', 'pkgconfig:devel' ]


    def setup(r):
        r.addArchive('ftp://ftp.mozilla.org/pub/mozilla.org/directory/perldap/releases/%(version)s/src/%(name)s-%(version)s.tar.gz')
        r.Run('LDAPSDKINCDIR=`pkg-config --variable=includedir mozldap` '
              'LDAPSDKLIBDIR=`pkg-config --variable=libdir mozldap` '
              'perl Makefile.PL')
        r.Make()
        r.MakeInstall()
