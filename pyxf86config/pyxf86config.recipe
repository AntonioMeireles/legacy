#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('python.recipe', label='conary.rpath.com@rpl:1')


class PyXF86Config(AutoPackageRecipe):
    name = 'pyxf86config'
    version = '0.3.30'

    buildRequires = [ 'python:devel', 'glib:devel', 'pkgconfig:devel',
	'xorg-server:devel' ]

    def unpack(r):
        r.macros.pyver = Python.majversion
        r.macros.cflags += ' -fPIC'
        srpm = 'ftp://download.fedora.redhat.com/pub/fedora/linux/core/development/source/SRPMS/%(name)s-%(version)s-1.fc6.src.rpm'
        r.addArchive('pyxf86config-%(version)s.tar.gz', rpm=srpm)

    def configure(r):
        r.Configure('--x-libraries=%(libdir)s '
                    '--with-python-version=%(pyver)s')

    def makeinstall(r):
        r.MakeInstall()
        r.CompilePython('%(libdir)s/*/*')
 

