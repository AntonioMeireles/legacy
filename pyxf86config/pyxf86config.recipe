#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('python.recipe')
class PyXF86Config(AutoPackageRecipe):
    name = 'pyxf86config'
    version = '0.3.18'

    buildRequires = [ 'python:devel', 'glib:devel', 'xorg-x11:devel' ]

    def unpack(r):
        r.macros.pyver = Python.majversion
        r.macros.cflags += ' -fPIC'
        srpm = 'ftp://download.fedora.redhat.com/pub/fedora/linux/core/2/SRPMS/pyxf86config-0.3.18-2.src.rpm'
        r.addArchive('pyxf86config-%(version)s.tar.gz', rpm=srpm)

    def configure(r):
        r.Configure('--x-libraries=%(x11prefix)s/%(lib)s '
                    '--with-python-version=%(pyver)s')

    def makeinstall(r):
        r.MakeInstall()
        r.CompilePython('%(libdir)s/*/*')
