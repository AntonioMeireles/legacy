# Copyright (c) 2010 Foresight Linux                                                                                                                                                         
# This file is distributed under the terms of the MIT License.                                                                                                                               
# A copy is available at http://www.rpath.com/permanent/mit-license.html                                                                                                                     
#                                                                                                                                                                                            

loadSuperClass('rpmpackage')
class Gxine(RPMPackageRecipe,AutoPackageRecipe):

    name = 'gxine'
    version = '0.5.905'
    rpmRelease = '1.fc13'

    buildRequires = [ 'desktop-file-utils:runtime', 'gtk:runtime', 'cairo:devel', 'dbus-glib:devel', 'dbus:devel', 'fontconfig:devel', 'freetype:devel', 'gettext:runtime', 'glib:devel', 'g\
nome-screensaver:runtime', 'gtk:devel', 'hal:devel', 'intltool:runtime', 'js:devel', 'libICE:devel', 'libSM:devel', 'libX11:devel', 'libXaw:devel', 'libXext:devel', 'libXinerama:devel', 'l\
ibXrandr:devel', 'libXt:devel', 'librsvg:runtime', 'libxcb:devel', 'lirc:devel', 'pango:devel', 'pkgconfig:devel', 'xextproto:devel', 'xine-lib:devel', 'xineramaproto:devel' ]

    rpmPatches = [
        'gxine-0.5.902-non-separate-toolbar.patch',
        'gxine-0.5.905-desktop.patch',
        'gxine-0.5.905-lirc.patch',
        ]


    def configure(r):
        r.Configure('--with-dbus --with-hal --with-logo-format=image --with-browser-plugin=yes '
                    '--with-spidermonkey=%(libdir)s --disable-integration-wizard --enable-watchdog  --disable-own-playlist-parsers --disable-deprecated')

    def policy(r):
        r.MakeDirs('%(libdir)s/mozilla/plugins/')
        r.Move('%(libdir)s/gxine/gxineplugin.so', '%(libdir)s/mozilla/plugins/')
