#
# Copyright (c) 2004-2005 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Xterm(CPackageRecipe):

    name = 'xterm'
    version = '202'

    buildRequires = [ 'xorg-x11:devel', 'fontconfig:devel',
        'freetype:devel', 'libtermcap:devel', 'utempter:devel']

    def setup(r):
        r.addArchive('ftp://dickey.his.com/xterm/%(name)s-%(version)s.tgz')
        r.addPatch('metaSendsEscape.patch')

        r.Configure('--enable-luit --enable-warnings '
                    '--enable-wide-chars --with-utempter')
        r.Make()
        r.MakeInstall()

        r.Symlink('%(bindir)s/xterm', '%(x11prefix)s/bin/')
        r.Move('%(mandir)s/*.1', '%(mandir)s/man1/')
        r.Move('%(prefix)s/%(lib)s/X11/app-defaults/*',
               '%(x11prefix)s/lib/X11/app-defaults/')

