#
# Copyright (c) 2004-2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Irqbalance(CPackageRecipe):
    name = 'irqbalance'
    version = '0.55'
    buildRequires = [ 'gccmakedep:runtime', 'glib:devel', 'pkgconfig:devel' ]

    def setup(r):
        srpm='http://download.fedora.redhat.com/pub/fedora/linux/releases/7/Fedora/source/SRPMS/irqbalance-0.55-2.fc7.src.rpm'
        r.addArchive('http://irqbalance.org/releases/')
        r.addSource('irqbalance.init', rpm=srpm,
                    apply="sed -i '/# chkconfig:/s/ 13/ 20/g' irqbalance",
                    dest='%(initdir)s/irqbalance')
        r.addSource('irqbalance.sysconfig', rpm=srpm,
                    dest='%(sysconfdir)s/sysconfig/irqbalance')
        r.addSource('irqbalance.1', rpm=srpm,
                    dest='%(mandir)s/man1/irqbalance.1')
        r.Make()
        r.Install('irqbalance', '%(sbindir)s/')
        r.TagSpec('initscript', '%(initdir)s/')
