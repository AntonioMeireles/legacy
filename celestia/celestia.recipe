#
# Copyright (c) 2008 Dick Marinus (dick@mrns.nl)
#

class Celestia(AutoPackageRecipe):
    name = 'celestia'
    version = '1.5.0'

    buildRequires = [ 'zlib:devel', 'libXmu:devel', 'libXi:devel',
                      'Mesa:devel', 'pkgconfig:devel', 'gtk:devel',
                      'libgnomeui:devel', 'gtkglext:devel',
                      'libjpeg:devel', 'expat:devel', 'lua:devel',
                      'gcc-c++:runtime', 'gettext:devel' ]

    def unpack(r):
        r.addArchive('mirror://sourceforge/%(name)s/%(name)s-%(version)s.tar.gz')
    def configure(r):
        r.Replace('#ifdef _WIN32', '#if 1', 'src/celutil/util.h')
	r.Run('sed -ie "1iunsermake_enable_pch_FALSE=\'#\'" configure')
        r.Configure('--with-gnome --with-gl-libs=/usr/lib/xorg.mesa.3d --with-glu-libs=/usr/lib/xorg.mesa.3d')
