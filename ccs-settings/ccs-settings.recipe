#
# Copyright (c) 2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class CCSSettings(CPackageRecipe):
    name = 'ccs-settings'
    version = '070621_12.3'

    buildRequires = ['atk:devel', 'cairo:devel', 'ccs-lib:devel', 'desktop-file-utils:runtime', 'fontconfig:devel', 'freetype:devel', 'gettext:runtime', 'glib:devel', 'gtk:devel', 'libICE:devel', 'libSM:devel', 'libX11:devel', 'libXcomposite:devel', 'libXdamage:devel', 'libXext:devel', 'libXfixes:devel', 'libXinerama:devellib', 'libXrandr:devel', 'libXrender:devel', 'libpng:devel', 'libxml2:devel', 'pango:devel', 'perl:runtime', 'pkgconfig:devel', 'startup-notification:devel', 'zlib:devel', 'ccs-python:python', 'pycairo:python', 'pygobject:python', 'pygtk:python', 'GConf:devel', 'ORBit2:devel', 'autoconf:runtime','automake:runtime', 'libtool:devel',  'libtool:runtime', 'glib:devel', 'intltool:runtime', 'intltool:devel', 'ccs-python:devellib']

    def setup(r):
        r.macros.version = r.version.replace('_','-')
        srpm = 'http://software.opensuse.org/download/home:/cyberorg/SUSE_Factory/src/%(name)s-%(version)s.src.rpm'

        r.addArchive('%(name)s.tar.bz2', rpm=srpm)
        r.addArchive('ccs-backend-gconf.tar.bz2', rpm=srpm)
#        r.addArchive('ccs-backend-kconfig.tar.bz2', rpm=srpm)

        r.Configure(configureName='autogen.sh', dir = '../compizconfig-backend-gconf')
        r.Make(dir = '../compizconfig-backend-gconf')
        r.MakeInstall(dir = '../compizconfig-backend-gconf')


        r.Configure(configureName='autogen.sh')
        r.Make()
        r.MakeInstall()



