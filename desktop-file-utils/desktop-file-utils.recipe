#
# Copyright (c) 2004 Specifix, Inc.
# All rights reserved
#

class DesktopFileUtils(PackageRecipe):

    buildRequires = [ 'glib:devel', 'popt:devel' ]

    name = 'desktop-file-utils'
    version = '0.8'
    
    def setup(r):
        r.addArchive('http://freedesktop.org/Software/%(name)s/releases/%(name)s-%(version)s.tar.gz')
        r.addSource('desktop-file.tagdescription', macros=True)
        r.addSource('desktop-file.taghandler', macros=True)

        r.Configure()
        r.Make()
        r.MakeInstall()

        # zero-length config file to help verify along...
        r.Create('%(datadir)s/applications/defaults.list')
        r.Config('%(datadir)s/applications/defaults.list')
        r.Install('desktop-file.tagdescription',
                  '%(tagdescriptiondir)s/desktop-file')
        r.Install('desktop-file.taghandler',
                  '%(taghandlerdir)s/desktop-file', mode=0755)
