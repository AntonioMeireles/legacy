#
# Copyright (c) 2004-2005 rpath, Inc.
# All rights reserved
#

class DesktopFileUtils(CPackageRecipe):
    name = 'desktop-file-utils'
    version = '0.12'
 
    buildRequires = [ 'glib:devel', 'popt:devel', 'pkgconfig:devel' ]

    def setup(r):
        r.addArchive('http://www.freedesktop.org/software/%(name)s/releases/%(name)s-%(version)s.tar.gz')
        r.addSource('desktop-file.tagdescription', macros=True)
        r.addSource('desktop-file.taghandler', macros=True)

        r.Configure()
        r.Make()
        r.MakeInstall()

        # zero-length config file to help verify along...
        r.Create('%(datadir)s/applications/defaults.list')
        
        # Don't overwrite this file on update...
        r.InitialContents('%(datadir)s/applications/defaults.list')

        r.Install('desktop-file.tagdescription',
                  '%(tagdescriptiondir)s/desktop-file')
        r.Install('desktop-file.taghandler',
                  '%(taghandlerdir)s/desktop-file', mode=0755)
