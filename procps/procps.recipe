#
# Copyright (c) 2004-2006 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Procps(CPackageRecipe):
    name = 'procps'
    version = '3.2.7'

    buildRequires = [ 'ncurses:devel' ]

    def setup(r):
        r.disableParallelMake()
        # not a sourceforge mirror
        r.addArchive('http://procps.sourceforge.net/')
        # RPL-1171. Eliminate warnings on 'sysctl -a'
        r.addPatch('procps-warning.patch', level=0)
        r.Replace('--owner 0 --group 0', '', 'Makefile')

        r.Make('SKIP="/bin/kill /usr/share/man/man1/kill.1" ')
        r.MakeDirs('%(bindir)s', '%(essentialbindir)s',
            '%(essentialsbindir)s', '%(mandir)s/man{1,5,8}',
            '%(essentiallibdir)s')
        r.MakeInstall('SKIP="/bin/kill /usr/share/man/man1/kill.1" ldconfig=echo')
