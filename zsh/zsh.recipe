#
# Copyright (c) 2009 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Zsh(CPackageRecipe):
    name = 'zsh'
    version = '4.3.10'
 
    buildRequires = ['gdbm:devel', 'libcap:devel', 'libtermcap:devel', 'ncurses:devel', 'tetex:runtime', 
'texi2html:runtime', 'texinfo:runtime', 'pcre:devel']
 
    def setup(r):
        r.addArchive('mirror://sourceforge/zsh/')
	r.Configure('--enable-cap --without-tcsetpgrp --enable-pcre --disable-dynamic --enable-ldflags=-static')
	r.Make()
	r.MakeInstall()

    def policy(r):
        r.Replace('#!/bin/zsh', '#!%(bindir)s/zsh',
            '%(datadir)s/zsh/%(version)s/functions/*', allowNoChange=True)
        r.ExcludeDirectories(exceptions='%(datadir)s/zsh/site-functions')
