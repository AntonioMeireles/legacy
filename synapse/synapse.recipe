#
# Copyright (c) 2009-2011 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#


class Synapse(CPackageRecipe):

     name = 'synapse'
     version = '0.2.2.2+r343'

     buildRequires = [
                'autoconf:runtime', 
                'automake:runtime', 
                'gtk-sharp:cil',
                'gtk-sharp:devellib', 
                'libtool:runtime', 
                'mono-addins:devellib',
                'mono:cil', 
                'mono:devel', 
                'ndesk-dbus-glib:cil',
                'ndesk-dbus-glib:devellib', 
                'notify-sharp:cil', 
                'notify-sharp:devellib',
                'qyoto:cil', 
                'ndesk-dbus:devellib',  
                'ndesk-dbus:cil', 
     ]

     def setup(r):

         r.addBzrSnapshot('lp:synapse-project')
         r.Remove('src/Synapse.Services/synapse-services.pc.in')
         r.Configure(' --libdir=%(prefix)s/lib ', configureName='autogen.sh')
         r.Make()
         r.MakeInstall()

     def policy(r):

         r.NormalizePkgConfig(exceptions='/')
         r.ComponentSpec('mono', '%(prefix)s/lib/')

