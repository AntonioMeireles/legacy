#
# Copyright (c) 2007 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadRecipe('rpmpackage')
class DBusGlib(RPMPackageRecipe,AutoPackageRecipe):

    name = 'dbus-glib'
    version = '0.74'
    rpmRelease = '1.fc9'

    rpmPatches = [ 'dbus-glib-proxy-signals-once.patch', 
                   'broken-xml.patch'
                   ]
    buildRequires = [ 'dbus:devel', 'dbus:runtime', 'doxygen:runtime', 'expat:devel', 'gettext:runtime', 'glib:devel', 'libtool:runtime', 'pkgconfig:devel', 'xmlto:runtime', 'glib:runtime' ]

    def configure(r):
        r.addSource('dbus-bus-introspect.xml', dir='tools', rpm=r.srpm)
        r.Configure(' --disable-verbose-mode '
                    ' --with-introspect-xml=dbus-bus-introspect.xml'
                    ' --disable-tests --disable-asserts')
