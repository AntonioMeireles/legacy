#
# Copyright (c) 2012 The Foresight Linux Project
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class MyPaint(CPackageRecipe):
	name = 'mypaint'
	version = '1.0.0'

        buildRequires = [
            'desktop-file-utils:runtime', 
            'glib:devel', 
            'libpng:devel', 
            'libstdc++:devel', 
            'numpy:python', 
            'psyco:python', 
            'pycairo:python', 
            'pygobject:python', 
            'pygtk:python', 
            'python-simplejson:python', 
            'python:devel',
            'scons:runtime',
            'pkgconfig:devel',
            'swig:runtime',
            ]


	def setup(r):
            r.addArchive('http://download.gna.org/mypaint/')
            r.Run(''' sed -i 's|PathOption|PathVariable|g' SConstruct ''')
            r.Run(''' sed -i 's|Options|Variables|g' SConstruct ''')
            if Arch.x86_64:
                r.Run(''' sed -i 's|lib/mypaint|lib64/mypaint|g' SConstruct mypaint.py ''')


            r.Run(''' sed -i 's|mypaint_48|mypaint|g' desktop/%(name)s.desktop ''')
            r.Make(makeName='scons')
            r.Make('prefix=%(destdir)s/%(prefix)s install', makeName='scons')
