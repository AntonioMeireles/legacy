#
# Copyright (c) 2007 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Ffmpeg(CPackageRecipe):
    name = 'ffmpeg'
    version = '0.5b'
 
    buildRequires = ['SDL:devel','a52dec:devel','faac:devel','faad2:devel','freetype:devel', 
                     'imlib2:devel', 'libtheora:devel','libogg:devel', 'libvorbis:devel',
                     'xvidcore:devel','zlib:devel']
    def setup(r):
        r.addSvnSnapshot('svn://svn.mplayerhq.hu/ffmpeg/trunk')
        r.ManualConfigure(' --prefix=%(prefix)s --enable-gpl'
            ' --enable-shared --enable-pp --enable-pthreads'
            ' --enable-libvorbis --enable-libogg --enable-liba52' 
            ' --enable-liba52bin --enable-libfaac --enable-libfaad' 
            ' --enable-libxvid --disable-swscaler --enable-libtheora ')
        r.Replace('PREFIX=/usr','PREFIX=%(destdir)s%(prefix)s','config.mak')
        r.Make()
        r.CheckDestDir('%(destdir)s')
        r.MakeInstall(rootVar='%(destdir)s')
