#
# Copyright (c) 2007 Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class FFMpeg(AutoPackageRecipe):

    name = 'ffmpeg'
    version = '0.5+r14363'

    buildRequires = [
        'a52dec:devel', 'faac:devel', 'faad2:devel', 'freetype:devel',
        'gsm:devel', 'imlib2:devel', 'lame:devel', 'libogg:devel',
        'libtheora:devel', 'libvorbis:devel', 'SDL:devel', 'x264:devel',
        'xvidcore:devel', 'zlib:devel'
    ]

    def unpack(r):

        rev = r.version.split('+')[1][1:]
        r.addSvnSnapshot('svn://svn.mplayerhq.hu/ffmpeg/trunk', revision=rev)

    def configure(r):

        r.ManualConfigure(
            ' --prefix=%(prefix)s'
            ' --disable-stripping'
            ' --disable-debug'

            ' --enable-gpl'
            ' --enable-swscale'
            ' --enable-shared'
            ' --enable-postproc'
            ' --enable-pthreads'
            #' --enable-libdc1394'
            ' --enable-libvorbis'
            ' --enable-liba52'
            ' --enable-libgsm'
            ' --enable-libfaac'
            ' --enable-libfaad'
            #' --enable-libamr-nb'
            #' --enable-libamr-wb'
            ' --enable-libtheora'
            ' --enable-libmp3lame'
            ' --enable-libx264'
            ' --enable-libxvid'
        )

