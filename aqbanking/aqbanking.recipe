#
# Copyright (c) 2006 rPath, Inc.
# Copyright of Changes 2007 by Foresight Linux
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

class Aqbanking(AutoPackageRecipe):
    name = 'aqbanking'
    version = '4.2.8'
    buildRequires = [ 
        'expat:devel',
        'fontconfig:devel',
        'freetype:devel',
        'gettext:runtime',
        'glib:devel',
        'gmp:devel',
        'graphviz:runtime',
        'gwenhywfar:devel',
        'gwenhywfar:runtime',
#        'ktoblzcheck:devel',
#        'libchipcard:devel',
        'libpng:devel',
        'libstdc++:devel',
        'libX11:devel',
        'libXrender:devel',
        'pkgconfig:devel',
        'qt4:devel',
        'zlib:devel'
    ]

    def unpack(r):
        r.addArchive('http://www2.aquamaniac.de/sites/download/download.php?package=03&release=37&file=01&dummy=%(name)s-%(version)s.tar.gz')

    def configure(r):
        # "cbanking" and "g2banking" frontends no longer supported?
        r.Configure(' --with-frontends="qbanking"'
                    ' --enable-qt3'
                    ' qt3_libs="-lQtCore -lQtGui -lQt3Support"'
                    ' qt3_includes="-I%(includedir)s/qt4 -I%(includedir)s/qt4/Qt -I%(includedir)s/qt4/QtGui -I/usr/include/qt4/QtCore -I/usr/include/qt4/Qt3Support"'
                    ' qt3_moc=%(bindir)s/moc-qt4 qt3_uic=%(bindir)s/uic-qt4')
        r.Make("qt4-port")
